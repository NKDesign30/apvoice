{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/App.vue","mtime":1683275992542},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBsYXN0IGZyb20gJ2xvZGFzaC9sYXN0JzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IEhlYWRlciBmcm9tICdAL2NvbXBvbmVudHMvdGVtcGxhdGUvSGVhZGVyLnZ1ZSc7CmltcG9ydCBTdGFnZSBmcm9tICdAL2NvbXBvbmVudHMvdGVtcGxhdGUvU3RhZ2UudnVlJzsKaW1wb3J0IEZvb3RlciBmcm9tICdAL2NvbXBvbmVudHMvdGVtcGxhdGUvRm9vdGVyLnZ1ZSc7CmltcG9ydCBDb29raWVzU2V0dGluZ3MgZnJvbSAnQC9jb21wb25lbnRzL3RlbXBsYXRlL0Nvb2tpZXNTZXR0aW5ncy52dWUnOwppbXBvcnQgUGhhcm1hY3lDb25maXJtYXRpb25Nb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvcGhhcm1hY2llcy9QaGFybWFjeUNvbmZpcm1hdGlvbk1vZGFsLnZ1ZSc7CmltcG9ydCBQYWdlUHJvZ3Jlc3MgZnJvbSAnQC9jb21wb25lbnRzL3RlbXBsYXRlL1BhZ2VQcm9ncmVzcy52dWUnOwppbXBvcnQgUGFnZVNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy9hcGkvUGFnZVNlcnZpY2UnOwppbXBvcnQgeyBQQUdFU19GRVRDSF9NRU5VUywgU0VUVElOR1NfRkVUQ0hfU0VUVElOR1MsIFNFVFRJTkdTX1NFVF9DVVJSRU5UX1ZJRVdQT1JUIH0gZnJvbSAnQC9zdG9yZS90eXBlcy9hY3Rpb24tdHlwZXMnOwoKdmFyIHNjcmVlbnMgPSByZXF1aXJlKCIuL3RhaWx3aW5kL1NjcmVlbnMiKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICAnYXBvLWZvb3Rlcic6IEZvb3RlciwKICAgICdhcG8tc3RhZ2UnOiBTdGFnZSwKICAgICdhcG8taGVhZGVyJzogSGVhZGVyLAogICAgJ2Fwby1wYWdlLXByb2dyZXNzJzogUGFnZVByb2dyZXNzLAogICAgJ2Fwby1jb29raWVzLXNldHRpbmdzJzogQ29va2llc1NldHRpbmdzLAogICAgJ2Fwby1waGFybWFjeS1jb25maXJtYXRpb24tbW9kYWwnOiBQaGFybWFjeUNvbmZpcm1hdGlvbk1vZGFsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhZ2VEYXRhOiAnJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsnaXNBdXRoZW50aWNhdGVkJywgJ3RoZW1lJywgJ3NldHRpbmdzTG9hZGVkJywgJ2xhbmd1YWdlJywgJ3Nob3dVcGRhdGVQaGFybWFjeU1vZGFsJ10pLCB7fSwgbWFwU3RhdGUoewogICAgc2V0dGluZ3M6IGZ1bmN0aW9uIHNldHRpbmdzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zZXR0aW5ncy5zZXR0aW5nczsKICAgIH0KICB9KSwgewogICAgdGhlbWVDbGFzczogZnVuY3Rpb24gdGhlbWVDbGFzcygpIHsKICAgICAgcmV0dXJuICJ0aGVtZS0iLmNvbmNhdCh0aGlzLnRoZW1lKTsKICAgIH0sCiAgICBzb3J0ZWRTY3JlZW5zOiBmdW5jdGlvbiBzb3J0ZWRTY3JlZW5zKCkgewogICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc2NyZWVucykuc29ydChmdW5jdGlvbiAoX3JlZiwgX3JlZjIpIHsKICAgICAgICB2YXIgX3JlZjMgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSwKICAgICAgICAgICAgbWluV2lkdGhBID0gX3JlZjNbMV07CgogICAgICAgIHZhciBfcmVmNCA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKSwKICAgICAgICAgICAgbWluV2lkdGhCID0gX3JlZjRbMV07CgogICAgICAgIHZhciBhID0gcGFyc2VJbnQobWluV2lkdGhBLCAxMCk7CiAgICAgICAgdmFyIGIgPSBwYXJzZUludChtaW5XaWR0aEIsIDEwKTsKCiAgICAgICAgaWYgKGEgPiBiKSB7CiAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CgogICAgICAgIGlmIChhIDwgYikgewogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0pOwogICAgfQogIH0pLAogIHdhdGNoOiB7CiAgICBpc0F1dGhlbnRpY2F0ZWQ6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGlzQXV0aGVudGljYXRlZCkgewogICAgICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgICAgIHdpbmRvdy5ldmVudEJ1cy4kZW1pdCgnYXV0aGVudGljYXRlZCcpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNldHRpbmdzTG9hZGVkOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihzZXR0aW5nc0xvYWRlZCkgewogICAgICAgIGlmIChzZXR0aW5nc0xvYWRlZCkgewogICAgICAgICAgd2luZG93LmV2ZW50QnVzLiRlbWl0KCdzZXR0aW5nc0xvYWRlZCcpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGxhbmd1YWdlOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihsYW5ndWFnZSkgewogICAgICAgIHZhciBkb2NMYW5nID0gbGFuZ3VhZ2U7CgogICAgICAgIGlmIChsYW5ndWFnZSA9PT0gJ2F0JykgewogICAgICAgICAgZG9jTGFuZyA9ICdkZSc7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZyA9IGRvY0xhbmc7CiAgICAgIH0KICAgIH0sCiAgICAkcm91dGU6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHJvdXRlKSB7CiAgICAgICAgaWYgKHRoaXMuaXNBdXRoZW50aWNhdGVkKSB7CiAgICAgICAgICB0aGlzLnN0YWdlRGF0YSA9ICcnOwogICAgICAgICAgdGhpcy5sb2FkU3RhZ2Uocm91dGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdGlhbGl6ZVN0YXRlOiBmdW5jdGlvbiBpbml0aWFsaXplU3RhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChTRVRUSU5HU19GRVRDSF9TRVRUSU5HUyk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKFBBR0VTX0ZFVENIX01FTlVTKTsKCiAgICAgIGlmICh0aGlzLmlzQXV0aGVudGljYXRlZCkgewogICAgICAgIHRoaXMuJFByb2dyZXNzLnN0YXJ0KCk7CiAgICAgICAgdGhpcy4kUHJvZ3Jlc3Muc2V0KDMwKTsKICAgICAgICBQYWdlU2VydmljZS5nZXRQYWdlcygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ2FkZFBhZ2VDb250ZW50JywgZGF0YSk7CgogICAgICAgICAgdmFyIHRtcERhdGEgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAocGFnZSkgewogICAgICAgICAgICByZXR1cm4gcGFnZS5hY2Yuc2xpZGVzOwogICAgICAgICAgfSk7CiAgICAgICAgICB0bXBEYXRhLmZvckVhY2goZnVuY3Rpb24gKHBhZ2UpIHsKICAgICAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgnYWRkU3RhZ2UnLCB7CiAgICAgICAgICAgICAgbmFtZTogcGFnZS5zbHVnLAogICAgICAgICAgICAgIHN0YWdlOiB7CiAgICAgICAgICAgICAgICBtaW5pbXVtX2hlaWdodDogcGFnZS5hY2YubWluaW11bV9oZWlnaHQsCiAgICAgICAgICAgICAgICBzbGlkZXM6IHBhZ2UuYWNmLnNsaWRlcwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy4kUHJvZ3Jlc3MuZmluaXNoKCk7CgogICAgICAgICAgX3RoaXMubG9hZFN0YWdlKF90aGlzLiRyb3V0ZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkU3RhZ2U6IGZ1bmN0aW9uIGxvYWRTdGFnZShyb3V0ZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBzdG9yZWREYXRhID0gdGhpcy4kc3RvcmUuc3RhdGUucGFnZXMuc3RhZ2VzLmZpbHRlcihmdW5jdGlvbiAoc3RhZ2UpIHsKICAgICAgICByZXR1cm4gc3RhZ2UubmFtZSA9PT0gcm91dGUucGF0aC5yZXBsYWNlKC9cLy9nLCAnJyk7CiAgICAgIH0pLmxlbmd0aCA9PT0gMSA/IHRoaXMuJHN0b3JlLnN0YXRlLnBhZ2VzLnN0YWdlcy5maWx0ZXIoZnVuY3Rpb24gKHN0YWdlKSB7CiAgICAgICAgcmV0dXJuIHN0YWdlLm5hbWUgPT09IHJvdXRlLnBhdGgucmVwbGFjZSgvXC8vZywgJycpOwogICAgICB9KVswXS5zdGFnZSA6ICcnOwoKICAgICAgaWYgKHN0b3JlZERhdGEpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuc3RhZ2VEYXRhID0gc3RvcmVkRGF0YTsKICAgICAgICB9LCAxMDApOwogICAgICB9CiAgICB9LAogICAgaW5pdGlhbGl6ZUNvZGVTbmlwcGV0czogZnVuY3Rpb24gaW5pdGlhbGl6ZUNvZGVTbmlwcGV0cygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgdW53YXRjaCA9IHRoaXMuJHdhdGNoKCdzZXR0aW5ncycsIGZ1bmN0aW9uIChzZXR0aW5ncykgewogICAgICAgIHVud2F0Y2goKTsKCiAgICAgICAgX3RoaXMzLmV2YWx1YXRlQ29kZVNuaXBwZXRzKHNldHRpbmdzLmhlYWRDb2RlU25pcHBldHMsICdoZWFkJyk7CgogICAgICAgIF90aGlzMy5ldmFsdWF0ZUNvZGVTbmlwcGV0cyhzZXR0aW5ncy5ib2R5Q29kZVNuaXBwZXRzLCAnYm9keScpOwogICAgICB9KTsKICAgIH0sCiAgICBldmFsdWF0ZUNvZGVTbmlwcGV0czogZnVuY3Rpb24gZXZhbHVhdGVDb2RlU25pcHBldHMoc25pcHBldHMsIHdyYXBwaW5nRWxlbWVudCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuY2xlYW5TbmlwcGV0cyhzbmlwcGV0cykuZm9yRWFjaChmdW5jdGlvbiAoY29kZVNuaXBwZXQpIHsKICAgICAgICB2YXIgYXR0cmlidXRlcyA9IF90aGlzNC5leHRyYWN0QXR0cmlidXRlcyhjb2RlU25pcHBldCk7CgogICAgICAgIHZhciBzY3JpcHRUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICB2YXIgZm4gPSBudWxsOwogICAgICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgaWYgKGtleSA9PT0gJ29ubG9hZCcpIHsKICAgICAgICAgICAgZm4gPSBhdHRyaWJ1dGVzW2tleV07CiAgICAgICAgICB9CgogICAgICAgICAgc2NyaXB0VGFnLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7CiAgICAgICAgfSk7CgogICAgICAgIGlmICghc2NyaXB0VGFnLmhhc0F0dHJpYnV0ZSgndHlwZScpKSB7CiAgICAgICAgICBzY3JpcHRUYWcudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOwogICAgICAgIH0KCiAgICAgICAgdmFyIHN0cmlwcGVkQ29kZVNuaXBwZXQgPSBjb2RlU25pcHBldC5yZXBsYWNlKC88c2NyaXB0W14+XSo+L2ltLCAnJyk7CiAgICAgICAgc2NyaXB0VGFnLnRleHQgPSBzdHJpcHBlZENvZGVTbmlwcGV0OwoKICAgICAgICBfdGhpczQubG9hZEFzeW5jKHNjcmlwdFRhZywgd3JhcHBpbmdFbGVtZW50KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChmbikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1ldmFsCiAgICAgICAgICAgICAgZXZhbChmbik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBsb2FkQXN5bmM6IGZ1bmN0aW9uIGxvYWRBc3luYyhzY3JpcHQsIHdyYXBwaW5nRWxlbWVudCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh3cmFwcGluZ0VsZW1lbnQpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyB0aGlzIHRpbWVvdXQgaXMgcmVxdWlyZWQgdG8gZXhlY3V0ZSBjb3JyZWN0bHkgYWxsIG9ubG9hZCBmdW5jdGlvbnMKICAgICAgICAgIC8vIHRoaXMgaXNuJ3QgYSBncmVhdCBzb2x1dGlvbiBidXQgaXRzIG5vdCBzbyBjb21tb24gdG8gYWRkIG9ubG9hZCBhdHRyaWJ1dGVzCiAgICAgICAgICAvLyBhbmQgYSBnb29kIHdvcmthcm91bmQKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgICAgfSwgMzUwKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgY2xlYW5TbmlwcGV0czogZnVuY3Rpb24gY2xlYW5TbmlwcGV0cyhzbmlwcGV0cykgewogICAgICByZXR1cm4gc25pcHBldHMuc3BsaXQoLzxcL3NjcmlwdD4vaW0pLm1hcChmdW5jdGlvbiAoc25pcHBldCkgewogICAgICAgIHJldHVybiBzbmlwcGV0LnJlcGxhY2UoLzwhLS0oLio/KS0tPi9pbSwgJycpOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKHNuaXBwZXQpIHsKICAgICAgICByZXR1cm4gc25pcHBldC50cmltKCk7CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoc25pcHBldCkgewogICAgICAgIHJldHVybiBzbmlwcGV0Lmxlbmd0aCA+IDA7CiAgICAgIH0pOwogICAgfSwKICAgIGV4dHJhY3RBdHRyaWJ1dGVzOiBmdW5jdGlvbiBleHRyYWN0QXR0cmlidXRlcyhzbmlwcGV0KSB7CiAgICAgIHZhciBhdHRyaWJ1dGVzV2l0aFZhbHVlcyA9IHNuaXBwZXQubWF0Y2goLyhcUyopPSIoLio/KSIvZyk7CgogICAgICBpZiAoYXR0cmlidXRlc1dpdGhWYWx1ZXMpIHsKICAgICAgICB2YXIgdmFsdWVzID0gYXR0cmlidXRlc1dpdGhWYWx1ZXMubWFwKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICByZXR1cm4gYS5tYXRjaCgvIiguKj8pIi9nKVswXS5yZXBsYWNlKC8iL2csICcnKTsKICAgICAgICB9KTsKICAgICAgICB2YXIgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNXaXRoVmFsdWVzLm1hcChmdW5jdGlvbiAoYSkgewogICAgICAgICAgcmV0dXJuIGEubWF0Y2goL1tePV0qL2kpWzBdOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBhdHRyaWJ1dGVzLnJlZHVjZShmdW5jdGlvbiAoYXR0cmlidXRlLCBrZXksIGkpIHsKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHt9LCBhdHRyaWJ1dGUsIF9kZWZpbmVQcm9wZXJ0eSh7fSwga2V5LCB2YWx1ZXNbaV0pKTsKICAgICAgICB9LCB7fSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB7fTsKICAgIH0sCiAgICByZWdpc3RlclZpZXdwb3J0T2JzZXJ2ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyVmlld3BvcnRPYnNlcnZlcigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLnNvcnRlZFNjcmVlbnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgICB2YXIgX3JlZjYgPSBfc2xpY2VkVG9BcnJheShfcmVmNSwgMiksCiAgICAgICAgICAgIHZpZXdwb3J0ID0gX3JlZjZbMF0sCiAgICAgICAgICAgIG1pbldpZHRoID0gX3JlZjZbMV07CgogICAgICAgIHZhciBtZWRpYVF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoIihtaW4td2lkdGg6ICIuY29uY2F0KG1pbldpZHRoLCAiKSIpKTsKCiAgICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gbGlzdGVuZXIoZXZlbnQpIHsKICAgICAgICAgIGlmIChldmVudC5tYXRjaGVzKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczUuJHN0b3JlLmRpc3BhdGNoKFNFVFRJTkdTX1NFVF9DVVJSRU5UX1ZJRVdQT1JULCB2aWV3cG9ydCk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIG1hdGNoaW5nVmlld3BvcnRzID0gX3RoaXM1LnNvcnRlZFNjcmVlbnMgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW4KICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKF9yZWY3KSB7CiAgICAgICAgICAgIHZhciBfcmVmOCA9IF9zbGljZWRUb0FycmF5KF9yZWY3LCAyKSwKICAgICAgICAgICAgICAgIG1hdGNoaW5nTWluV2lkdGggPSBfcmVmOFsxXTsKCiAgICAgICAgICAgIHJldHVybiBwYXJzZUludChtaW5XaWR0aCwgMTApID4gcGFyc2VJbnQobWF0Y2hpbmdNaW5XaWR0aCwgMTApOwogICAgICAgICAgfSkubWFwKGZ1bmN0aW9uIChfcmVmOSkgewogICAgICAgICAgICB2YXIgX3JlZjEwID0gX3NsaWNlZFRvQXJyYXkoX3JlZjksIDEpLAogICAgICAgICAgICAgICAgbWF0Y2hpbmdWaWV3cG9ydCA9IF9yZWYxMFswXTsKCiAgICAgICAgICAgIHJldHVybiBtYXRjaGluZ1ZpZXdwb3J0OwogICAgICAgICAgfSk7CgogICAgICAgICAgdmFyIGN1cnJlbnRWaWV3cG9ydCA9IG1hdGNoaW5nVmlld3BvcnRzLmxlbmd0aCA+IDAgPyBsYXN0KG1hdGNoaW5nVmlld3BvcnRzKSA6ICdtb2JpbGUnOwogICAgICAgICAgcmV0dXJuIF90aGlzNS4kc3RvcmUuZGlzcGF0Y2goU0VUVElOR1NfU0VUX0NVUlJFTlRfVklFV1BPUlQsIGN1cnJlbnRWaWV3cG9ydCk7CiAgICAgICAgfTsKCiAgICAgICAgbWVkaWFRdWVyeS5hZGRMaXN0ZW5lcihsaXN0ZW5lcik7CgogICAgICAgIF90aGlzNS4kb25jZSgnaG9vazpkZXN0cm95ZWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBtZWRpYVF1ZXJ5LnJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG1lZGlhUXVlcnkubWF0Y2hlcykgewogICAgICAgICAgX3RoaXM1LiRzdG9yZS5kaXNwYXRjaChTRVRUSU5HU19TRVRfQ1VSUkVOVF9WSUVXUE9SVCwgdmlld3BvcnQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0aWFsaXplU3RhdGUoKTsKICAgIHRoaXMuaW5pdGlhbGl6ZUNvZGVTbmlwcGV0cygpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMucmVnaXN0ZXJWaWV3cG9ydE9ic2VydmVyKCk7CiAgfQp9Ow=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    id=\"app\"\n    class=\"flex flex-col font-display text-gray-900\"\n    :class=\"themeClass\"\n  >\n    <apo-header />\n    <apo-page-progress class=\"page-progress\" />\n\n    <vue-page-transition name=\"fade-in-up\">\n      <apo-pharmacy-confirmation-modal v-if=\"isAuthenticated && showUpdatePharmacyModal\" />\n    </vue-page-transition>\n    <vue-page-transition name=\"fade-in-up\">\n      <apo-stage\n        v-if=\"stageData && isAuthenticated\"\n        :stage-data=\"stageData\"\n      />\n    </vue-page-transition>\n\n    <main class=\"flex-auto\">\n      <vue-page-transition name=\"fade-in-up\">\n        <router-view />\n      </vue-page-transition>\n      <apo-cookies-settings v-if=\"language !== 'en'\" />\n    </main>\n\n    <apo-footer />\n  </div>\n</template>\n\n<script>\n\nimport last from 'lodash/last';\nimport { mapGetters, mapState } from 'vuex';\nimport Header from '@/components/template/Header.vue';\nimport Stage from '@/components/template/Stage.vue';\nimport Footer from '@/components/template/Footer.vue';\nimport CookiesSettings from '@/components/template/CookiesSettings.vue';\nimport PharmacyConfirmationModal from '@/components/pharmacies/PharmacyConfirmationModal.vue';\nimport PageProgress from '@/components/template/PageProgress.vue';\nimport PageService from '@/services/api/PageService';\nimport {\n  PAGES_FETCH_MENUS,\n  SETTINGS_FETCH_SETTINGS,\n  SETTINGS_SET_CURRENT_VIEWPORT,\n} from '@/store/types/action-types';\n\nconst screens = require('./tailwind/Screens');\n\nexport default {\n  components: {\n    'apo-footer': Footer,\n    'apo-stage': Stage,\n    'apo-header': Header,\n    'apo-page-progress': PageProgress,\n    'apo-cookies-settings': CookiesSettings,\n    'apo-pharmacy-confirmation-modal': PharmacyConfirmationModal,\n  },\n  data() {\n    return {\n      stageData: '',\n    };\n  },\n\n  computed: {\n    ...mapGetters(['isAuthenticated', 'theme', 'settingsLoaded', 'language', 'showUpdatePharmacyModal']),\n    ...mapState({\n      settings: state => state.settings.settings,\n    }),\n\n    themeClass() {\n      return `theme-${this.theme}`;\n    },\n\n    sortedScreens() {\n      return Object.entries(screens)\n        .sort(([, minWidthA], [, minWidthB]) => {\n          const a = parseInt(minWidthA, 10);\n          const b = parseInt(minWidthB, 10);\n\n          if (a > b) {\n            return 1;\n          }\n\n          if (a < b) {\n            return -1;\n          }\n\n          return 0;\n        });\n    },\n  },\n\n  watch: {\n    isAuthenticated: {\n      immediate: true,\n      handler(isAuthenticated) {\n        if (isAuthenticated) {\n          window.eventBus.$emit('authenticated');\n        }\n      },\n    },\n    settingsLoaded: {\n      immediate: true,\n      handler(settingsLoaded) {\n        if (settingsLoaded) {\n          window.eventBus.$emit('settingsLoaded');\n        }\n      },\n    },\n\n    language: {\n      immediate: true,\n      handler(language) {\n        let docLang = language;\n        if (language === 'at') { docLang = 'de'; }\n        document.documentElement.lang = docLang;\n      },\n    },\n\n    $route: {\n      immediate: true,\n      handler(route) {\n        if (this.isAuthenticated) {\n          this.stageData = '';\n          this.loadStage(route);\n        }\n      },\n    },\n  },\n\n  methods: {\n    initializeState() {\n      this.$store.dispatch(SETTINGS_FETCH_SETTINGS);\n      this.$store.dispatch(PAGES_FETCH_MENUS);\n      if (this.isAuthenticated) {\n        this.$Progress.start();\n        this.$Progress.set(30);\n        PageService.getPages()\n          .then(data => {\n            this.$store.commit('addPageContent', data);\n            const tmpData = data.filter(page => page.acf.slides);\n            tmpData.forEach(page => {\n              this.$store.commit('addStage', { name: page.slug, stage: { minimum_height: page.acf.minimum_height, slides: page.acf.slides } });\n            });\n            this.$Progress.finish();\n            this.loadStage(this.$route);\n          });\n      }\n    },\n\n    loadStage(route) {\n      const storedData = this.$store.state.pages.stages.filter(stage => stage.name === route.path.replace(/\\//g, '')).length === 1 ? this.$store.state.pages.stages.filter(stage => stage.name === route.path.replace(/\\//g, ''))[0].stage : '';\n      if (storedData) {\n        window.setTimeout(() => {\n          this.stageData = storedData;\n        }, 100);\n      }\n    },\n\n    initializeCodeSnippets() {\n      const unwatch = this.$watch('settings', settings => {\n        unwatch();\n\n        this.evaluateCodeSnippets(settings.headCodeSnippets, 'head');\n        this.evaluateCodeSnippets(settings.bodyCodeSnippets, 'body');\n      });\n    },\n\n    evaluateCodeSnippets(snippets, wrappingElement) {\n      this.cleanSnippets(snippets).forEach(codeSnippet => {\n        const attributes = this.extractAttributes(codeSnippet);\n        const scriptTag = document.createElement('script');\n        let fn = null;\n\n        Object.keys(attributes).forEach(key => {\n          if (key === 'onload') {\n            fn = attributes[key];\n          }\n          scriptTag.setAttribute(key, attributes[key]);\n        });\n\n        if (!scriptTag.hasAttribute('type')) {\n          scriptTag.type = 'text/javascript';\n        }\n\n        const strippedCodeSnippet = codeSnippet.replace(/<script[^>]*>/im, '');\n\n        scriptTag.text = strippedCodeSnippet;\n\n        this.loadAsync(scriptTag, wrappingElement)\n          .then(() => {\n            if (fn) {\n              try {\n              // eslint-disable-next-line no-eval\n                eval(fn);\n              } catch (e) {\n                console.log(e);\n              }\n            }\n          });\n      });\n    },\n\n    loadAsync(script, wrappingElement) {\n      return new Promise(resolve => {\n        document.getElementsByTagName(wrappingElement)[0].appendChild(script);\n\n        script.addEventListener('load', () => {\n          // this timeout is required to execute correctly all onload functions\n          // this isn't a great solution but its not so common to add onload attributes\n          // and a good workaround\n          setTimeout(() => {\n            resolve(true);\n          }, 350);\n        });\n      });\n    },\n\n    cleanSnippets(snippets) {\n      return snippets\n        .split(/<\\/script>/im)\n        .map(snippet => snippet.replace(/<!--(.*?)-->/im, ''))\n        .map(snippet => snippet.trim())\n        .filter(snippet => snippet.length > 0);\n    },\n\n    extractAttributes(snippet) {\n      const attributesWithValues = snippet.match(/(\\S*)=\"(.*?)\"/g);\n      if (attributesWithValues) {\n        const values = attributesWithValues.map(a => a.match(/\"(.*?)\"/g)[0].replace(/\"/g, ''));\n        const attributes = attributesWithValues.map(a => a.match(/[^=]*/i)[0]);\n        return attributes.reduce((attribute, key, i) => ({ ...attribute, [key]: values[i] }), {});\n      }\n\n      return {};\n    },\n\n    registerViewportObserver() {\n      this.sortedScreens.forEach(([viewport, minWidth]) => {\n        const mediaQuery = window.matchMedia(`(min-width: ${minWidth})`);\n\n        const listener = event => {\n          if (event.matches) {\n            return this.$store.dispatch(SETTINGS_SET_CURRENT_VIEWPORT, viewport);\n          }\n\n          const matchingViewports = this.sortedScreens\n            // eslint-disable-next-line max-len\n            .filter(([, matchingMinWidth]) => parseInt(minWidth, 10) > parseInt(matchingMinWidth, 10))\n            .map(([matchingViewport]) => matchingViewport);\n\n          const currentViewport = matchingViewports.length > 0\n            ? last(matchingViewports)\n            : 'mobile';\n\n          return this.$store.dispatch(SETTINGS_SET_CURRENT_VIEWPORT, currentViewport);\n        };\n\n        mediaQuery.addListener(listener);\n\n        this.$once('hook:destroyed', () => {\n          mediaQuery.removeListener(listener);\n        });\n\n        if (mediaQuery.matches) {\n          this.$store.dispatch(SETTINGS_SET_CURRENT_VIEWPORT, viewport);\n        }\n      });\n    },\n  },\n\n  created() {\n    this.initializeState();\n    this.initializeCodeSnippets();\n  },\n\n  mounted() {\n    this.registerViewportObserver();\n  },\n};\n\n</script>\n\n<style lang=\"scss\">\n*::selection{\n  @apply bg-purple-500;\n  @apply text-white;\n}\n\nhtml,\nbody,\n#app {\n  min-height: 100vh;\n}\n\nbody {\n  @apply bg-white;\n}\n\n.page-progress {\n  margin-top: calc(theme('spacing.px') * -2);\n}\n\n.text-media-paragraph__copy {\n  a {\n    text-decoration: underline;\n  }\n}\n\n@media (min-width: theme('screens.desktop')) {\n  .spacer-module {\n    padding: 3.125rem 0 !important;\n\n    .text-media-paragraph__copy {\n      margin-top: 0 !important;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src"}]}