{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/pharmacies/PharmacyConfirmationModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/pharmacies/PharmacyConfirmationModal.vue","mtime":1683275992562},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmZpbmFsbHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IE1vZGFsIGZyb20gJ0AvY29tcG9uZW50cy91aS9Nb2RhbC52dWUnOwppbXBvcnQgUGhhcm1hY2llc0Z1enp5U2VhcmNoIGZyb20gJ0AvY29tcG9uZW50cy9mb3JtLXJlbmRlcmVyL1BoYXJtYWNpZXNGdXp6eVNlYXJjaC52dWUnOwppbXBvcnQgQ29uZmlybVBoYXJtYWN5U2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2FwaS9Db25maXJtUGhhcm1hY3lTZXJ2aWNlJzsKaW1wb3J0IExhbmd1YWdlU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL3NldHRpbmdzL0xhbmd1YWdlU2VydmljZSc7CmltcG9ydCB7IEFVVEhfVVBEQVRFX1NIT1dfVVBEQVRFX1BIQVJNQUNZX01PREFMIH0gZnJvbSAnQC9zdG9yZS90eXBlcy9tdXRhdGlvbi10eXBlcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGhhcm1hY3lDb25maXJtYXRpb25Nb2RhbCcsCiAgY29tcG9uZW50czogewogICAgJ2Fwby1tb2RhbCc6IE1vZGFsLAogICAgJ2Fwby1waGFybWFjaWVzLWZ1enp5LXNlYXJjaCc6IFBoYXJtYWNpZXNGdXp6eVNlYXJjaAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzQnVzeTogZmFsc2UsCiAgICAgIGlzQ29uZmlybWluZzogZmFsc2UsCiAgICAgIHNob3dFcnJvck1lc3NhZ2U6IGZhbHNlLAogICAgICBwaGFybWFjeTogbnVsbCwKICAgICAgc2VsZWN0ZWRQaGFybWFjeTogbnVsbAogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSh7CiAgICBmaXJzdE5hbWU6IGZ1bmN0aW9uIGZpcnN0TmFtZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYXV0aC51c2VyLmZpcnN0TmFtZTsKICAgIH0KICB9KSksCiAgbWV0aG9kczogewogICAgb25TZWxlY3Q6IGZ1bmN0aW9uIG9uU2VsZWN0KHBoYXJtYWN5KSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRQaGFybWFjeSA9IHsKICAgICAgICBwaGFybWFjeU5hbWU6IHBoYXJtYWN5Lm5hbWUsCiAgICAgICAgcGhhcm1hY3lTdHJlZXQ6IHBoYXJtYWN5LnN0cmVldCwKICAgICAgICBwaGFybWFjeVN0cmVldE5vOiBwaGFybWFjeS5udW1iZXIsCiAgICAgICAgcGhhcm1hY3laaXBDb2RlOiBwaGFybWFjeS56aXAsCiAgICAgICAgcGhhcm1hY3lDaXR5OiBwaGFybWFjeS5jaXR5CiAgICAgIH07CiAgICB9LAogICAgcmVtb3ZlU2VsZWN0ZWRQaGFybWFjeTogZnVuY3Rpb24gcmVtb3ZlU2VsZWN0ZWRQaGFybWFjeSgpIHsKICAgICAgdGhpcy5zZWxlY3RlZFBoYXJtYWN5ID0gbnVsbDsKICAgIH0sCiAgICBvbkNvbmZpcm06IGZ1bmN0aW9uIG9uQ29uZmlybSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuc2hvd0Vycm9yTWVzc2FnZSA9IGZhbHNlOwogICAgICB0aGlzLmlzQ29uZmlybWluZyA9IHRydWU7CiAgICAgIENvbmZpcm1QaGFybWFjeVNlcnZpY2Uuc3RvcmUoewogICAgICAgIG5hbWU6IHRoaXMuc2VsZWN0ZWRQaGFybWFjeS5waGFybWFjeU5hbWUsCiAgICAgICAgc3RyZWV0OiB0aGlzLnNlbGVjdGVkUGhhcm1hY3kucGhhcm1hY3lTdHJlZXQsCiAgICAgICAgbnVtYmVyOiB0aGlzLnNlbGVjdGVkUGhhcm1hY3kucGhhcm1hY3lTdHJlZXRObywKICAgICAgICB6aXA6IHRoaXMuc2VsZWN0ZWRQaGFybWFjeS5waGFybWFjeVppcENvZGUsCiAgICAgICAgY2l0eTogdGhpcy5zZWxlY3RlZFBoYXJtYWN5LnBoYXJtYWN5Q2l0eSwKICAgICAgICBjb3VudHJ5OiBMYW5ndWFnZVNlcnZpY2UucmVzb2x2ZUNvdW50cnkoKQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5pc0NvbmZpcm1pbmcgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMuJHN0b3JlLmNvbW1pdChBVVRIX1VQREFURV9TSE9XX1VQREFURV9QSEFSTUFDWV9NT0RBTCwgZmFsc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICBfdGhpcy5zaG93RXJyb3JNZXNzYWdlID0gdHJ1ZTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuaXNDb25maXJtaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHRoaXMuaXNCdXN5ID0gdHJ1ZTsKICAgIENvbmZpcm1QaGFybWFjeVNlcnZpY2UuZmV0Y2goKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIF90aGlzMi5waGFybWFjeSA9IF9vYmplY3RTcHJlYWQoe30sIGRhdGEucGhhcm1hY3kpOwogICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcikuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMi5pc0J1c3kgPSBmYWxzZTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["PharmacyConfirmationModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA,SAAA,QAAA,QAAA,MAAA;AACA,OAAA,KAAA,MAAA,2BAAA;AACA,OAAA,qBAAA,MAAA,sDAAA;AACA,OAAA,sBAAA,MAAA,uCAAA;AACA,OAAA,eAAA,MAAA,qCAAA;AACA,SAAA,sCAAA,QAAA,8BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,2BADA;AAGA,EAAA,UAAA,EAAA;AACA,iBAAA,KADA;AAEA,mCAAA;AAFA,GAHA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,YAAA,EAAA,KAFA;AAGA,MAAA,gBAAA,EAAA,KAHA;AAIA,MAAA,QAAA,EAAA,IAJA;AAKA,MAAA,gBAAA,EAAA;AALA,KAAA;AAOA,GAhBA;AAkBA,EAAA,QAAA,oBACA,QAAA,CAAA;AACA,IAAA,SAAA,EAAA,mBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA;AAAA;AADA,GAAA,CADA,CAlBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,QADA,EACA;AACA,WAAA,gBAAA,GAAA;AACA,QAAA,YAAA,EAAA,QAAA,CAAA,IADA;AAEA,QAAA,cAAA,EAAA,QAAA,CAAA,MAFA;AAGA,QAAA,gBAAA,EAAA,QAAA,CAAA,MAHA;AAIA,QAAA,eAAA,EAAA,QAAA,CAAA,GAJA;AAKA,QAAA,YAAA,EAAA,QAAA,CAAA;AALA,OAAA;AAOA,KATA;AAUA,IAAA,sBAVA,oCAUA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,KAZA;AAaA,IAAA,SAbA,uBAaA;AAAA;;AACA,WAAA,gBAAA,GAAA,KAAA;AACA,WAAA,YAAA,GAAA,IAAA;AACA,MAAA,sBAAA,CAAA,KAAA,CAAA;AACA,QAAA,IAAA,EAAA,KAAA,gBAAA,CAAA,YADA;AAEA,QAAA,MAAA,EAAA,KAAA,gBAAA,CAAA,cAFA;AAGA,QAAA,MAAA,EAAA,KAAA,gBAAA,CAAA,gBAHA;AAIA,QAAA,GAAA,EAAA,KAAA,gBAAA,CAAA,eAJA;AAKA,QAAA,IAAA,EAAA,KAAA,gBAAA,CAAA,YALA;AAMA,QAAA,OAAA,EAAA,eAAA,CAAA,cAAA;AANA,OAAA,EAQA,IARA,CAQA,YAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,sCAAA,EAAA,KAAA;AACA,OAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,KAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,IAAA;AACA,OAfA,EAgBA,OAhBA,CAgBA,YAAA;AAAA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AAAA,OAhBA;AAiBA;AAjCA,GAxBA;AA4DA,EAAA,OA5DA,qBA4DA;AAAA;;AACA,SAAA,MAAA,GAAA,IAAA;AACA,IAAA,sBAAA,CAAA,KAAA,GACA,IADA,CACA,UAAA,IAAA,EAAA;AACA,MAAA,MAAA,CAAA,QAAA,qBAAA,IAAA,CAAA,QAAA;AACA,KAHA,EAIA,KAJA,CAIA,OAAA,CAAA,KAJA,EAKA,OALA,CAKA,YAAA;AAAA,MAAA,MAAA,CAAA,MAAA,GAAA,KAAA;AAAA,KALA;AAMA;AApEA,CAAA","sourcesContent":["<template>\n  <apo-modal>\n    <template\n      v-if=\"!isBusy\"\n      #header\n    >\n      <h3>Hallo {{ firstName }}!</h3>\n      <h5>Wir möchten dich bitten die Adresse deiner Apotheke nochmals zu bestätigen.</h5>\n    </template>\n    <apo-spinner\n      v-if=\"isBusy\"\n      size=\"large\"\n    />\n    <div v-else>\n      <div class=\"mb-10 text-gray-800\">\n        <h4>\n          Deine aktuelle Apotheke\n        </h4>\n        <ul>\n          <li>{{ pharmacy.pharmacyName || '' }}</li>\n          <li>{{ pharmacy.pharmacyStreet || '' }} {{ pharmacy.pharmacyStreetNo || '' }}</li>\n          <li>{{ pharmacy.pharmacyZipCode || '' }} {{ pharmacy.pharmacyCity || '' }}</li>\n        </ul>\n      </div>\n\n      <div>\n        <div\n          v-if=\"selectedPharmacy\"\n          class=\"px-4 py-4 mt-4 -ml-6 -mr-6 bg-blue-100 tablet:text-center\"\n        >\n          <div class=\"mr-2 text-right\">\n            <button\n              class=\"p-2\"\n              type=\"button\"\n              :title=\"$t('general.remove')\"\n              :disabled=\"isConfirming\"\n              @click=\"removeSelectedPharmacy\"\n            >\n              <apo-icon\n                class=\"w-4 tablet:w-6\"\n                src=\"close\"\n              />\n            </button>\n          </div>\n          <div class=\"flex flex-wrap\">\n            <div\n              v-for=\"(value, key) in selectedPharmacy\"\n              :key=\"key\"\n              class=\"flex flex-col w-full my-4 tablet:px-4 tablet:w-1/3\"\n            >\n              <span\n                class=\"inline-block font-bold text-gray-900\"\n                v-text=\"$t(`modules.pharmacySummary.form.${key}`)\"\n              />\n              <span\n                class=\"inline-block mt-2 text-gray-800\"\n                v-html=\"$options.filters.formatContent(value)\"\n              />\n            </div>\n          </div>\n        </div>\n        <apo-pharmacies-fuzzy-search\n          v-else\n          @selected=\"onSelect\"\n        >\n          <div class=\"flex flex-col mt-2 tablet:flex-row\">\n            <span class=\"text-gray-900 tablet:mr-2\">{{ $t('general.lookingForPharmacy') }} </span>\n            <router-link\n              :to=\"{name: 'contact'}\"\n              class=\"text-gray-800 underline\"\n            >\n              {{ $t('general.getInTouch') }}\n            </router-link>\n          </div>\n          <div\n            class=\"w-full mt-4\"\n            v-html=\"$t('general.fuzzySearch.hint')\"\n          />\n        </apo-pharmacies-fuzzy-search>\n      </div>\n\n      <div class=\"flex flex-col mt-16 text-right\">\n        <apo-button\n          class=\"button button--primary button--small\"\n          :disabled=\"selectedPharmacy === null || isConfirming\"\n          @click.native=\"onConfirm\"\n        >\n          <apo-spinner\n            v-if=\"isConfirming\"\n            class=\"mr-4\"\n            size=\"small\"\n          />\n\n          <span v-text=\"'Bestätigen'\" />\n        </apo-button>\n        <small\n          v-if=\"showErrorMessage\"\n          class=\"mt-2 text-xs font-bold text-red-500\"\n          v-text=\"'Oops, da ist etwas schief gelaufen. Bitte versuche es erneut oder kontatkiere unseren Support.'\"\n        />\n      </div>\n    </div>\n  </apo-modal>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport Modal from '@/components/ui/Modal.vue';\nimport PharmaciesFuzzySearch from '@/components/form-renderer/PharmaciesFuzzySearch.vue';\nimport ConfirmPharmacyService from '@/services/api/ConfirmPharmacyService';\nimport LanguageService from '@/services/settings/LanguageService';\nimport { AUTH_UPDATE_SHOW_UPDATE_PHARMACY_MODAL } from '@/store/types/mutation-types';\n\nexport default {\n  name: 'PharmacyConfirmationModal',\n\n  components: {\n    'apo-modal': Modal,\n    'apo-pharmacies-fuzzy-search': PharmaciesFuzzySearch,\n  },\n\n  data() {\n    return {\n      isBusy: false,\n      isConfirming: false,\n      showErrorMessage: false,\n      pharmacy: null,\n      selectedPharmacy: null,\n    };\n  },\n\n  computed: {\n    ...mapState({\n      firstName: state => state.auth.user.firstName,\n    }),\n  },\n\n  methods: {\n    onSelect(pharmacy) {\n      this.selectedPharmacy = {\n        pharmacyName: pharmacy.name,\n        pharmacyStreet: pharmacy.street,\n        pharmacyStreetNo: pharmacy.number,\n        pharmacyZipCode: pharmacy.zip,\n        pharmacyCity: pharmacy.city,\n      };\n    },\n    removeSelectedPharmacy() {\n      this.selectedPharmacy = null;\n    },\n    onConfirm() {\n      this.showErrorMessage = false;\n      this.isConfirming = true;\n      ConfirmPharmacyService.store({\n        name: this.selectedPharmacy.pharmacyName,\n        street: this.selectedPharmacy.pharmacyStreet,\n        number: this.selectedPharmacy.pharmacyStreetNo,\n        zip: this.selectedPharmacy.pharmacyZipCode,\n        city: this.selectedPharmacy.pharmacyCity,\n        country: LanguageService.resolveCountry(),\n      })\n        .then(() => {\n          this.isConfirming = false;\n          this.$store.commit(AUTH_UPDATE_SHOW_UPDATE_PHARMACY_MODAL, false);\n        })\n        .catch(error => {\n          console.error(error);\n          this.showErrorMessage = true;\n        })\n        .finally(() => { this.isConfirming = false; });\n    },\n  },\n\n  created() {\n    this.isBusy = true;\n    ConfirmPharmacyService.fetch()\n      .then(data => {\n        this.pharmacy = { ...data.pharmacy };\n      })\n      .catch(console.error)\n      .finally(() => { this.isBusy = false; });\n  },\n};\n\n</script>\n"],"sourceRoot":"src/components/pharmacies"}]}