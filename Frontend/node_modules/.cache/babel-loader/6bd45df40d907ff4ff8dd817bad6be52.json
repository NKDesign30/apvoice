{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/content/selection/Selection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/content/selection/Selection.vue","mtime":1683275992555},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB0cmFuc2Zvcm0gZnJvbSAnbG9kYXNoL3RyYW5zZm9ybSc7CmltcG9ydCBTZWxlY3Rpb25Db3B5UXVlc3Rpb24gZnJvbSAnQC9jb21wb25lbnRzL2NvbnRlbnQvc2VsZWN0aW9uL1NlbGVjdGlvbkNvcHlRdWVzdGlvbi52dWUnOwppbXBvcnQgU2VsZWN0aW9uSW1hZ2VRdWVzdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvY29udGVudC9zZWxlY3Rpb24vU2VsZWN0aW9uSW1hZ2VRdWVzdGlvbi52dWUnOwppbXBvcnQgU2VsZWN0aW9uUHJvZ3Jlc3MgZnJvbSAnQC9jb21wb25lbnRzL2NvbnRlbnQvc2VsZWN0aW9uL1NlbGVjdGlvblByb2dyZXNzLnZ1ZSc7CmltcG9ydCBTZWxlY3Rpb25SZXN1bHQgZnJvbSAnQC9jb21wb25lbnRzL2NvbnRlbnQvc2VsZWN0aW9uL1NlbGVjdGlvblJlc3VsdC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgJ2Fwby1zZWxlY3Rpb24tY29weS1xdWVzdGlvbic6IFNlbGVjdGlvbkNvcHlRdWVzdGlvbiwKICAgICdhcG8tc2VsZWN0aW9uLWltYWdlLXF1ZXN0aW9uJzogU2VsZWN0aW9uSW1hZ2VRdWVzdGlvbiwKICAgICdhcG8tc2VsZWN0aW9uLXByb2dyZXNzJzogU2VsZWN0aW9uUHJvZ3Jlc3MsCiAgICAnYXBvLXNlbGVjdGlvbi1yZXN1bHQnOiBTZWxlY3Rpb25SZXN1bHQKICB9LAogIHByb3BzOiB7CiAgICBzZWxlY3Rpb25faXRlbXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIHJlc3VsdF9wYWdlOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgQm9vbGVhbl0sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRRdWVzdGlvbkluZGV4OiAwLAogICAgICByZXN1bHQ6IHt9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHF1ZXN0aW9uczogZnVuY3Rpb24gcXVlc3Rpb25zKCkgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25faXRlbXM7CiAgICB9LAogICAgcmVzdWx0UGFnZUNvbnRlbnQ6IGZ1bmN0aW9uIHJlc3VsdFBhZ2VDb250ZW50KCkgewogICAgICByZXR1cm4gdGhpcy5yZXN1bHRfcGFnZSB8fCBbXTsKICAgIH0sCiAgICBjdXJyZW50UXVlc3Rpb246IGZ1bmN0aW9uIGN1cnJlbnRRdWVzdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25zW3RoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXhdOwogICAgfSwKICAgIGlzQ3VycmVudFF1ZXN0aW9uQW5zd2VyZWQ6IGZ1bmN0aW9uIGlzQ3VycmVudFF1ZXN0aW9uQW5zd2VyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnJlc3VsdFt0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4XSAmJiB0aGlzLnJlc3VsdFt0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4XS5hbnN3ZXIgJiYgT2JqZWN0LmtleXModGhpcy5yZXN1bHRbdGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleF0uYW5zd2VyKS5sZW5ndGggPiAwOwogICAgfSwKICAgIGhhc011bHRpcGxlUXVlc3Rpb25zOiBmdW5jdGlvbiBoYXNNdWx0aXBsZVF1ZXN0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25zLmxlbmd0aCA+IDE7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VsZWN0aW9uX2l0ZW1zOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMuY3JlYXRlUmVzdWx0KCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc29sdmVRdWVzdGlvbkNvbXBvbmVudE5hbWU6IGZ1bmN0aW9uIHJlc29sdmVRdWVzdGlvbkNvbXBvbmVudE5hbWUocXVlc3Rpb24pIHsKICAgICAgcmV0dXJuICJhcG8tc2VsZWN0aW9uLSIuY29uY2F0KHF1ZXN0aW9uLmFjZl9mY19sYXlvdXQucmVwbGFjZSgvXysvZywgJy0nKSk7CiAgICB9LAogICAgY3JlYXRlUmVzdWx0OiBmdW5jdGlvbiBjcmVhdGVSZXN1bHQoKSB7CiAgICAgIHRoaXMucmVzdWx0ID0gdHJhbnNmb3JtKHRoaXMucXVlc3Rpb25zLCBmdW5jdGlvbiAocmVzdWx0LCBxdWVzdGlvbiwgaW5kZXgpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgICAgICByZXN1bHRbaW5kZXhdID0gewogICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLnF1ZXN0aW9uLAogICAgICAgICAgYW5zd2VyOiB7fQogICAgICAgIH07CiAgICAgIH0sIHt9KTsKICAgIH0sCiAgICBvbkJhY2s6IGZ1bmN0aW9uIG9uQmFjaygpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXggPiAwKSB7CiAgICAgICAgdGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleCAtPSAxOwogICAgICB9CiAgICB9LAogICAgb25OZXh0OiBmdW5jdGlvbiBvbk5leHQoKSB7CiAgICAgIGlmICh0aGlzLm5leHRUaW1lcikgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm5leHRUaW1lcik7CiAgICAgICAgdGhpcy5uZXh0VGltZXIgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoIXRoaXMucmVzdWx0W3RoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXhdLmFuc3dlcikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleCArPSAxOwogICAgfSwKICAgIG9uQW5zd2VyZWQ6IGZ1bmN0aW9uIG9uQW5zd2VyZWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5uZXh0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIub25OZXh0KCk7CiAgICAgIH0sIDMwMDApOwogICAgfSwKICAgIG9uUmVzdGFydDogZnVuY3Rpb24gb25SZXN0YXJ0KCkgewogICAgICB0aGlzLmNyZWF0ZVJlc3VsdCgpOwogICAgICB0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4ID0gMDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Selection.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"selection\">\n    <template v-if=\"currentQuestionIndex <= questions.length - 1\">\n      <transition\n        name=\"fade\"\n        mode=\"out-in\"\n      >\n        <component\n          :is=\"resolveQuestionComponentName(currentQuestion)\"\n          v-if=\"Object.keys(result).length > 0\"\n          :key=\"`question-${currentQuestionIndex}`\"\n          v-model=\"result[currentQuestionIndex]\"\n          :answer-a=\"currentQuestion.answer_a\"\n          :answer-b=\"currentQuestion.answer_b\"\n          class=\"container\"\n          :is-disabled=\"isCurrentQuestionAnswered\"\n          :question=\"currentQuestion.question\"\n          @answered=\"onAnswered\"\n        />\n      </transition>\n\n      <apo-selection-progress\n        v-if=\"hasMultipleQuestions\"\n        class=\"mt-10 desktop:mt-13\"\n        :current=\"currentQuestionIndex + 1\"\n        :is-current-question-answered=\"isCurrentQuestionAnswered\"\n        :total=\"questions.length\"\n        @back=\"onBack\"\n        @next=\"onNext\"\n      />\n    </template>\n    <apo-selection-result\n      v-else\n      :result=\"result\"\n      :content=\"resultPageContent\"\n      @restart=\"onRestart\"\n    />\n  </div>\n</template>\n\n<script>\n\nimport transform from 'lodash/transform';\nimport SelectionCopyQuestion from '@/components/content/selection/SelectionCopyQuestion.vue';\nimport SelectionImageQuestion from '@/components/content/selection/SelectionImageQuestion.vue';\nimport SelectionProgress from '@/components/content/selection/SelectionProgress.vue';\nimport SelectionResult from '@/components/content/selection/SelectionResult.vue';\n\nexport default {\n  components: {\n    'apo-selection-copy-question': SelectionCopyQuestion,\n    'apo-selection-image-question': SelectionImageQuestion,\n    'apo-selection-progress': SelectionProgress,\n    'apo-selection-result': SelectionResult,\n  },\n\n  props: {\n    selection_items: {\n      type: Array,\n      default: () => [],\n    },\n\n    result_page: {\n      type: [Array, Boolean],\n      default: () => [],\n    },\n  },\n\n  data() {\n    return {\n      currentQuestionIndex: 0,\n      result: {},\n    };\n  },\n\n  computed: {\n    questions() {\n      return this.selection_items;\n    },\n\n    resultPageContent() {\n      return this.result_page || [];\n    },\n\n    currentQuestion() {\n      return this.questions[this.currentQuestionIndex];\n    },\n\n    isCurrentQuestionAnswered() {\n      return this.result[this.currentQuestionIndex]\n        && this.result[this.currentQuestionIndex].answer\n        && Object.keys(this.result[this.currentQuestionIndex].answer).length > 0;\n    },\n\n    hasMultipleQuestions() {\n      return this.questions.length > 1;\n    },\n  },\n\n  watch: {\n    selection_items: {\n      immediate: true,\n      handler() {\n        this.$nextTick(() => this.createResult());\n      },\n    },\n  },\n\n  methods: {\n    resolveQuestionComponentName(question) {\n      return `apo-selection-${question.acf_fc_layout.replace(/_+/g, '-')}`;\n    },\n\n    createResult() {\n      this.result = transform(this.questions, (result, question, index) => {\n        // eslint-disable-next-line no-param-reassign\n        result[index] = {\n          question: question.question,\n          answer: {},\n        };\n      }, {});\n    },\n\n    onBack() {\n      if (this.currentQuestionIndex > 0) {\n        this.currentQuestionIndex -= 1;\n      }\n    },\n\n    onNext() {\n      if (this.nextTimer) {\n        clearTimeout(this.nextTimer);\n        this.nextTimer = null;\n      }\n\n      if (!this.result[this.currentQuestionIndex].answer) {\n        return;\n      }\n\n      this.currentQuestionIndex += 1;\n    },\n\n    onAnswered() {\n      this.nextTimer = setTimeout(() => {\n        this.onNext();\n      }, 3000);\n    },\n\n    onRestart() {\n      this.createResult();\n      this.currentQuestionIndex = 0;\n    },\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.fade {\n  &-enter-active,\n  &-leave-active {\n    transition: opacity 0.3s ease;\n  }\n\n  &-enter,\n  &-leave-to {\n    opacity: 0;\n  }\n}\n\n</style>\n"],"sourceRoot":"src/components/content/selection"}]}