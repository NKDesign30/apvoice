{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/eslint-loader/index.js??ref--13-0!/app/src/mixins/download-certificate.js","dependencies":[{"path":"/app/src/mixins/download-certificate.js","mtime":1683275992572},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwiOwpleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCkgewogIHJldHVybiB7CiAgICBtZXRob2RzOiB7CiAgICAgIGRvd25sb2FkOiBmdW5jdGlvbiBkb3dubG9hZCh0cmFpbmluZykgewogICAgICAgIGNvbnNvbGUubG9nKCdkb3dubG9hZCcsIHRyYWluaW5nKTsKICAgICAgICB3aW5kb3cuYXhpb3MuZ2V0KCIvd3AtanNvbi9hcG92b2ljZS92MS9jZXJ0aWZpY2F0ZS8iLmNvbmNhdCh0cmFpbmluZy50cmFpbmluZ1Nlcmllc0lkLCAiLyIpLmNvbmNhdCh0cmFpbmluZy55ZWFyKSwgewogICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3BkZicpIHsKICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gcmVzcG9uc2UuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddOwogICAgICAgICAgICBmaWxlTmFtZSA9IGZpbGVOYW1lID8gZmlsZU5hbWUgPSBmaWxlTmFtZS5zdWJzdHJpbmcoZmlsZU5hbWUuaW5kZXhPZignPSInKSArIDIsIGZpbGVOYW1lLmluZGV4T2YoJy5wZGYiJykgKyA0KSA6ICdjZXJ0aWZpY2F0ZS5wZGYnOwogICAgICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3Jlc3BvbnNlLmRhdGFdKSk7CiAgICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVybDsKICAgICAgICAgICAgbGluay5jbGljaygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LAogICAgICBpc0NvbXBsZXRlOiBmdW5jdGlvbiBpc0NvbXBsZXRlKHRyYWluaW5nLCB1c2VyKSB7CiAgICAgICAgcmV0dXJuIHVzZXIudHJhaW5pbmdSZXN1bHRzW3RyYWluaW5nLmlkXSAmJiAhIXBhcnNlSW50KHVzZXIudHJhaW5pbmdSZXN1bHRzW3RyYWluaW5nLmlkXS5pc19jb21wbGV0ZSkgJiYgdHJhaW5pbmcuaWQgPT09IHRoaXMuY3VycmVudFRyYWluaW5nSWQ7CiAgICAgIH0KICAgIH0KICB9Owp9KTs="},{"version":3,"sources":["/app/src/mixins/download-certificate.js"],"names":["methods","download","training","console","log","window","axios","get","trainingSeriesId","year","responseType","then","response","data","type","fileName","headers","substring","indexOf","url","URL","createObjectURL","Blob","link","document","createElement","href","click","isComplete","user","trainingResults","id","parseInt","is_complete","currentTrainingId"],"mappings":";;;;;;AAAA,gBAAe;AAAA,SAAO;AACpBA,IAAAA,OAAO,EAAE;AACPC,MAAAA,QADO,oBACEC,QADF,EACY;AACjBC,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,QAAxB;AACAG,QAAAA,MAAM,CAACC,KAAP,CAAaC,GAAb,4CAAqDL,QAAQ,CAACM,gBAA9D,cAAkFN,QAAQ,CAACO,IAA3F,GAAmG;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAAnG,EACGC,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,cAAIA,QAAQ,CAACC,IAAT,CAAcC,IAAd,KAAuB,iBAA3B,EAA8C;AAC5C,gBAAIC,QAAQ,GAAGH,QAAQ,CAACI,OAAT,CAAiB,qBAAjB,CAAf;AACAD,YAAAA,QAAQ,GAAGA,QAAQ,GAAGA,QAAQ,GAAGA,QAAQ,CAACE,SAAT,CAAmBF,QAAQ,CAACG,OAAT,CAAiB,IAAjB,IAAyB,CAA5C,EAA+CH,QAAQ,CAACG,OAAT,CAAiB,OAAjB,IAA4B,CAA3E,CAAd,GAA8F,iBAAjH;AACA,gBAAMC,GAAG,GAAGd,MAAM,CAACe,GAAP,CAAWC,eAAX,CAA2B,IAAIC,IAAJ,CAAS,CAACV,QAAQ,CAACC,IAAV,CAAT,CAA3B,CAAZ;AACA,gBAAMU,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;AACAF,YAAAA,IAAI,CAACtB,QAAL,GAAgBc,QAAhB;AACAQ,YAAAA,IAAI,CAACG,IAAL,GAAYP,GAAZ;AACAI,YAAAA,IAAI,CAACI,KAAL;AACD;AACF,SAXH;AAYD,OAfM;AAgBPC,MAAAA,UAhBO,sBAgBI1B,QAhBJ,EAgBc2B,IAhBd,EAgBoB;AACzB,eAAQA,IAAI,CAACC,eAAL,CAAqB5B,QAAQ,CAAC6B,EAA9B,KAAqC,CAAC,CAACC,QAAQ,CAACH,IAAI,CAACC,eAAL,CAAqB5B,QAAQ,CAAC6B,EAA9B,EAAkCE,WAAnC,CAAhD,IACF/B,QAAQ,CAAC6B,EAAT,KAAgB,KAAKG,iBAD1B;AAED;AAnBM;AADW,GAAP;AAAA,CAAf","sourcesContent":["export default () => ({\n  methods: {\n    download(training) {\n      console.log('download', training);\n      window.axios.get(`/wp-json/apovoice/v1/certificate/${training.trainingSeriesId}/${training.year}`, { responseType: 'blob' })\n        .then(response => {\n          if (response.data.type === 'application/pdf') {\n            let fileName = response.headers['content-disposition'];\n            fileName = fileName ? fileName = fileName.substring(fileName.indexOf('=\"') + 2, fileName.indexOf('.pdf\"') + 4) : 'certificate.pdf';\n            const url = window.URL.createObjectURL(new Blob([response.data]));\n            const link = document.createElement('a');\n            link.download = fileName;\n            link.href = url;\n            link.click();\n          }\n        });\n    },\n    isComplete(training, user) {\n      return (user.trainingResults[training.id] && !!parseInt(user.trainingResults[training.id].is_complete))\n        && training.id === this.currentTrainingId;\n    },\n  },\n});\n"]}]}