{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/user/ProfilePicture.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/user/ProfilePicture.vue","mtime":1683275992569},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHJlYWRJbnB1dEZpbGUgfSBmcm9tICdAL3NlcnZpY2VzL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB1c2VyOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByb2ZpbGVQaWN0dXJlOiB7fSwKICAgICAgICAgIGZpcnN0TmFtZTogJycsCiAgICAgICAgICBsYXN0TmFtZTogJycKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgaW1hZ2VDbGFzczogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgcGxhY2Vob2xkZXJJbWFnZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcvYXNzZXRzL2ltZy91c2VyL25vLXByb2ZpbGUtcGljdHVyZS5wbmcnCiAgICB9LAogICAgaXNFZGl0YWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb2ZpbGVQaWN0dXJlOiAnJywKICAgICAgaXNMb2FkaW5nOiB0cnVlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZ1bGxOYW1lOiBmdW5jdGlvbiBmdWxsTmFtZSgpIHsKICAgICAgcmV0dXJuICIiLmNvbmNhdCh0aGlzLnVzZXIuZmlyc3ROYW1lLCAiICIpLmNvbmNhdCh0aGlzLnVzZXIubGFzdE5hbWUpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25GaWxlQ2hhbmdlZDogZnVuY3Rpb24gb25GaWxlQ2hhbmdlZChldmVudCkgewogICAgICB0aGlzLnJlbmRlclByb2ZpbGVQaWN0dXJlUHJldmlldygpOwogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIGV2ZW50KTsKICAgIH0sCiAgICByZW5kZXJQcm9maWxlUGljdHVyZVByZXZpZXc6IGZ1bmN0aW9uIHJlbmRlclByb2ZpbGVQaWN0dXJlUHJldmlldygpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiByZW5kZXJQcm9maWxlUGljdHVyZVByZXZpZXckKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKCF0aGlzLiRyZWZzLnBpY3R1cmUuZmlsZXMgfHwgdGhpcy4kcmVmcy5waWN0dXJlLmZpbGVzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHJlYWRJbnB1dEZpbGUodGhpcy4kcmVmcy5waWN0dXJlLmZpbGVzWzBdKSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgdGhpcy5wcm9maWxlUGljdHVyZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG51bGwsIHRoaXMpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGltYWdlVG9Mb2FkID0gdGhpcy51c2VyLnByb2ZpbGVQaWN0dXJlWycyNTAnXSB8fCB0aGlzLnVzZXIucHJvZmlsZVBpY3R1cmUuZnVsbCB8fCB0aGlzLnBsYWNlaG9sZGVySW1hZ2U7CiAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CgogICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMucHJvZmlsZVBpY3R1cmUgPSBpbWFnZVRvTG9hZDsKICAgICAgX3RoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9OwoKICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5wcm9maWxlUGljdHVyZSA9IF90aGlzLnBsYWNlaG9sZGVySW1hZ2U7CiAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgfTsKCiAgICBpbWcuc3JjID0gaW1hZ2VUb0xvYWQ7CiAgfQp9Ow=="},{"version":3,"sources":["ProfilePicture.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,SAAA,aAAA,QAAA,kBAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA;AACA,UAAA,cAAA,EAAA,EADA;AAEA,UAAA,SAAA,EAAA,EAFA;AAGA,UAAA,QAAA,EAAA;AAHA,SAAA;AAKA;AARA,KADA;AAYA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAZA;AAiBA,IAAA,gBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAjBA;AAsBA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAtBA,GADA;AA6BA,EAAA,IA7BA,kBA6BA;AACA,WAAA;AACA,MAAA,cAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA;AAFA,KAAA;AAIA,GAlCA;AAoCA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,uBAAA,KAAA,IAAA,CAAA,SAAA,cAAA,KAAA,IAAA,CAAA,QAAA;AACA;AAHA,GApCA;AA0CA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,KADA,EACA;AACA,WAAA,2BAAA;AAEA,WAAA,KAAA,CAAA,OAAA,EAAA,KAAA;AACA,KALA;AAOA,IAAA,2BAPA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQA,CAAA,KAAA,KAAA,CAAA,OAAA,CAAA,KAAA,IAAA,KAAA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,MAAA,KAAA,CARA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,8CAYA,aAAA,CAAA,KAAA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,CAAA,CAAA,CAZA;;AAAA;AAYA,mBAAA,cAZA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GA1CA;AA0DA,EAAA,OA1DA,qBA0DA;AAAA;;AACA,QAAA,WAAA,GAAA,KAAA,IAAA,CAAA,cAAA,CAAA,KAAA,KAAA,KAAA,IAAA,CAAA,cAAA,CAAA,IAAA,IAAA,KAAA,gBAAA;AAEA,QAAA,GAAA,GAAA,IAAA,KAAA,EAAA;;AAEA,IAAA,GAAA,CAAA,MAAA,GAAA,YAAA;AACA,MAAA,KAAA,CAAA,cAAA,GAAA,WAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,KAAA;AACA,KAHA;;AAKA,IAAA,GAAA,CAAA,OAAA,GAAA,YAAA;AACA,MAAA,KAAA,CAAA,cAAA,GAAA,KAAA,CAAA,gBAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,KAAA;AACA,KAHA;;AAKA,IAAA,GAAA,CAAA,GAAA,GAAA,WAAA;AACA;AA1EA,CAAA","sourcesContent":["<template>\n  <div class=\"profile-picture\">\n    <div\n      class=\"profile-picture-wrapper\"\n      :class=\"{\n        'flex justify-center items-center': isLoading,\n        [imageClass]: true,\n      }\"\n    >\n      <apo-spinner\n        v-if=\"isLoading\"\n        size=\"small\"\n      />\n      <img\n        v-else\n        :alt=\"$t('pages.profile.pictureCaption', { name: fullName })\"\n        class=\"profile-picture-image\"\n        :src=\"profilePicture\"\n        v-bind=\"$attrs\"\n      >\n    </div>\n\n    <button\n      v-if=\"isEditable\"\n      class=\"mt-2 underline text-gray-900 relative\"\n      type=\"button\"\n    >\n      <span v-text=\"$t('pages.profile.changePicture')\" />\n      <input\n        ref=\"picture\"\n        class=\"absolute left-0 top-0 opacity-0 cursor-pointer\"\n        type=\"file\"\n        @change=\"onFileChanged\"\n      >\n    </button>\n  </div>\n</template>\n\n<script>\n\nimport { readInputFile } from '@/services/utils';\n\nexport default {\n  props: {\n    user: {\n      type: Object,\n      default() {\n        return {\n          profilePicture: {},\n          firstName: '',\n          lastName: '',\n        };\n      },\n    },\n\n    imageClass: {\n      type: String,\n      default: '',\n    },\n\n    placeholderImage: {\n      type: String,\n      default: '/assets/img/user/no-profile-picture.png',\n    },\n\n    isEditable: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return {\n      profilePicture: '',\n      isLoading: true,\n    };\n  },\n\n  computed: {\n    fullName() {\n      return `${this.user.firstName} ${this.user.lastName}`;\n    },\n  },\n\n  methods: {\n    onFileChanged(event) {\n      this.renderProfilePicturePreview();\n\n      this.$emit('input', event);\n    },\n\n    async renderProfilePicturePreview() {\n      if (!this.$refs.picture.files || this.$refs.picture.files.length === 0) {\n        return;\n      }\n\n      this.profilePicture = await readInputFile(this.$refs.picture.files[0]);\n    },\n  },\n\n  created() {\n    const imageToLoad = this.user.profilePicture['250'] || this.user.profilePicture.full || this.placeholderImage;\n\n    const img = new Image();\n\n    img.onload = () => {\n      this.profilePicture = imageToLoad;\n      this.isLoading = false;\n    };\n\n    img.onerror = () => {\n      this.profilePicture = this.placeholderImage;\n      this.isLoading = false;\n    };\n\n    img.src = imageToLoad;\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.profile-picture {\n  @apply inline-flex;\n  @apply flex-col;\n  @apply items-center;\n\n  &-wrapper {\n    @apply rounded-full;\n    @apply border-10;\n    @apply border-white;\n    @apply w-32;\n    @apply h-32;\n\n    box-shadow: 0 4px 0 1px rgba(0, 0, 0,0.2), inset 0 1px 60px rgba(0, 0, 0, 0.35);\n  }\n\n  &-image {\n    @apply rounded-full;\n    @apply w-full;\n    @apply h-full;\n  }\n}\n\n/deep/ .vue-simple-spinner {\n  border-color:\n    transparent\n    theme('colors.white')\n    theme('colors.white')\n    #{!important};\n  }\n\n</style>\n"],"sourceRoot":"src/components/user"}]}