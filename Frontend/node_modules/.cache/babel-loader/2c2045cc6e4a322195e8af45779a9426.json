{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/content/text-media-paragraph/media-slot/TextMediaParagraphMediaSlotPresentation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/content/text-media-paragraph/media-slot/TextMediaParagraphMediaSlotPresentation.vue","mtime":1683275992558},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGdldCBmcm9tICdsb2Rhc2gvZ2V0JzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgVGV4dE1lZGlhUGFyYWdyYXBoTWVkaWFTbG90RmlsZSBmcm9tICIuL1RleHRNZWRpYVBhcmFncmFwaE1lZGlhU2xvdEZpbGUudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgICdhcG8tdGV4dC1tZWRpYS1wYXJhZ3JhcGgtbWVkaWEtc2xvdC1maWxlJzogVGV4dE1lZGlhUGFyYWdyYXBoTWVkaWFTbG90RmlsZQogIH0sCiAgcHJvcHM6IHsKICAgIG1lZGlhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHdpZHRoOiAwLAogICAgICBoZWlnaHQ6IDAsCiAgICAgIGFzcGVjdFJhdGlvOiA0IC8gMwogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsnbGFuZ3VhZ2UnXSksIHsKICAgIHByZXNlbnRhdGlvbjogZnVuY3Rpb24gcHJlc2VudGF0aW9uKCkgewogICAgICByZXR1cm4gZ2V0KHRoaXMubWVkaWEsICdwcmVzZW50YXRpb24nLCB7fSk7CiAgICB9LAogICAgYXR0YWNobWVudDogZnVuY3Rpb24gYXR0YWNobWVudCgpIHsKICAgICAgcmV0dXJuIGdldCh0aGlzLm1lZGlhLCAnYXR0YWNobWVudCcsIHt9KTsKICAgIH0sCiAgICBoYXNBdHRhY2htZW50OiBmdW5jdGlvbiBoYXNBdHRhY2htZW50KCkgewogICAgICByZXR1cm4gdGhpcy5hdHRhY2htZW50ICYmIE9iamVjdC5rZXlzKHRoaXMuYXR0YWNobWVudCkubGVuZ3RoID4gMDsKICAgIH0sCiAgICBtZWRpYUlkOiBmdW5jdGlvbiBtZWRpYUlkKCkgewogICAgICByZXR1cm4gdGhpcy5wcmVzZW50YXRpb24uaWQ7CiAgICB9LAogICAgYmFzZVVybDogZnVuY3Rpb24gYmFzZVVybCgpIHsKICAgICAgcmV0dXJuIHdpbmRvdy5heGlvcy5kZWZhdWx0cy5iYXNlVVJMOwogICAgfSwKICAgIG1lZGlhU3JjOiBmdW5jdGlvbiBtZWRpYVNyYygpIHsKICAgICAgcmV0dXJuICIvVmlld2VySlMvIyIuY29uY2F0KHRoaXMuYmFzZVVybCwgIi93cC1qc29uL2Fwb3ZvaWNlL3YxL3N0YXRpYy8iKS5jb25jYXQodGhpcy5tZWRpYUlkKTsKICAgIH0sCiAgICBoYXNEaW1lbnNpb25zOiBmdW5jdGlvbiBoYXNEaW1lbnNpb25zKCkgewogICAgICByZXR1cm4gdGhpcy53aWR0aCA+IDAgJiYgdGhpcy5oZWlnaHQgPiAwOwogICAgfSwKICAgIGRvY3VtZW50TmFtZTogZnVuY3Rpb24gZG9jdW1lbnROYW1lKCkgewogICAgICByZXR1cm4gdGhpcy5wcmVzZW50YXRpb24udGl0bGU7CiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICB2aXNpYmlsaXR5Q2hhbmdlZDogZnVuY3Rpb24gdmlzaWJpbGl0eUNoYW5nZWQoaXNWaXNpYmxlLCBlbnRyeSkgewogICAgICBpZiAoaXNWaXNpYmxlKSB7CiAgICAgICAgdGhpcy5oYW5kbGVEaW1lbnNpb25zKCk7CiAgICAgIH0KICAgIH0sCiAgICBzZXREaW1lbnNpb25zOiBmdW5jdGlvbiBzZXREaW1lbnNpb25zKCkgewogICAgICB0aGlzLndpZHRoID0gTWF0aC5mbG9vcih0aGlzLiRyZWZzLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCk7CiAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbyk7CiAgICB9LAogICAgaGFuZGxlRGltZW5zaW9uczogZnVuY3Rpb24gaGFuZGxlRGltZW5zaW9ucygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciByZXNpemVIYW5kbGVyID0gZnVuY3Rpb24gcmVzaXplSGFuZGxlcigpIHsKICAgICAgICByZXR1cm4gX3RoaXMuc2V0RGltZW5zaW9ucygpOwogICAgICB9OwoKICAgICAgcmVzaXplSGFuZGxlcigpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplSGFuZGxlciwgewogICAgICAgIHBhc3NpdmU6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuJG9uY2UoJ2hvb2s6ZGVzdHJveWVkJywgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplSGFuZGxlcik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaGFuZGxlRGltZW5zaW9ucygpOwogIH0KfTs="},{"version":3,"sources":["TextMediaParagraphMediaSlotPresentation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,OAAA,GAAA,MAAA,YAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,+BAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,gDAAA;AADA,GADA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA;AADA,GALA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,CADA;AAEA,MAAA,MAAA,EAAA,CAFA;AAGA,MAAA,WAAA,EAAA,IAAA;AAHA,KAAA;AAKA,GAlBA;AAoBA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,UAAA,CAAA,CADA;AAGA,IAAA,YAHA,0BAGA;AACA,aAAA,GAAA,CAAA,KAAA,KAAA,EAAA,cAAA,EAAA,EAAA,CAAA;AACA,KALA;AAOA,IAAA,UAPA,wBAOA;AACA,aAAA,GAAA,CAAA,KAAA,KAAA,EAAA,YAAA,EAAA,EAAA,CAAA;AACA,KATA;AAWA,IAAA,aAXA,2BAWA;AACA,aAAA,KAAA,UAAA,IAAA,MAAA,CAAA,IAAA,CAAA,KAAA,UAAA,EAAA,MAAA,GAAA,CAAA;AACA,KAbA;AAeA,IAAA,OAfA,qBAeA;AACA,aAAA,KAAA,YAAA,CAAA,EAAA;AACA,KAjBA;AAmBA,IAAA,OAnBA,qBAmBA;AACA,aAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,OAAA;AACA,KArBA;AAuBA,IAAA,QAvBA,sBAuBA;AACA,kCAAA,KAAA,OAAA,yCAAA,KAAA,OAAA;AACA,KAzBA;AA2BA,IAAA,aA3BA,2BA2BA;AACA,aAAA,KAAA,KAAA,GAAA,CAAA,IAAA,KAAA,MAAA,GAAA,CAAA;AACA,KA7BA;AA+BA,IAAA,YA/BA,0BA+BA;AACA,aAAA,KAAA,YAAA,CAAA,KAAA;AACA;AAjCA,IApBA;AAwDA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,iBAFA,6BAEA,SAFA,EAEA,KAFA,EAEA;AACA,UAAA,SAAA,EAAA;AACA,aAAA,gBAAA;AACA;AACA,KANA;AAOA,IAAA,aAPA,2BAOA;AACA,WAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,KAAA,CAAA,SAAA,CAAA,qBAAA,GAAA,KAAA,CAAA;AACA,WAAA,MAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,KAAA,GAAA,KAAA,WAAA,CAAA;AACA,KAVA;AAWA,IAAA,gBAXA,8BAWA;AAAA;;AACA,UAAA,aAAA,GAAA,SAAA,aAAA;AAAA,eAAA,KAAA,CAAA,aAAA,EAAA;AAAA,OAAA;;AAEA,MAAA,aAAA;AAEA,MAAA,MAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,aAAA,EAAA;AAAA,QAAA,OAAA,EAAA;AAAA,OAAA;AAEA,WAAA,KAAA,CAAA,gBAAA,EAAA;AAAA,eAAA,MAAA,CAAA,mBAAA,CAAA,QAAA,EAAA,aAAA,CAAA;AAAA,OAAA;AACA;AAnBA,GAxDA;AA8EA,EAAA,OA9EA,qBA8EA;AACA,SAAA,gBAAA;AACA;AAhFA,CAAA","sourcesContent":["<template>\n  <div\n    ref=\"container\"\n    v-observe-visibility=\"{\n      callback: visibilityChanged,\n      once: true,\n      intersection: {\n        rootMargin: '100%'\n      }\n    }\"\n  >\n    <div class=\"shadow-lg\">\n      <iframe\n        v-if=\"hasDimensions\"\n        allowfullscreen\n        :data-language=\"language\"\n        :data-name=\"documentName\"\n        :height=\"height\"\n        :src=\"mediaSrc\"\n        :width=\"width\"\n      />\n    </div>\n\n    <div\n      v-if=\"hasAttachment\"\n      class=\"mt-8\"\n    >\n      <apo-text-media-paragraph-media-slot-file :media=\"attachment\" />\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport get from 'lodash/get';\nimport { mapGetters } from 'vuex';\nimport TextMediaParagraphMediaSlotFile from './TextMediaParagraphMediaSlotFile.vue';\n\nexport default {\n  components: {\n    'apo-text-media-paragraph-media-slot-file': TextMediaParagraphMediaSlotFile,\n  },\n\n  props: {\n    media: {\n      type: Object,\n      default: () => {},\n    },\n  },\n\n  data() {\n    return {\n      width: 0,\n      height: 0,\n      aspectRatio: 4 / 3,\n    };\n  },\n\n  computed: {\n    ...mapGetters(['language']),\n\n    presentation() {\n      return get(this.media, 'presentation', {});\n    },\n\n    attachment() {\n      return get(this.media, 'attachment', {});\n    },\n\n    hasAttachment() {\n      return this.attachment && Object.keys(this.attachment).length > 0;\n    },\n\n    mediaId() {\n      return this.presentation.id;\n    },\n\n    baseUrl() {\n      return window.axios.defaults.baseURL;\n    },\n\n    mediaSrc() {\n      return `/ViewerJS/#${this.baseUrl}/wp-json/apovoice/v1/static/${this.mediaId}`;\n    },\n\n    hasDimensions() {\n      return this.width > 0 && this.height > 0;\n    },\n\n    documentName() {\n      return this.presentation.title;\n    },\n  },\n\n  methods: {\n    // eslint-disable-next-line no-unused-vars\n    visibilityChanged(isVisible, entry) {\n      if (isVisible) {\n        this.handleDimensions();\n      }\n    },\n    setDimensions() {\n      this.width = Math.floor(this.$refs.container.getBoundingClientRect().width);\n      this.height = Math.floor(this.width / this.aspectRatio);\n    },\n    handleDimensions() {\n      const resizeHandler = () => this.setDimensions();\n\n      resizeHandler();\n\n      window.addEventListener('resize', resizeHandler, { passive: true });\n\n      this.$once('hook:destroyed', () => window.removeEventListener('resize', resizeHandler));\n    },\n  },\n\n  mounted() {\n    this.handleDimensions();\n  },\n};\n\n</script>\n"],"sourceRoot":"src/components/content/text-media-paragraph/media-slot"}]}