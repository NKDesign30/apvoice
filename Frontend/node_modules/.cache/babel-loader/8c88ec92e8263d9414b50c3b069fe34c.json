{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/content/ShelfDisplayPuzzle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/content/ShelfDisplayPuzzle.vue","mtime":1683275992553},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgY2xvbmUgZnJvbSAnbG9kYXNoL2Nsb25lJzsKaW1wb3J0IGdldCBmcm9tICdsb2Rhc2gvZ2V0JzsKaW1wb3J0IHNvcnRCeSBmcm9tICdsb2Rhc2gvc29ydEJ5JzsKaW1wb3J0IHsgU3dhcHBhYmxlIH0gZnJvbSAnQHNob3BpZnkvZHJhZ2dhYmxlL2xpYi9lczUvZHJhZ2dhYmxlLmJ1bmRsZS5sZWdhY3knOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHNoZWxmX2Rpc3BsYXlfcHV6emxlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWFnZTogJycsCiAgICAgIG9yaWdpbmFsSW1hZ2VXaWR0aDogMCwKICAgICAgb3JpZ2luYWxJbWFnZUhlaWdodDogMCwKICAgICAgcHV6emxlOiBbXSwKICAgICAgcHV6emxlV2lkdGg6IDAsCiAgICAgIGN1cnJlbnRTd2FwOiB7CiAgICAgICAgc291cmNlSWQ6IG51bGwsCiAgICAgICAgdGFyZ2V0SWQ6IG51bGwKICAgICAgfSwKICAgICAgaXNGaW5pc2hlZDogZmFsc2UsCiAgICAgIC8vIFRoaXMgcHJvcGVydHkgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiBhcyB0aGUga2V5IGZvciBlYWNoIHB1enpsZSBwaWVjZSBpdGVtCiAgICAgIC8vIGFuZCBpcyBiZWluZyBjb3VudGVkIHVwIGV2ZXJ5IHRpbWUgdGhlIERPTSBoYXMgYmVlbiBtYW5pcHVsYXRlZCBieSB0aGUgU3dhcHBhYmxlCiAgICAgIC8vIGxpYnJhcnkuIFRoaXMgY2F1c2VzIHZ1ZSB0byByZS1yZW5kZXIgYWxsIHRoZSBsaXN0IGl0ZW1zIHRvIHJlZmxlY3QgdGhlIGN1cnJlbnQKICAgICAgLy8gZGF0YSBzdGF0ZSBjb3JyZWN0bHkuCiAgICAgIGNvbXBvbmVudEtleTogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICByb3dzOiBmdW5jdGlvbiByb3dzKCkgewogICAgICB2YXIgcm93cyA9IGdldCh0aGlzLnNoZWxmX2Rpc3BsYXlfcHV6emxlLCAnc2l6ZS5yb3dzJykgfHwgNDsKICAgICAgcmV0dXJuIHBhcnNlSW50KHJvd3MsIDEwKTsKICAgIH0sCiAgICBjb2x1bW5zOiBmdW5jdGlvbiBjb2x1bW5zKCkgewogICAgICB2YXIgY29sdW1ucyA9IGdldCh0aGlzLnNoZWxmX2Rpc3BsYXlfcHV6emxlLCAnc2l6ZS5jb2x1bW5zJykgfHwgNDsKICAgICAgcmV0dXJuIHBhcnNlSW50KGNvbHVtbnMsIDEwKTsKICAgIH0sCiAgICBjb2x1bW5XaWR0aDogZnVuY3Rpb24gY29sdW1uV2lkdGgoKSB7CiAgICAgIHJldHVybiAxMDAgLyB0aGlzLmNvbHVtbnM7CiAgICB9LAogICAgY29sdW1uSGVpZ2h0OiBmdW5jdGlvbiBjb2x1bW5IZWlnaHQoKSB7CiAgICAgIHJldHVybiAxMDAgLyB0aGlzLnJvd3M7CiAgICB9LAogICAgcHV6emxlSGVpZ2h0OiBmdW5jdGlvbiBwdXp6bGVIZWlnaHQoKSB7CiAgICAgIHZhciBoZWlnaHRSYXRpbyA9IHRoaXMucHV6emxlV2lkdGggLyB0aGlzLm9yaWdpbmFsSW1hZ2VXaWR0aDsKICAgICAgcmV0dXJuIHRoaXMub3JpZ2luYWxJbWFnZUhlaWdodCAqIGhlaWdodFJhdGlvOwogICAgfSwKICAgIHNvcnRlZFB1enpsZTogZnVuY3Rpb24gc29ydGVkUHV6emxlKCkgewogICAgICByZXR1cm4gc29ydEJ5KHRoaXMucHV6emxlLCAnaW5kZXgnKTsKICAgIH0sCiAgICBoYXNTdWNjZXNzTWVzc2FnZTogZnVuY3Rpb24gaGFzU3VjY2Vzc01lc3NhZ2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnN1Y2Nlc3NNZXNzYWdlICYmIHRoaXMuc3VjY2Vzc01lc3NhZ2UubGVuZ3RoID4gMDsKICAgIH0sCiAgICBzdWNjZXNzTWVzc2FnZTogZnVuY3Rpb24gc3VjY2Vzc01lc3NhZ2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnNoZWxmX2Rpc3BsYXlfcHV6emxlLnN1Y2Nlc3NfbWVzc2FnZTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzaGVsZl9kaXNwbGF5X3B1enpsZTogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoc2hlbGZEaXNwbGF5UHV6emxlKSB7CiAgICAgICAgdmFyIGltYWdlID0gZ2V0KHNoZWxmRGlzcGxheVB1enpsZSwgJ2ltYWdlLnNpemVzLnBvc3QtdGh1bWJuYWlsJyk7CgogICAgICAgIGlmIChpbWFnZSAmJiBpbWFnZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaW1hZ2U6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGltYWdlKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgaWYgKCFpbWFnZSB8fCBpbWFnZS5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRoaXMuaW1hZ2VJbnN0YW5jZSA9IG5ldyBJbWFnZSgpOwoKICAgICAgICB0aGlzLmltYWdlSW5zdGFuY2Uub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuZ2VuZXJhdGVQdXp6bGUoKTsKICAgICAgICB9OwoKICAgICAgICB0aGlzLmltYWdlSW5zdGFuY2Uuc3JjID0gaW1hZ2U7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdlbmVyYXRlUHV6emxlOiBmdW5jdGlvbiBnZW5lcmF0ZVB1enpsZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnN0b3JlT3JpZ2luYWxJbWFnZURpbWVuc2lvbnMoKTsKICAgICAgdGhpcy5jcmVhdGVQdXp6bGVQaWVjZXMoKTsKICAgICAgdGhpcy5zaHVmZmxlUHV6emxlUGllY2VzKCk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuY3JlYXRlU3dhcHBhYmxlSW5zdGFuY2UoKTsKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXRlUHV6emxlUGllY2VzOiBmdW5jdGlvbiBjcmVhdGVQdXp6bGVQaWVjZXMoKSB7CiAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgIHZhciBwdXp6bGUgPSBbXTsKCiAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IHRoaXMucm93czsgcm93ICs9IDEpIHsKICAgICAgICBmb3IgKHZhciBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLmNvbHVtbnM7IGNvbHVtbiArPSAxKSB7CiAgICAgICAgICBwdXp6bGUucHVzaCh7CiAgICAgICAgICAgIGlkOiAiIi5jb25jYXQocm93LCAiLSIpLmNvbmNhdChjb2x1bW4pLAogICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sCiAgICAgICAgICAgIG9yaWdpbmFsSW5kZXg6IGluZGV4LAogICAgICAgICAgICBpbmRleDogaW5kZXgKICAgICAgICAgIH0pOwogICAgICAgICAgaW5kZXggKz0gMTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMucHV6emxlID0gcHV6emxlOwogICAgfSwKICAgIHNodWZmbGVQdXp6bGVQaWVjZXM6IGZ1bmN0aW9uIHNodWZmbGVQdXp6bGVQaWVjZXMoKSB7CiAgICAgIHZhciBhdmFpbGFibGVJbmRpY2VzID0gX3RvQ29uc3VtYWJsZUFycmF5KEFycmF5KHRoaXMuY29sdW1ucyAqIHRoaXMucm93cykua2V5cygpKTsKCiAgICAgIHRoaXMucHV6emxlID0gdGhpcy5wdXp6bGUubWFwKGZ1bmN0aW9uIChwaWVjZSkgewogICAgICAgIHZhciBpbmRleCA9IGF2YWlsYWJsZUluZGljZXMuc3BsaWNlKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGF2YWlsYWJsZUluZGljZXMubGVuZ3RoKSwgMSk7CiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWRlc3RydWN0dXJpbmcsIG5vLXBhcmFtLXJlYXNzaWduICovCgogICAgICAgIHBpZWNlLmluZGV4ID0gaW5kZXhbMF07CiAgICAgICAgLyogZXNsaW50LWVuYWJsZSAqLwoKICAgICAgICByZXR1cm4gcGllY2U7CiAgICAgIH0pOwogICAgfSwKICAgIGNyZWF0ZVN3YXBwYWJsZUluc3RhbmNlOiBmdW5jdGlvbiBjcmVhdGVTd2FwcGFibGVJbnN0YW5jZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgY29udGFpbmVyID0gdGhpcy4kcmVmcy5wdXp6bGVDb250YWluZXIucXVlcnlTZWxlY3RvcignLnB1enpsZS1waWVjZXMtY29udGFpbmVyJyk7CiAgICAgIHRoaXMuc3dhcHBhYmxlID0gbmV3IFN3YXBwYWJsZShjb250YWluZXIsIHsKICAgICAgICBkcmFnZ2FibGU6ICcucHV6emxlLXBpZWNlJwogICAgICB9KTsKICAgICAgdGhpcy5zd2FwcGFibGUub24oJ3N3YXBwYWJsZTpzd2FwcGVkJywgZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICBfdGhpczMuY3VycmVudFN3YXAuc291cmNlSWQgPSBwYXlsb2FkLmRhdGEuZHJhZ0V2ZW50LmRhdGEuc291cmNlLmRhdGFzZXQuaWQ7CiAgICAgICAgX3RoaXMzLmN1cnJlbnRTd2FwLnRhcmdldElkID0gcGF5bG9hZC5kYXRhLnN3YXBwZWRFbGVtZW50LmRhdGFzZXQuaWQ7CiAgICAgIH0pOwogICAgICB0aGlzLnN3YXBwYWJsZS5vbignc3dhcHBhYmxlOnN0b3AnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzMy5pc0N1cnJlbnRTd2FwVmFsaWQoKSkgewogICAgICAgICAgdmFyIHNvdXJjZVBpZWNlID0gX3RoaXMzLnB1enpsZS5maW5kKGZ1bmN0aW9uIChwaWVjZSkgewogICAgICAgICAgICByZXR1cm4gcGllY2UuaWQgPT09IF90aGlzMy5jdXJyZW50U3dhcC5zb3VyY2VJZDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHZhciB0YXJnZXRQaWVjZSA9IF90aGlzMy5wdXp6bGUuZmluZChmdW5jdGlvbiAocGllY2UpIHsKICAgICAgICAgICAgcmV0dXJuIHBpZWNlLmlkID09PSBfdGhpczMuY3VycmVudFN3YXAudGFyZ2V0SWQ7CiAgICAgICAgICB9KTsKCiAgICAgICAgICB2YXIgc291cmNlSW5kZXggPSBjbG9uZShzb3VyY2VQaWVjZS5pbmRleCk7CiAgICAgICAgICBzb3VyY2VQaWVjZS5pbmRleCA9IGNsb25lKHRhcmdldFBpZWNlLmluZGV4KTsKICAgICAgICAgIHRhcmdldFBpZWNlLmluZGV4ID0gc291cmNlSW5kZXg7CgogICAgICAgICAgX3RoaXMzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy5jb21wb25lbnRLZXkgKz0gMTsKCiAgICAgICAgICAgIF90aGlzMy5jaGVja1dpbkNvbmRpdGlvbnMoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMzLnJlc2V0Q3VycmVudFN3YXAoKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tXaW5Db25kaXRpb25zOiBmdW5jdGlvbiBjaGVja1dpbkNvbmRpdGlvbnMoKSB7CiAgICAgIHRoaXMuaXNGaW5pc2hlZCA9IHRoaXMucHV6emxlLmV2ZXJ5KGZ1bmN0aW9uIChwaWVjZSkgewogICAgICAgIHJldHVybiBwaWVjZS5pbmRleCA9PT0gcGllY2Uub3JpZ2luYWxJbmRleDsKICAgICAgfSk7CiAgICB9LAogICAgZGV0ZXJtaW5lUHV6emxlV2lkdGg6IGZ1bmN0aW9uIGRldGVybWluZVB1enpsZVdpZHRoKCkgewogICAgICB0aGlzLnB1enpsZVdpZHRoID0gdGhpcy4kcmVmcy5wdXp6bGVDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7CiAgICB9LAogICAgc3RvcmVPcmlnaW5hbEltYWdlRGltZW5zaW9uczogZnVuY3Rpb24gc3RvcmVPcmlnaW5hbEltYWdlRGltZW5zaW9ucygpIHsKICAgICAgdGhpcy5vcmlnaW5hbEltYWdlV2lkdGggPSB0aGlzLmltYWdlSW5zdGFuY2Uud2lkdGg7CiAgICAgIHRoaXMub3JpZ2luYWxJbWFnZUhlaWdodCA9IHRoaXMuaW1hZ2VJbnN0YW5jZS5oZWlnaHQ7CiAgICB9LAogICAgZ2V0UGllY2VEaW1lbnNpb25zOiBmdW5jdGlvbiBnZXRQaWVjZURpbWVuc2lvbnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IHRoaXMucHV6emxlV2lkdGggLyB0aGlzLmNvbHVtbnMsCiAgICAgICAgaGVpZ2h0OiB0aGlzLnB1enpsZUhlaWdodCAvIHRoaXMucm93cwogICAgICB9OwogICAgfSwKICAgIGdldFBpZWNlWE9mZnNldDogZnVuY3Rpb24gZ2V0UGllY2VYT2Zmc2V0KHBpZWNlKSB7CiAgICAgIHZhciBwaWVjZVdpZHRoID0gdGhpcy5nZXRQaWVjZURpbWVuc2lvbnMoKS53aWR0aDsKICAgICAgdmFyIHBpZWNlT2Zmc2V0ID0gcGllY2VXaWR0aCAqIHBpZWNlLmNvbHVtbiAqIC0xOwogICAgICByZXR1cm4gIiIuY29uY2F0KHBpZWNlT2Zmc2V0LCAicHgiKTsKICAgIH0sCiAgICBnZXRQaWVjZVlPZmZzZXQ6IGZ1bmN0aW9uIGdldFBpZWNlWU9mZnNldChwaWVjZSkgewogICAgICB2YXIgcGllY2VIZWlnaHQgPSB0aGlzLmdldFBpZWNlRGltZW5zaW9ucygpLmhlaWdodDsKICAgICAgdmFyIHBpZWNlT2Zmc2V0ID0gcGllY2VIZWlnaHQgKiBwaWVjZS5yb3cgKiAtMTsKICAgICAgcmV0dXJuICIiLmNvbmNhdChwaWVjZU9mZnNldCwgInB4Iik7CiAgICB9LAogICAgaXNDdXJyZW50U3dhcFZhbGlkOiBmdW5jdGlvbiBpc0N1cnJlbnRTd2FwVmFsaWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTd2FwLnNvdXJjZUlkICE9PSBudWxsICYmIHRoaXMuY3VycmVudFN3YXAudGFyZ2V0SWQgIT09IG51bGw7CiAgICB9LAogICAgcmVzZXRDdXJyZW50U3dhcDogZnVuY3Rpb24gcmVzZXRDdXJyZW50U3dhcCgpIHsKICAgICAgdGhpcy5jdXJyZW50U3dhcC5zb3VyY2VJZCA9IG51bGw7CiAgICAgIHRoaXMuY3VycmVudFN3YXAudGFyZ2V0SWQgPSBudWxsOwogICAgfSwKICAgIHJlc3RhcnQ6IGZ1bmN0aW9uIHJlc3RhcnQoKSB7CiAgICAgIHRoaXMuaXNGaW5pc2hlZCA9IGZhbHNlOwogICAgICB0aGlzLnNodWZmbGVQdXp6bGVQaWVjZXMoKTsKICAgIH0sCiAgICB2aXNpYmlsaXR5Q2hhbmdlZDogZnVuY3Rpb24gdmlzaWJpbGl0eUNoYW5nZWQoaXNWaXNpYmxlKSB7CiAgICAgIGlmIChpc1Zpc2libGUpIHsKICAgICAgICB0aGlzLmRldGVybWluZVB1enpsZVdpZHRoKCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICB0aGlzLmRldGVybWluZVB1enpsZVdpZHRoKCk7CgogICAgdmFyIG9uUmVzaXplTGlzdGVuZXIgPSBmdW5jdGlvbiBvblJlc2l6ZUxpc3RlbmVyKCkgewogICAgICBfdGhpczQuZGV0ZXJtaW5lUHV6emxlV2lkdGgoKTsKICAgIH07CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplTGlzdGVuZXIpOwogICAgdGhpcy4kb25jZSgnaG9vazpkZXN0cm95ZWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZUxpc3RlbmVyKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["ShelfDisplayPuzzle.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"puzzle container\">\n    <div ref=\"puzzleContainer\">\n      <h3\n        class=\"text-center\"\n        v-html=\"$options.filters.formatContent(shelf_display_puzzle.headline)\"\n      />\n\n      <h6\n        class=\"mt-4 text-center\"\n        v-html=\"$options.filters.formatContent(shelf_display_puzzle.subheadline)\"\n      />\n\n      <div\n        v-observe-visibility=\"visibilityChanged\"\n        class=\"puzzle-pieces-container mt-16 flex flex-wrap relative focus:outline-none\"\n        :style=\"{\n          width: `${puzzleWidth}px`,\n          height: `${puzzleHeight}px`,\n        }\"\n      >\n        <div\n          v-for=\"piece in sortedPuzzle\"\n          :key=\"`${componentKey}${piece.id}`\"\n          class=\"puzzle-piece relative\"\n          :class=\"{ 'with-outline' : !isFinished}\"\n          :data-id=\"piece.id\"\n          :style=\"{\n            width: `${getPieceDimensions().width}px`,\n            height: `${getPieceDimensions().height}px`,\n            backgroundImage: `url(${image})`,\n            backgroundRepeat: 'no-repeat',\n            backgroundSize: `${puzzleWidth}px ${puzzleHeight}px`,\n            backgroundPosition: `${getPieceXOffset(piece)} ${getPieceYOffset(piece)}`,\n          }\"\n        >\n          <div\n            class=\"puzzle-piece-indicator w-full h-full opacity-50 bg-blue-400\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <div\n      v-if=\"isFinished\"\n      class=\"mt-4\"\n    >\n      <h2\n        v-if=\"hasSuccessMessage\"\n        class=\"mb-4 px-8 text-center\"\n        v-html=\"$options.filters.formatContent(successMessage)\"\n      />\n\n      <div class=\"flex justify-center\">\n        <apo-button\n          class=\"puzzle-restart-button button button--tiny button--outlined\"\n          type=\"button\"\n          @click=\"restart\"\n          v-text=\"$t('modules.shelfDisplay.restart')\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport clone from 'lodash/clone';\nimport get from 'lodash/get';\nimport sortBy from 'lodash/sortBy';\nimport { Swappable } from '@shopify/draggable/lib/es5/draggable.bundle.legacy';\n\nexport default {\n  props: {\n    shelf_display_puzzle: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      image: '',\n      originalImageWidth: 0,\n      originalImageHeight: 0,\n      puzzle: [],\n      puzzleWidth: 0,\n      currentSwap: {\n        sourceId: null,\n        targetId: null,\n      },\n      isFinished: false,\n      // This property is used in conjunction as the key for each puzzle piece item\n      // and is being counted up every time the DOM has been manipulated by the Swappable\n      // library. This causes vue to re-render all the list items to reflect the current\n      // data state correctly.\n      componentKey: 0,\n    };\n  },\n\n  computed: {\n    rows() {\n      const rows = get(this.shelf_display_puzzle, 'size.rows') || 4;\n\n      return parseInt(rows, 10);\n    },\n\n    columns() {\n      const columns = get(this.shelf_display_puzzle, 'size.columns') || 4;\n\n      return parseInt(columns, 10);\n    },\n\n    columnWidth() {\n      return 100 / this.columns;\n    },\n\n    columnHeight() {\n      return 100 / this.rows;\n    },\n\n    puzzleHeight() {\n      const heightRatio = this.puzzleWidth / this.originalImageWidth;\n\n      return this.originalImageHeight * heightRatio;\n    },\n\n    sortedPuzzle() {\n      return sortBy(this.puzzle, 'index');\n    },\n\n    hasSuccessMessage() {\n      return this.successMessage && this.successMessage.length > 0;\n    },\n\n    successMessage() {\n      return this.shelf_display_puzzle.success_message;\n    },\n  },\n\n  watch: {\n    shelf_display_puzzle: {\n      immediate: true,\n      deep: true,\n      handler(shelfDisplayPuzzle) {\n        const image = get(shelfDisplayPuzzle, 'image.sizes.post-thumbnail');\n\n        if (image && image.length > 0) {\n          this.image = image;\n        }\n      },\n    },\n\n    image: {\n      immediate: true,\n      handler(image) {\n        if (!image || image.length === 0) {\n          return;\n        }\n\n        this.imageInstance = new Image();\n\n        this.imageInstance.onload = () => {\n          this.generatePuzzle();\n        };\n\n        this.imageInstance.src = image;\n      },\n    },\n  },\n\n  methods: {\n    generatePuzzle() {\n      this.storeOriginalImageDimensions();\n      this.createPuzzlePieces();\n      this.shufflePuzzlePieces();\n\n      this.$nextTick(() => {\n        this.createSwappableInstance();\n      });\n    },\n\n    createPuzzlePieces() {\n      let index = 0;\n      const puzzle = [];\n\n      for (let row = 0; row < this.rows; row += 1) {\n        for (let column = 0; column < this.columns; column += 1) {\n          puzzle.push({\n            id: `${row}-${column}`,\n            row,\n            column,\n            originalIndex: index,\n            index,\n          });\n\n          index += 1;\n        }\n      }\n\n      this.puzzle = puzzle;\n    },\n\n    shufflePuzzlePieces() {\n      const availableIndices = [...Array(this.columns * this.rows).keys()];\n\n      this.puzzle = this.puzzle.map(piece => {\n        const index = availableIndices\n          .splice(Math.floor(Math.random() * availableIndices.length), 1);\n\n        /* eslint-disable prefer-destructuring, no-param-reassign */\n        piece.index = index[0];\n        /* eslint-enable */\n\n        return piece;\n      });\n    },\n\n    createSwappableInstance() {\n      const container = this.$refs.puzzleContainer.querySelector('.puzzle-pieces-container');\n\n      this.swappable = new Swappable(container, {\n        draggable: '.puzzle-piece',\n      });\n\n      this.swappable.on('swappable:swapped', payload => {\n        this.currentSwap.sourceId = payload.data.dragEvent.data.source.dataset.id;\n        this.currentSwap.targetId = payload.data.swappedElement.dataset.id;\n      });\n      this.swappable.on('swappable:stop', () => {\n        if (this.isCurrentSwapValid()) {\n          const sourcePiece = this.puzzle.find(piece => piece.id === this.currentSwap.sourceId);\n          const targetPiece = this.puzzle.find(piece => piece.id === this.currentSwap.targetId);\n\n          const sourceIndex = clone(sourcePiece.index);\n\n          sourcePiece.index = clone(targetPiece.index);\n          targetPiece.index = sourceIndex;\n\n          this.$nextTick(() => {\n            this.componentKey += 1;\n\n            this.checkWinConditions();\n          });\n        }\n\n        this.resetCurrentSwap();\n      });\n    },\n\n    checkWinConditions() {\n      this.isFinished = this.puzzle.every(piece => piece.index === piece.originalIndex);\n    },\n\n    determinePuzzleWidth() {\n      this.puzzleWidth = this.$refs.puzzleContainer.getBoundingClientRect().width;\n    },\n\n    storeOriginalImageDimensions() {\n      this.originalImageWidth = this.imageInstance.width;\n      this.originalImageHeight = this.imageInstance.height;\n    },\n\n    getPieceDimensions() {\n      return {\n        width: this.puzzleWidth / this.columns,\n        height: this.puzzleHeight / this.rows,\n      };\n    },\n\n    getPieceXOffset(piece) {\n      const pieceWidth = this.getPieceDimensions().width;\n      const pieceOffset = pieceWidth * piece.column * -1;\n\n      return `${pieceOffset}px`;\n    },\n\n    getPieceYOffset(piece) {\n      const pieceHeight = this.getPieceDimensions().height;\n      const pieceOffset = pieceHeight * piece.row * -1;\n\n      return `${pieceOffset}px`;\n    },\n\n    isCurrentSwapValid() {\n      return this.currentSwap.sourceId !== null && this.currentSwap.targetId !== null;\n    },\n\n    resetCurrentSwap() {\n      this.currentSwap.sourceId = null;\n      this.currentSwap.targetId = null;\n    },\n\n    restart() {\n      this.isFinished = false;\n      this.shufflePuzzlePieces();\n    },\n\n    visibilityChanged(isVisible) {\n      if (isVisible) {\n        this.determinePuzzleWidth();\n      }\n    },\n  },\n\n  mounted() {\n    this.determinePuzzleWidth();\n\n    const onResizeListener = () => {\n      this.determinePuzzleWidth();\n    };\n\n    window.addEventListener('resize', onResizeListener);\n\n    this.$once('hook:destroyed', () => {\n      window.removeEventListener('resize', onResizeListener);\n    });\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.puzzle {\n  &-piece {\n\n    &.with-outline {\n      outline: 2px solid #0099FF;\n    }\n\n    &-indicator {\n      @apply opacity-0;\n\n      transition: opacity 0.1s ease;\n    }\n\n    &.draggable-source--is-dragging &-indicator {\n      @apply opacity-75;\n    }\n  }\n\n  &-win-overlay {\n    @apply absolute;\n    @apply left-0;\n    @apply top-0;\n    @apply w-full;\n    @apply h-full;\n    @apply bg-blue-500;\n    @apply z-10;\n    @apply opacity-50;\n\n    animation-name: flash;\n    animation-duration: 1s;\n    animation-timing-function: ease;\n  }\n\n  &-restart-button {\n    @apply p-0;\n    @apply text-gray-900;\n    @apply underline;\n    @apply text-3xl;\n    @apply font-normal;\n  }\n\n  /deep/ .draggable-mirror {\n    @apply opacity-75;\n  }\n}\n\n@keyframes flash {\n  0%,\n  25%,\n  75% {\n    @apply opacity-0;\n  }\n\n  50%,\n  100% {\n    @apply opacity-50;\n  }\n}\n\n</style>\n"],"sourceRoot":"src/components/content"}]}