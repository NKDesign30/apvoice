{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/eslint-loader/index.js??ref--13-0!/app/src/services/mapper/SurveyMapper.js","dependencies":[{"path":"/app/src/services/mapper/SurveyMapper.js","mtime":1683275992576},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZsYXQtbWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zY29wYWJsZXMuZmxhdC1tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lLWNvcmVqczMvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX3R5cGVvZiBmcm9tICIvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMy9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCBnZXQgZnJvbSAnbG9kYXNoL2dldCc7CmltcG9ydCB1bmlxdWVJZCBmcm9tICdsb2Rhc2gvdW5pcXVlSWQnOwoKdmFyIFN1cnZleU1hcHBlciA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN1cnZleU1hcHBlcigpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdXJ2ZXlNYXBwZXIpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFN1cnZleU1hcHBlciwgbnVsbCwgW3sKICAgIGtleTogIm1hcFN1cnZleSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwU3VydmV5KGRhdGEpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogU3RyaW5nKGdldChkYXRhLCAnaWQnLCAnJykpLAogICAgICAgIHNsdWc6IGdldChkYXRhLCAnc2x1ZycsICcnKSwKICAgICAgICB0aXRsZTogZ2V0KGRhdGEsICd0aXRsZS5yZW5kZXJlZCcsICcnKSwKICAgICAgICBkZXNjcmlwdGlvbjogZ2V0KGRhdGEsICdhY2YuZGVzY3JpcHRpb24nLCAnJyksCiAgICAgICAgcG9pbnRzOiBwYXJzZUludChnZXQoZGF0YSwgJ2FjZi5wb2ludHMnLCAwKSwgMTApLAogICAgICAgIGR1cmF0aW9uOiB7CiAgICAgICAgICB0aW1lOiBwYXJzZUludChnZXQoZGF0YSwgJ2FjZi5kdXJhdGlvbi50aW1lJywgMCksIDEwKSwKICAgICAgICAgIHR5cGU6IFN1cnZleU1hcHBlci5tYXBEdXJhdGlvblR5cGUoZ2V0KGRhdGEsICdhY2YuZHVyYXRpb24udHlwZScsICdzZWMnKSkKICAgICAgICB9LAogICAgICAgIGV4cGlyZXNfYXQ6IGdldChkYXRhLCAnYWNmLmV4cGlyZXNfYXQnLCBudWxsKSwKICAgICAgICBzdGF0dXM6IGdldChkYXRhLCAnbWV0YS5hcG9fc3RhdHVzLjAnLCBudWxsKSwKICAgICAgICBjaGFwdGVyczogZ2V0KGRhdGEsICdhY2YuY2hhcHRlcnMnLCBbXSkubWFwKGZ1bmN0aW9uIChjaGFwdGVyKSB7CiAgICAgICAgICByZXR1cm4gU3VydmV5TWFwcGVyLm1hcENoYXB0ZXIoY2hhcHRlcik7CiAgICAgICAgfSksCiAgICAgICAgbWV0YTogewogICAgICAgICAgc3RvcmVFbmRwb2ludDogZ2V0KGRhdGEsICdzdG9yZUVuZHBvaW50JywgJycpCiAgICAgICAgfSwKICAgICAgICBpc0FjdGl2YXRhYmxlOiAhIXBhcnNlSW50KGdldChkYXRhLCAnYWNmLnRyYWluaW5nX3JlbGF0aW9uLmFjdGl2YXRhYmxlJywgMCksIDEwKSwKICAgICAgICB0cmFpbmluZ19pZDogZ2V0KGRhdGEsICdhY2YudHJhaW5pbmdfcmVsYXRpb24udHJhaW5pbmcnLCAwKQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogIm1hcENoYXB0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1hcENoYXB0ZXIoZGF0YSkgewogICAgICAvLyBpZiB0aGVyZSBpcyBhbiBlbXB0eSBjaGFwdGVyIHRoZSBiYWNrZW5kIHJldHVybnMgZmFsc2UsCiAgICAgIC8vIHRvIGF2b2lkICdtYXAgaXMgbm90IGEgZnVuY3Rpb24nIGNvbmZsaWN0cywKICAgICAgLy8gY2F0Y2ggaXQgYW5kIHJldHVybiBhbiBlbXB0eSBhcnJheQogICAgICBpZiAoIWRhdGEuY2hhcHRlcikgcmV0dXJuIFtdOwogICAgICByZXR1cm4gewogICAgICAgIHF1ZXN0aW9uczogZ2V0KGRhdGEsICdjaGFwdGVyJywgW10pLm1hcChmdW5jdGlvbiAocXVlc3Rpb24pIHsKICAgICAgICAgIHJldHVybiBTdXJ2ZXlNYXBwZXIubWFwUXVlc3Rpb24ocXVlc3Rpb24pOwogICAgICAgIH0pCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAibWFwUXVlc3Rpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFF1ZXN0aW9uKGRhdGEpIHsKICAgICAgdmFyIHF1ZXN0aW9uID0gewogICAgICAgIGlkOiB1bmlxdWVJZCgnc3EtJyksCiAgICAgICAgdHlwZTogZ2V0KGRhdGEsICdhY2ZfZmNfbGF5b3V0JywgJycpLAogICAgICAgIHF1ZXN0aW9uOiBnZXQoZGF0YSwgJ3F1ZXN0aW9uJywgJycpLAogICAgICAgIHN1YmhlYWRsaW5lOiBnZXQoZGF0YSwgJ3N1YmhlYWRsaW5lJywgJycpLAogICAgICAgIGlzS2V5UXVlc3Rpb246IGdldChkYXRhLCAnaXNfa2V5X3F1ZXN0aW9uJywgZmFsc2UpLAogICAgICAgIGlzT3B0aW9uYWw6IGdldChkYXRhLCAnaXNfb3B0aW9uYWwnLCBmYWxzZSksCiAgICAgICAgcGFyZW50VmFsdWU6IGdldChkYXRhLCAncGFyZW50X3ZhbHVlJywgJycpLAogICAgICAgIGlzTmVzdGVkOiBnZXQoZGF0YSwgJ2lzX25lc3RlZCcsIGZhbHNlKQogICAgICB9OwoKICAgICAgaWYgKHF1ZXN0aW9uLmlzTmVzdGVkKSB7CiAgICAgICAgcXVlc3Rpb24ubmVzdGVkUXVlc3Rpb24gPSBnZXQoZGF0YSwgJ25lc3RlZF9xdWVzdGlvbicsIFtdKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBTdXJ2ZXlNYXBwZXIubWFwUXVlc3Rpb24oaXRlbSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChxdWVzdGlvbi50eXBlID09PSAncmF0aW5nJykgewogICAgICAgIHF1ZXN0aW9uLnZhbHVlID0gW107CiAgICAgIH0gZWxzZSBpZiAocXVlc3Rpb24udHlwZSA9PT0gJ21hdHJpeCcpIHsKICAgICAgICBxdWVzdGlvbi52YWx1ZSA9IHt9OwogICAgICB9IGVsc2UgewogICAgICAgIHF1ZXN0aW9uLnZhbHVlID0gJyc7CiAgICAgIH0KCiAgICAgIHN3aXRjaCAocXVlc3Rpb24udHlwZSkgewogICAgICAgIGNhc2UgJ3JhdGluZyc6CiAgICAgICAgICBxdWVzdGlvbi5pdGVtcyA9IGdldChkYXRhLCAnaXRlbXMnLCBbXSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBTdXJ2ZXlNYXBwZXIubWFwUmF0aW5nSXRlbShpdGVtKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ3JhdGluZ19pY29ucyc6CiAgICAgICAgICBxdWVzdGlvbi5yYXRpbmdUeXBlID0gZ2V0KGRhdGEsICdyYXRpbmdfdHlwZScsICcnKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdtYXRyaXgnOgogICAgICAgICAgcXVlc3Rpb24ubWF0cml4VHlwZSA9IGdldChkYXRhLCAndHlwZScsICcnKTsKICAgICAgICAgIHF1ZXN0aW9uLnNlY3Rpb25zID0gZ2V0KGRhdGEsICdzZWN0aW9ucycsIFtdKS5tYXAoZnVuY3Rpb24gKHNlY3Rpb24pIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBpZDogdW5pcXVlSWQoJ3NxLXNjdG4tJyksCiAgICAgICAgICAgICAgc2VjdGlvblRpdGxlOiBnZXQoc2VjdGlvbiwgJ3RpdGxlJywgJycpCiAgICAgICAgICAgIH07CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChxdWVzdGlvbi5tYXRyaXhUeXBlID09PSAnc2luZ2xlJyB8fCBxdWVzdGlvbi5tYXRyaXhUeXBlID09PSAnbXVsdGknKSBxdWVzdGlvbi5hbnN3ZXJzID0gZ2V0KGRhdGEsICdhbnN3ZXJzJywgW10pLm1hcChmdW5jdGlvbiAoYW5zd2VyKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgaWQ6IHVuaXF1ZUlkKCdzcS1hbnN3LScpLAogICAgICAgICAgICAgIGFuc3dlclRpdGxlOiBnZXQoYW5zd2VyLCAnYW5zd2VyJywgJycpCiAgICAgICAgICAgIH07CiAgICAgICAgICB9KTtlbHNlIHF1ZXN0aW9uLmFuc3dlcnMgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdLm1hcChmdW5jdGlvbiAoYW5zd2VyKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgaWQ6IHVuaXF1ZUlkKCdzcS1hbnN3LScpLAogICAgICAgICAgICAgIGFuc3dlclRpdGxlOiBhbnN3ZXIKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ3F1ZXN0aW9uX2NsdXN0ZXInOgogICAgICAgICAgcXVlc3Rpb24uY2x1c3RlclR5cGUgPSBnZXQoZGF0YSwgJ3F1ZXN0aW9uX3R5cGUnLCAnJyk7CiAgICAgICAgICBxdWVzdGlvbi5xdWVzdGlvbnMgPSBnZXQoZGF0YSwgImNsdXN0ZXJfIi5jb25jYXQocXVlc3Rpb24uY2x1c3RlclR5cGUpLCBbXSkubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBTdXJ2ZXlNYXBwZXIubWFwUXVlc3Rpb24oaXRlbSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdjaG9pY2UnOgogICAgICAgICAgcXVlc3Rpb24uY2hvaWNlcyA9IGdldChkYXRhLCAnY2hvaWNlcycsIFtdKS5tYXAoZnVuY3Rpb24gKGNob2ljZSkgewogICAgICAgICAgICByZXR1cm4gU3VydmV5TWFwcGVyLm1hcFNpbmdsZUNob2ljZShjaG9pY2UpOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnY2hvaWNlLW11bHRpJzoKICAgICAgICAgIHF1ZXN0aW9uLmNob2ljZXMgPSBnZXQoZGF0YSwgJ2Nob2ljZXMnLCBbXSkubWFwKGZ1bmN0aW9uIChjaG9pY2UpIHsKICAgICAgICAgICAgcmV0dXJuIFN1cnZleU1hcHBlci5tYXBTaW5nbGVDaG9pY2UoY2hvaWNlKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcXVlc3Rpb24udmFsdWUgPSBbXTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdhbnN3ZXItc2luZ2xlLWxpbmUnOgogICAgICAgIGNhc2UgJ2Fuc3dlci1tdWx0aS1saW5lJzoKICAgICAgICBjYXNlICdwcm9tb3Rlcl9zY29yZSc6CiAgICAgICAgICAvLyBsZWZ0IGJsYW5rIGludGVudGlvbmFsbHkKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICd0ZXh0LXBhcmFncmFwaCc6CiAgICAgICAgICBxdWVzdGlvbi52YWx1ZSA9IGdldChkYXRhLCAnY29weScsICcnKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgY29uc29sZS5sb2coIlVua25vd24gc3VydmV5IHF1ZXN0aW9uIHR5cGUgXCIiLmNvbmNhdChxdWVzdGlvbi50eXBlLCAiXCIgZGlzY292ZXJlZC4gQ3VzdG9tIG1hcHBpbmcgbG9naWMgcmVxdWlyZWQhIikpOwogICAgICB9CgogICAgICByZXR1cm4gcXVlc3Rpb247CiAgICB9CiAgfSwgewogICAga2V5OiAibWFwUmF0aW5nSXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwUmF0aW5nSXRlbShkYXRhKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IHVuaXF1ZUlkKCdzcS1vcHQtJyksCiAgICAgICAgaGVhZGxpbmU6IGdldChkYXRhLCAnaGVhZGxpbmUnLCAnJyksCiAgICAgICAgb3B0aW9uczogZ2V0KGRhdGEsICdvcHRpb25zJywgW10pLm1hcChmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgICByZXR1cm4gU3VydmV5TWFwcGVyLm1hcFJhdGluZ09wdGlvbihvcHRpb24pOwogICAgICAgIH0pCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAibWFwUmF0aW5nT3B0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBSYXRpbmdPcHRpb24oZGF0YSkgewogICAgICByZXR1cm4gewogICAgICAgIGlkOiB1bmlxdWVJZCgnc3Etb3B0LScpLAogICAgICAgIGxhYmVsOiBnZXQoZGF0YSwgJ2xhYmVsJywgJycpLAogICAgICAgIHRvb2x0aXA6IGdldChkYXRhLCAndG9vbHRpcCcsICcnKQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogIm1hcER1cmF0aW9uVHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWFwRHVyYXRpb25UeXBlKHR5cGUpIHsKICAgICAgdmFyIHR5cGVNYXAgPSB7CiAgICAgICAgc2VjOiAnc2Vjb25kcycsCiAgICAgICAgbWluOiAnbWludXRlcycsCiAgICAgICAgaG91cjogJ2hvdXJzJwogICAgICB9OwogICAgICByZXR1cm4gdHlwZU1hcFt0eXBlXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYXBTaW5nbGVDaG9pY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFNpbmdsZUNob2ljZShkYXRhKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6IHVuaXF1ZUlkKCdzcS1zY2gtJyksCiAgICAgICAgdmFsdWU6IGdldChkYXRhLCAnY2hvaWNlJywgJycpLAogICAgICAgIHRvb2x0aXA6IGdldChkYXRhLCAndG9vbHRpcCcsICcnKQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZVN1cnZleVBheWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVN1cnZleVBheWxvYWQoc3VydmV5KSB7CiAgICAgIHZhciBhZGRpdGlvbmFsRmllbGRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgdmFyIHJlc3VsdCA9IHN1cnZleS5jaGFwdGVycy5tYXAoZnVuY3Rpb24gKGNoYXB0ZXIsIGNoYXB0ZXJJbmRleCkgewogICAgICAgIHJldHVybiBjaGFwdGVyLnF1ZXN0aW9ucy5mbGF0TWFwKGZ1bmN0aW9uIChxdWVzdGlvbikgewogICAgICAgICAgdmFyIHF1ZXN0aW9uc1Jlc3VsdCA9IFtdOwoKICAgICAgICAgIGlmIChxdWVzdGlvbi50eXBlICE9PSAndGV4dC1wYXJhZ3JhcGgnKSB7CiAgICAgICAgICAgIHF1ZXN0aW9uc1Jlc3VsdC5wdXNoKHsKICAgICAgICAgICAgICBjaGFwdGVyOiBjaGFwdGVySW5kZXggKyAxLAogICAgICAgICAgICAgIGlzX2tleV9xdWVzdGlvbjogcXVlc3Rpb24uaXNLZXlRdWVzdGlvbiwKICAgICAgICAgICAgICBxdWVzdGlvbjogcXVlc3Rpb24ucXVlc3Rpb24sCiAgICAgICAgICAgICAgdHlwZTogcXVlc3Rpb24udHlwZSwKICAgICAgICAgICAgICB2YWx1ZTogcXVlc3Rpb24udmFsdWUsCiAgICAgICAgICAgICAgaXNfb3B0aW9uYWw6IHF1ZXN0aW9uLmlzT3B0aW9uYWwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHF1ZXN0aW9uLmlzTmVzdGVkKSB7CiAgICAgICAgICAgIHF1ZXN0aW9uLm5lc3RlZFF1ZXN0aW9uLmZvckVhY2goZnVuY3Rpb24gKG5lc3RlZCkgewogICAgICAgICAgICAgIGlmIChuZXN0ZWQucGFyZW50VmFsdWUuc3BsaXQoJywnKS5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSA9PT0gcXVlc3Rpb24udmFsdWUgfHwgX3R5cGVvZihxdWVzdGlvbi52YWx1ZSkgPT09ICdvYmplY3QnICYmIHF1ZXN0aW9uLnZhbHVlLnNvbWUoZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdmFsLnZhbHVlID09PSBlIHx8IHZhbCA9PT0gZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgICBpZiAocXVlc3Rpb24udHlwZSAhPT0gJ3RleHQtcGFyYWdyYXBoJykgewogICAgICAgICAgICAgICAgICBxdWVzdGlvbnNSZXN1bHQucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgY2hhcHRlcjogY2hhcHRlckluZGV4ICsgMSwKICAgICAgICAgICAgICAgICAgICBpc19rZXlfcXVlc3Rpb246IG5lc3RlZC5pc0tleVF1ZXN0aW9uLAogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiBuZXN0ZWQucXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgdHlwZTogbmVzdGVkLnR5cGUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5lc3RlZC52YWx1ZSwKICAgICAgICAgICAgICAgICAgICBpc19vcHRpb25hbDogbmVzdGVkLmlzT3B0aW9uYWwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocXVlc3Rpb24udHlwZSA9PT0gJ3F1ZXN0aW9uX2NsdXN0ZXInKSB7CiAgICAgICAgICAgIHF1ZXN0aW9uLnF1ZXN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChjbHVzdGVyUXVlc3Rpb24pIHsKICAgICAgICAgICAgICBxdWVzdGlvbnNSZXN1bHQucHVzaCh7CiAgICAgICAgICAgICAgICBjaGFwdGVyOiBjaGFwdGVySW5kZXggKyAxLAogICAgICAgICAgICAgICAgaXNfa2V5X3F1ZXN0aW9uOiBjbHVzdGVyUXVlc3Rpb24uaXNLZXlRdWVzdGlvbiwKICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiBjbHVzdGVyUXVlc3Rpb24ucXVlc3Rpb24sCiAgICAgICAgICAgICAgICBwYXJlbnRRdWVzdGlvbjogcXVlc3Rpb24ucXVlc3Rpb24sCiAgICAgICAgICAgICAgICB0eXBlOiBjbHVzdGVyUXVlc3Rpb24udHlwZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBjbHVzdGVyUXVlc3Rpb24udmFsdWUsCiAgICAgICAgICAgICAgICBpc19vcHRpb25hbDogY2x1c3RlclF1ZXN0aW9uLmlzT3B0aW9uYWwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHF1ZXN0aW9uc1Jlc3VsdDsKICAgICAgICB9KTsKICAgICAgfSwgW10pLnJlZHVjZShmdW5jdGlvbiAoYWNjdW11bGF0b3IsIHF1ZXN0aW9ucykgewogICAgICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFjY3VtdWxhdG9yKSwgX3RvQ29uc3VtYWJsZUFycmF5KHF1ZXN0aW9ucykpOwogICAgICB9LCBbXSk7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICByZXN1bHQ6IHJlc3VsdAogICAgICB9LCBhZGRpdGlvbmFsRmllbGRzKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTdXJ2ZXlNYXBwZXI7Cn0oKTsKCmV4cG9ydCB7IFN1cnZleU1hcHBlciBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/app/src/services/mapper/SurveyMapper.js"],"names":["get","uniqueId","SurveyMapper","data","id","String","slug","title","description","points","parseInt","duration","time","type","mapDurationType","expires_at","status","chapters","map","chapter","mapChapter","meta","storeEndpoint","isActivatable","training_id","questions","question","mapQuestion","subheadline","isKeyQuestion","isOptional","parentValue","isNested","nestedQuestion","item","value","items","mapRatingItem","ratingType","matrixType","sections","section","sectionTitle","answers","answer","answerTitle","clusterType","choices","choice","mapSingleChoice","console","log","headline","options","option","mapRatingOption","label","tooltip","typeMap","sec","min","hour","survey","additionalFields","result","chapterIndex","flatMap","questionsResult","push","is_key_question","is_optional","forEach","nested","split","find","e","some","val","clusterQuestion","parentQuestion","reduce","accumulator"],"mappings":"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","sourcesContent":["import get from 'lodash/get';\nimport uniqueId from 'lodash/uniqueId';\n\nexport default class SurveyMapper {\n  static mapSurvey(data) {\n    return {\n      id: String(get(data, 'id', '')),\n      slug: get(data, 'slug', ''),\n      title: get(data, 'title.rendered', ''),\n      description: get(data, 'acf.description', ''),\n      points: parseInt(get(data, 'acf.points', 0), 10),\n      duration: {\n        time: parseInt(get(data, 'acf.duration.time', 0), 10),\n        type: SurveyMapper.mapDurationType(get(data, 'acf.duration.type', 'sec')),\n      },\n      expires_at: get(data, 'acf.expires_at', null),\n      status: get(data, 'meta.apo_status.0', null),\n      chapters: get(data, 'acf.chapters', []).map(chapter => SurveyMapper.mapChapter(chapter)),\n      meta: {\n        storeEndpoint: get(data, 'storeEndpoint', ''),\n      },\n      isActivatable: !!parseInt(get(data, 'acf.training_relation.activatable', 0), 10),\n      training_id: get(data, 'acf.training_relation.training', 0),\n    };\n  }\n\n  static mapChapter(data) {\n    // if there is an empty chapter the backend returns false,\n    // to avoid 'map is not a function' conflicts,\n    // catch it and return an empty array\n    if (!data.chapter) return [];\n    return {\n      questions: get(data, 'chapter', []).map(question => SurveyMapper.mapQuestion(question)),\n    };\n  }\n\n  static mapQuestion(data) {\n    const question = {\n      id: uniqueId('sq-'),\n      type: get(data, 'acf_fc_layout', ''),\n      question: get(data, 'question', ''),\n      subheadline: get(data, 'subheadline', ''),\n      isKeyQuestion: get(data, 'is_key_question', false),\n      isOptional: get(data, 'is_optional', false),\n      parentValue: get(data, 'parent_value', ''),\n      isNested: get(data, 'is_nested', false),\n    };\n\n    if (question.isNested) {\n      question.nestedQuestion = get(data, 'nested_question', []).map(item => SurveyMapper.mapQuestion(item));\n    }\n\n    if (question.type === 'rating') {\n      question.value = [];\n    } else if (question.type === 'matrix') {\n      question.value = {};\n    } else {\n      question.value = '';\n    }\n\n    switch (question.type) {\n      case 'rating':\n        question.items = get(data, 'items', []).map(item => SurveyMapper.mapRatingItem(item));\n\n        break;\n\n      case 'rating_icons':\n        question.ratingType = get(data, 'rating_type', '');\n\n        break;\n\n      case 'matrix':\n        question.matrixType = get(data, 'type', '');\n        question.sections = get(data, 'sections', []).map(section => ({ id: uniqueId('sq-sctn-'), sectionTitle: get(section, 'title', '') }));\n        if (question.matrixType === 'single' || question.matrixType === 'multi') question.answers = get(data, 'answers', []).map(answer => ({ id: uniqueId('sq-answ-'), answerTitle: get(answer, 'answer', '') }));\n        else question.answers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(answer => ({ id: uniqueId('sq-answ-'), answerTitle: answer }));\n\n        break;\n\n      case 'question_cluster':\n        question.clusterType = get(data, 'question_type', '');\n        question.questions = get(data, `cluster_${question.clusterType}`, []).map(item => SurveyMapper.mapQuestion(item));\n\n        break;\n\n      case 'choice':\n        question.choices = get(data, 'choices', []).map(choice => SurveyMapper.mapSingleChoice(choice));\n\n        break;\n\n      case 'choice-multi':\n        question.choices = get(data, 'choices', []).map(choice => SurveyMapper.mapSingleChoice(choice));\n        question.value = [];\n\n        break;\n\n      case 'answer-single-line':\n      case 'answer-multi-line':\n      case 'promoter_score':\n        // left blank intentionally\n        break;\n\n      case 'text-paragraph':\n        question.value = get(data, 'copy', '');\n        break;\n\n      default:\n        console.log(`Unknown survey question type \"${question.type}\" discovered. Custom mapping logic required!`);\n    }\n\n    return question;\n  }\n\n  static mapRatingItem(data) {\n    return {\n      id: uniqueId('sq-opt-'),\n      headline: get(data, 'headline', ''),\n      options: get(data, 'options', []).map(option => SurveyMapper.mapRatingOption(option)),\n    };\n  }\n\n  static mapRatingOption(data) {\n    return {\n      id: uniqueId('sq-opt-'),\n      label: get(data, 'label', ''),\n      tooltip: get(data, 'tooltip', ''),\n    };\n  }\n\n  static mapDurationType(type) {\n    const typeMap = {\n      sec: 'seconds',\n      min: 'minutes',\n      hour: 'hours',\n    };\n\n    return typeMap[type];\n  }\n\n  static mapSingleChoice(data) {\n    return {\n      id: uniqueId('sq-sch-'),\n      value: get(data, 'choice', ''),\n      tooltip: get(data, 'tooltip', ''),\n    };\n  }\n\n  static createSurveyPayload(survey, additionalFields = {}) {\n    const result = survey.chapters\n      .map((chapter, chapterIndex) => chapter.questions.flatMap(question => {\n        const questionsResult = [];\n        if (question.type !== 'text-paragraph') {\n          questionsResult.push({\n            chapter: chapterIndex + 1,\n            is_key_question: question.isKeyQuestion,\n            question: question.question,\n            type: question.type,\n            value: question.value,\n            is_optional: question.isOptional,\n          });\n        }\n\n        if (question.isNested) {\n          question.nestedQuestion.forEach(nested => {\n            if (nested.parentValue.split(',').find(e => e === question.value || (typeof question.value === 'object' && question.value.some(val => val.value === e || val === e)))) {\n              if (question.type !== 'text-paragraph') {\n                questionsResult.push({\n                  chapter: chapterIndex + 1,\n                  is_key_question: nested.isKeyQuestion,\n                  question: nested.question,\n                  type: nested.type,\n                  value: nested.value,\n                  is_optional: nested.isOptional,\n                });\n              }\n            }\n          });\n        }\n\n        if (question.type === 'question_cluster') {\n          question.questions.forEach(clusterQuestion => {\n            questionsResult.push({\n              chapter: chapterIndex + 1,\n              is_key_question: clusterQuestion.isKeyQuestion,\n              question: clusterQuestion.question,\n              parentQuestion: question.question,\n              type: clusterQuestion.type,\n              value: clusterQuestion.value,\n              is_optional: clusterQuestion.isOptional,\n            });\n          });\n        }\n\n        return questionsResult;\n      }), [])\n      .reduce((accumulator, questions) => [...accumulator, ...questions], []);\n\n    return {\n      result,\n      ...additionalFields,\n    };\n  }\n}\n"]}]}