{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/maintenance/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/maintenance/index.vue","mtime":1683275992562},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBnZXQgZnJvbSAibG9kYXNoL2dldCI7CmltcG9ydCBUZXh0SW5wdXQgZnJvbSAiQC9jb21wb25lbnRzL2Zvcm0tcmVuZGVyZXIvVGV4dElucHV0LnZ1ZSI7CmltcG9ydCB7IEFVVEhfTE9HSU4gfSBmcm9tICJAL3N0b3JlL3R5cGVzL2FjdGlvbi10eXBlcyI7CmltcG9ydCB7IEFVVEhfVVBEQVRFX1NIT1dfVVBEQVRFX1BIQVJNQUNZX01PREFMIH0gZnJvbSAiQC9zdG9yZS90eXBlcy9tdXRhdGlvbi10eXBlcyI7CmltcG9ydCBGcm9udHBhZ2UgZnJvbSAiQC9jb21wb25lbnRzL2Zyb250cGFnZS9Gcm9udHBhZ2UudnVlIjsKaW1wb3J0IFBhZ2VTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvYXBpL1BhZ2VTZXJ2aWNlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICAiYXBvLXRleHQtaW5wdXQiOiBUZXh0SW5wdXQsCiAgICAiYXBvLWZyb250cGFnZSI6IEZyb250cGFnZSwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgIH0sCiAgICAgIGxvZ2luU3RhdHVzOiAiIiwKICAgICAgaXNCdXN5OiBmYWxzZSwKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgbG9naW4oKSB7CiAgICAgIHRoaXMuaXNCdXN5ID0gdHJ1ZTsKICAgICAgdGhpcy5sb2dpblN0YXR1cyA9IHRoaXMuJHQoInBhZ2VzLmxvZ2luLm1lc3NhZ2VzLnBlbmRpbmciKTsKCiAgICAgIHdpbmRvdy5heGlvcwogICAgICAgIC5wb3N0KCIvd3AtanNvbi9qd3QtYXV0aC92MS90b2tlbiIsIHRoaXMuZm9ybSkKICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkYXRhKS5pbmNsdWRlcygiaGFzX3VwZGF0ZWRfcGhhcm1hY3lfYWRkcmVzcyIpKSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgKICAgICAgICAgICAgICBBVVRIX1VQREFURV9TSE9XX1VQREFURV9QSEFSTUFDWV9NT0RBTCwKICAgICAgICAgICAgICAhZGF0YS5oYXNfdXBkYXRlZF9waGFybWFjeV9hZGRyZXNzCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmxvZ2luU3RhdHVzID0gdGhpcy4kdCgicGFnZXMubG9naW4ubWVzc2FnZXMuc3VjY2VzcyIpOwoKICAgICAgICAgIHRoaXMuJHN0b3JlCiAgICAgICAgICAgIC5kaXNwYXRjaChBVVRIX0xPR0lOLCB7CiAgICAgICAgICAgICAgdG9rZW46IGRhdGEudG9rZW4sCiAgICAgICAgICAgICAgdXNlcjogewogICAgICAgICAgICAgICAgbmFtZTogZGF0YS51c2VyX2Rpc3BsYXlfbmFtZSwKICAgICAgICAgICAgICAgIGVtYWlsOiBkYXRhLnVzZXJfZW1haWwsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIFBhZ2VTZXJ2aWNlLmdldFBhZ2VzKCkudGhlbigoZGF0YVBhZ2VzKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImFkZFBhZ2VDb250ZW50IiwgZGF0YVBhZ2VzKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRtcERhdGEgPSBkYXRhUGFnZXMuZmlsdGVyKChwYWdlKSA9PiBwYWdlLmFjZi5zbGlkZXMpOwogICAgICAgICAgICAgICAgdG1wRGF0YS5mb3JFYWNoKChwYWdlKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiYWRkU3RhZ2UiLCB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogcGFnZS5zbHVnLAogICAgICAgICAgICAgICAgICAgIHN0YWdlOiB7CiAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtX2hlaWdodDogcGFnZS5hY2YubWluaW11bV9oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICBzbGlkZXM6IHBhZ2UuYWNmLnNsaWRlcywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5yZWRpcmVjdF9wYXRoKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgICAgICAgICAgICBwYXRoOiB0aGlzLiRyb3V0ZS5xdWVyeS5yZWRpcmVjdF9wYXRoLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvd2VsY29tZSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnN0IGVycm9yQ29kZSA9IGdldChlcnJvciwgInJlc3BvbnNlLmRhdGEuY29kZSIsICIiKS5yZXBsYWNlKAogICAgICAgICAgICAvXFtqd3RfYXV0aFxdXHMrL2csCiAgICAgICAgICAgICIiCiAgICAgICAgICApOwoKICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGdldChlcnJvciwgInJlc3BvbnNlLmRhdGEubWVzc2FnZSIsICIiKTsKICAgICAgICAgIGNvbnN0IGVycm9yU3RhdHVzID0gZ2V0KGVycm9yLCAicmVzcG9uc2Uuc3RhdHVzIiwgMCk7CgogICAgICAgICAgaWYgKAogICAgICAgICAgICBlcnJvck1lc3NhZ2UuaW5kZXhPZigiWW91IGFyZSB0ZW1wb3JhcmlseSBsb2NrZWQgb3V0IikgIT09IC0xICYmCiAgICAgICAgICAgIGVycm9yU3RhdHVzID09PSA1MDMKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLmxvZ2luU3RhdHVzID0gdGhpcy4kdCgiZXJyb3JzLnRvb19tYW55X3JldHJpZXMiKTsKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFRoZSAnaW5jb3JyZWN0X3Bhc3N3b3JkJyBlcnJvciBtdXN0IGJlIHRyYW5zbGF0ZWQgb24gdGhlIGZyb250ZW5kLAogICAgICAgICAgICAgKiBiZWNhdXNlIHdvcmRmZW5jZSBwcm92aWRlcyBhbiB0cmFuc2xhdGlvbiBpc3N1ZSB0aGF0IGlzIG5vdCByZXNvbHZlZC4KICAgICAgICAgICAgICogTWF5YmUgdGhpcyBjYW4gYmUgZml4ZWQgaW4gdGhlIGZ1dHVyZS4KICAgICAgICAgICAgICogQGxpbmsgaHR0cHM6Ly93b3JkcHJlc3Mub3JnL3N1cHBvcnQvdG9waWMvY2FudC10cmFuc2xhdGUtZXJyb3ItdGhlLXVzZXJuYW1lLW9yLXBhc3N3b3JkLXlvdS1lbnRlcmVkLWlzLWluY29ycmVjdC8KICAgICAgICAgICAgICovCiAgICAgICAgICB9IGVsc2UgaWYgKAogICAgICAgICAgICBlcnJvckNvZGUgPT09ICJ0b29fbWFueV9yZXRyaWVzIiB8fAogICAgICAgICAgICBlcnJvckNvZGUgPT09ICJpbmNvcnJlY3RfcGFzc3dvcmQiCiAgICAgICAgICApIHsKICAgICAgICAgICAgLy8gY29uc3QgbWF0Y2ggPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UubWF0Y2goLyhcZCspLio/KFx3KykvKTsKICAgICAgICAgICAgdGhpcy5sb2dpblN0YXR1cyA9IHRoaXMuJHQoYGVycm9ycy4ke2Vycm9yQ29kZX1gKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMubG9naW5TdGF0dXMgPSBnZXQoZXJyb3IsICJyZXNwb25zZS5kYXRhLm1lc3NhZ2UiLCAiIik7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzQnVzeSA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKCiAgICBvblJlZ2lzdGVyQ2xpY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvcmVnaXN0cmF0aW9uIik7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/maintenance","sourcesContent":["<template>\n  <div style=\"height: 60vh\">\n    <div class=\"login-wrapper\">\n      <div class=\"container py-24 mx-auto\">\n        <div class=\"flex flex-col items-center login\">\n          <h1 class=\"text-xs login__headline text-[25px]\">\n            Hola queridos usuarios, <br> Actualmente estamos revisando nuestro sitio\n            web. <br> Por favor, vuelva m√°s tarde. <br>Saludos de su equipo de Apovoice\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport get from \"lodash/get\";\nimport TextInput from \"@/components/form-renderer/TextInput.vue\";\nimport { AUTH_LOGIN } from \"@/store/types/action-types\";\nimport { AUTH_UPDATE_SHOW_UPDATE_PHARMACY_MODAL } from \"@/store/types/mutation-types\";\nimport Frontpage from \"@/components/frontpage/Frontpage.vue\";\nimport PageService from \"@/services/api/PageService\";\n\nexport default {\n  components: {\n    \"apo-text-input\": TextInput,\n    \"apo-frontpage\": Frontpage,\n  },\n\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n      },\n      loginStatus: \"\",\n      isBusy: false,\n    };\n  },\n\n  methods: {\n    login() {\n      this.isBusy = true;\n      this.loginStatus = this.$t(\"pages.login.messages.pending\");\n\n      window.axios\n        .post(\"/wp-json/jwt-auth/v1/token\", this.form)\n        .then(({ data }) => {\n          if (Object.keys(data).includes(\"has_updated_pharmacy_address\")) {\n            this.$store.commit(\n              AUTH_UPDATE_SHOW_UPDATE_PHARMACY_MODAL,\n              !data.has_updated_pharmacy_address\n            );\n          }\n          this.loginStatus = this.$t(\"pages.login.messages.success\");\n\n          this.$store\n            .dispatch(AUTH_LOGIN, {\n              token: data.token,\n              user: {\n                name: data.user_display_name,\n                email: data.user_email,\n              },\n            })\n            .then(() => {\n              PageService.getPages().then((dataPages) => {\n                this.$store.commit(\"addPageContent\", dataPages);\n                const tmpData = dataPages.filter((page) => page.acf.slides);\n                tmpData.forEach((page) => {\n                  this.$store.commit(\"addStage\", {\n                    name: page.slug,\n                    stage: {\n                      minimum_height: page.acf.minimum_height,\n                      slides: page.acf.slides,\n                    },\n                  });\n                });\n\n                if (this.$route.query.redirect_path) {\n                  this.$router.replace({\n                    path: this.$route.query.redirect_path,\n                  });\n                } else {\n                  this.$router.replace(\"/welcome\");\n                }\n              });\n            });\n        })\n        .catch((error) => {\n          const errorCode = get(error, \"response.data.code\", \"\").replace(\n            /\\[jwt_auth\\]\\s+/g,\n            \"\"\n          );\n\n          const errorMessage = get(error, \"response.data.message\", \"\");\n          const errorStatus = get(error, \"response.status\", 0);\n\n          if (\n            errorMessage.indexOf(\"You are temporarily locked out\") !== -1 &&\n            errorStatus === 503\n          ) {\n            this.loginStatus = this.$t(\"errors.too_many_retries\");\n            /**\n             * The 'incorrect_password' error must be translated on the frontend,\n             * because wordfence provides an translation issue that is not resolved.\n             * Maybe this can be fixed in the future.\n             * @link https://wordpress.org/support/topic/cant-translate-error-the-username-or-password-you-entered-is-incorrect/\n             */\n          } else if (\n            errorCode === \"too_many_retries\" ||\n            errorCode === \"incorrect_password\"\n          ) {\n            // const match = error.response.data.message.match(/(\\d+).*?(\\w+)/);\n            this.loginStatus = this.$t(`errors.${errorCode}`);\n          } else {\n            this.loginStatus = get(error, \"response.data.message\", \"\");\n          }\n        })\n        .finally(() => {\n          this.isBusy = false;\n        });\n    },\n\n    onRegisterClick() {\n      this.$router.push(\"/registration\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login {\n  &-wrapper {\n    background: linear-gradient(\n      120deg,\n      theme(\"colors.blue.600\"),\n      theme(\"colors.blue.400\")\n    );\n\n    .button {\n      @apply py-6;\n      @apply px-4;\n    }\n  }\n\n  /deep/ &-text-input {\n    @apply pl-16;\n    @apply pr-8;\n    @apply py-6;\n    @apply text-white;\n\n    &:hover,\n    &:focus {\n      background-color: hsla(0, 0%, 100%, 0.08);\n      border-color: theme(\"colors.white\");\n    }\n\n    &-wrapper {\n      @apply border-4;\n      @apply border-white;\n    }\n  }\n\n  &__headline {\n    @apply text-center;\n    @apply text-white;\n    @apply font-display;\n    @apply text-3xl;\n    line-height: 2.5rem;\n    font-weight: 300;\n\n    @screen tablet {\n      font-size: 3.125rem;\n      line-height: 3.75rem;\n    }\n\n    @screen desktop {\n      font-size: 3.75rem;\n      line-height: 4.375rem;\n    }\n  }\n}\n</style>\n"]}]}