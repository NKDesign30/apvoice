{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/user/performance/Achievements.vue?vue&type=style&index=0&id=28023527&scoped=true&lang=css&","dependencies":[{"path":"/app/src/components/user/performance/Achievements.vue","mtime":1683275992570},{"path":"/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5WdWVDYXJvdXNlbC1zbGlkZSB7CiAgZmxleC1iYXNpczogYXV0byAhaW1wb3J0YW50OyAvKiBwcmV2ZW50cyBzcGFjaW5nIGJldHdlZW4gdGhlIGRpc2NzICovCn0KLmN1c3RvbXsKICBtYXgtd2lkdGg6IDYxNXB4Owp9Ci5jdXN0b217CiAgbWF4LXdpZHRoOiA2MTVweDsKfQoKZmFkZS1pbiB7CiAgYW5pbWF0aW9uOiBmYWRlSW4gMnM7CiAgLXdlYmtpdC1hbmltYXRpb246IGZhZGVJbiAyczsKICAtbW96LWFuaW1hdGlvbjogZmFkZUluIDJzOwogIC1vLWFuaW1hdGlvbjogZmFkZUluIDJzOwogIC1tcy1hbmltYXRpb246IGZhZGVJbiAyczsKfQoKQGtleWZyYW1lcyBmYWRlSW4gewogIDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDEwMCUgewogICAgb3BhY2l0eTogMTsKICB9Cn0KCkAtbW96LWtleWZyYW1lcyBmYWRlSW4gewogIDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDEwMCUgewogICAgb3BhY2l0eTogMTsKICB9Cn0KCkAtd2Via2l0LWtleWZyYW1lcyBmYWRlSW4gewogIDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDEwMCUgewogICAgb3BhY2l0eTogMTsKICB9Cn0KCkAtby1rZXlmcmFtZXMgZmFkZUluIHsKICAwJSB7CiAgICBvcGFjaXR5OiAwOwogIH0KICAxMDAlIHsKICAgIG9wYWNpdHk6IDE7CiAgfQp9CgpALW1zLWtleWZyYW1lcyBmYWRlSW4gewogIDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDEwMCUgewogICAgb3BhY2l0eTogMTsKICB9Cn0KCg=="},{"version":3,"sources":["Achievements.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Achievements.vue","sourceRoot":"src/components/user/performance","sourcesContent":["<template>\n  <div>\n    <div class=\"mb-9 w-full pl-1\" style=\"height: 192px !important;\"\n         v-show=\"achievementsData.length  === 0\">\n      <div class=\"h-9 text-left text-2xl\">\n        {{ $t('welcome.achievments') }}\n      </div>\n      <div class=\"text-left py-8\">{{ $t('loaders.yourData') }}</div>\n    </div>\n    <apo-wait for=\"trainings.series\">\n      <div class=\"mb-9 fade-in\" v-cloak v-show=\"achievementsData.length > 0\">\n        <div class=\"h-9 pl-0 tablet:pl-1 text-left text-2xl\">\n          {{ $t('welcome.achievments') }}\n        </div>\n        <div class=\"block\" v-cloak>\n          <carousel\n            :per-page=\"carouselItemsDisplayed\"\n            :pagination-enabled=\"false\"\n            class=\"custom\"\n          >\n            <slide v-for=\"(achievement, index) in achievementsData\" :key=\"index\"\n                   class=\"cursor-pointer flex justify-start\">\n              <achievement-item :available=\"achievement.available\"\n                                :completed=\"achievement.completed\"\n                                :image-complete=\"achievement.imageComplete\"\n                                :image-incomplete=\"achievement.imageIncomplete\"\n                                :category-name=\"achievement.category\"\n                                :slug=\"achievement.slug\"\n                                :id=\"achievement.id\"\n\n              >\n              </achievement-item>\n            </slide>\n          </carousel>\n        </div>\n      </div>\n    </apo-wait>\n  </div>\n</template>\n\n<script>\nimport AchievementItem from '@/components/user/performance/AchievementItem.vue';\nimport {mapActions, mapGetters} from 'vuex';\nimport {\n  TRAININGS_FETCH_ALL_SERIES,\n  TAXONOMIES_FETCH_TRAINING_CATEGORIES, TRAININGS_UPDATE_CURRENT_TRAINING,\n} from '@/store/types/action-types';\nimport LoadingOverlay from \"@/components/ui/LoadingOverlay\";\n\nconst screens = require('@/tailwind/Screens');\n\nexport default {\n  name: \"Achievements\",\n  components: {\n    'achievement-item': AchievementItem,\n    'apo-loading-overlay': LoadingOverlay\n  },\n  data() {\n    return {\n      availableCategoryTrainings: [],\n      achievementsData: [],\n      windowWidth: window.innerWidth,\n      desktopWidth: screens.desktopWidth,\n      tabletWidth: screens.tabletWidth,\n      // original static dummy data: no longer in use\n      achievements: [\n        {\n          id: 1,\n          category: \"Cardiac Health\",\n          imageComplete: \"HerzComplete.png\",\n          imageIncomplete: \"HerzIncomplete.jpg\",\n          completed: 8,\n          available: 8\n        },\n        {\n          id: 2,\n          category: \"Colds and Flu\",\n          imageComplete: \"HerzComplete.png\",\n          imageIncomplete: \"HerzIncomplete.jpg\",\n          completed: 2,\n          available: 6\n        },\n        {\n          id: 3,\n          category: \"Sleep\",\n          imageComplete: \"HerzComplete.png\",\n          imageIncomplete: \"HerzIncomplete.jpg\",\n          completed: 1,\n          available: 5\n        },\n        {\n          id: 4,\n          category: \"Cardiac Health 2\",\n          imageComplete: \"HerzComplete.png\",\n          imageIncomplete: \"HerzIncomplete.jpg\",\n          completed: 8,\n          available: 8\n        },\n        {\n          id: 5,\n          category: \"Colds and Flu 2\",\n          imageComplete: \"HerzComplete.png\",\n          imageIncomplete: \"HerzIncomplete.jpg\",\n          completed: 2,\n          available: 6\n        },\n        {\n          id: 6,\n          category: \"Sleep 2\",\n          imageComplete: \"HerzComplete.png\",\n          imageIncomplete: \"HerzIncomplete.jpg\",\n          completed: 1,\n          available: 5\n        }\n      ]\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'trainingSeries',\n      'trainingCategories',\n      'availableTrainingSeries',\n      'trainingCategory',\n      'user'\n    ]),\n    carouselItemsDisplayed() {\n      if (this.windowWidth >= this.desktopWidth) {\n        return 5;\n      } else if (this.windowWidth >= this.tabletWidth) {\n        return 3;\n      } else {\n        return 3;\n      }\n    },\n    trainingProductsForFilter() {\n      // there must be trainings of this category available\n      let availableCategoryIds = this.allProductTrainingSeries.reduce((availableCategories, series) => [...availableCategories, ...series.categories], [])\n        .filter((id) => id !== this.categoryCategory.id && id !== this.productCategory)\n      return this.trainingCategories.filter((category) => availableCategoryIds.includes(category.id))\n    },\n     allProductTrainingSeries() {\n      return this.trainingSeries.filter(item => {\n        return item.trainings.length > 0 && this.isProductTraining(item) && parseInt(item.trainings[0].isPremium) === 0;\n    });\n    },\n    trainingCategoriesForFilter() {\n      // there must be trainings of this category available\n      let availableCategoryIds = this.allCategoryTrainingSeries.reduce((availableCategories, series) => [...availableCategories, ...series.categories], [])\n        .filter((id) => id !== this.categoryCategory.id && id !== this.productCategory)\n      return this.trainingCategories.filter((category) => availableCategoryIds.includes(category.id))\n    },\n     allCategoryTrainingSeries() {\n      return this.trainingSeries.filter(item => {\n        return item.trainings.length > 0 && this.isCategoryTraining(item) && parseInt(item.trainings[0].isPremium) === 0;\n    });\n    },\n  },\n  methods: {\n    ...mapActions([\n      TAXONOMIES_FETCH_TRAINING_CATEGORIES,\n      TRAININGS_FETCH_ALL_SERIES\n    ]),\n    onResize() {\n      this.windowWidth = window.innerWidth\n    },\n    isCategoryTraining(trainingItem) {\n      if (this.categoryCategory === null) {\n        return false;\n      }\n      if (typeof this.categoryCategory === 'object') {\n        return trainingItem.categories.includes(this.categoryCategory.id);\n      }\n      return false;\n    },\n    isProductTraining(trainingItem) {\n      if (this.productCategory === null) {\n        return false;\n      }\n      if (typeof this.productCategory === 'object') {\n        return trainingItem.categories.includes(this.productCategory.id);\n      }\n      return false;\n    },\n    userHasCompletedTraining(training) {\n      let trainingResult = this.user.trainingResults[training.trainings[0].id];\n      if (trainingResult !== undefined) {\n        return trainingResult.is_complete === '1'\n      } else {\n        return false;\n      }\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      window.addEventListener('resize', this.onResize);\n    });\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.onResize);\n  },\n  created() {\n    this[TAXONOMIES_FETCH_TRAINING_CATEGORIES]().then(data => {\n      this.categoryCategory = data.find(item => item.slug === 'category');\n      this.productCategory = data.find(item => item.slug === 'products');\n    }).then(data => {\n      this[TRAININGS_FETCH_ALL_SERIES]().then(data => {\n          this.availableCategoryTrainings = this.trainingSeries.filter(item => item.trainings.length > 0 && (this.isCategoryTraining(item)|| this.isProductTraining(item) ) && parseInt(item.trainings[0].isPremium) === 0)\n          \n          this.trainingCategories.filter(category => category.activeAchievements && category.id !== this.categoryCategory.id && category.id !== this.productCategory.id)\n            .map(category => {\n              let trainingsThisCategory = this.availableCategoryTrainings.filter(\n                training => training.categories.includes(category.id)\n              )\n              if (trainingsThisCategory.length) {\n                 this.trainingProductsForFilter.map((item)=>{ \n                  if(category.id===item.id){\n                       category.type=\"products\";\n                  }\n                  });\n               this.trainingCategoriesForFilter.map((item)=>{ \n                  if(category.id===item.id && category.type!=\"products\"){\n                       category.type=\"category\";\n                  }\n                  });\n\n                let numTrainingsCompleted = 0;\n                trainingsThisCategory.map(training => {\n                  numTrainingsCompleted += this.userHasCompletedTraining(training) ? 1 : 0;\n                })\n                if (!category.imageComplete\n                  || !category.imageIncomplete\n                ) {\n                  this.achievementsData.push(\n                    {\n                      id: category.id,\n                      category: category.name,\n                      imageIncomplete: 'https://apovoicenonprodstorage.blob.core.windows.net/mediauploads/2022/05/HerzIncomplete-6290d8391fc99.jpg',\n                      imageComplete: 'https://apovoicenonprodstorage.blob.core.windows.net/mediauploads/2022/05/HerzComplete-6290d8377a8ba.png',\n                      completed: numTrainingsCompleted,\n                      available: trainingsThisCategory.length,\n                      slug: category.type\n                    }\n                  )\n                } else {\n                  this.achievementsData.push(\n                    {\n                      id: category.id,\n                      category: category.name,\n                      imageComplete: category.imageComplete.url,\n                      imageIncomplete: category.imageIncomplete.url,\n                      completed: numTrainingsCompleted,\n                      available: trainingsThisCategory.length,\n                      slug: category.type\n                    })\n                }\n              }\n            })\n        }\n      )\n    })\n  }\n}\n</script>\n\n<style scoped>\n.VueCarousel-slide {\n  flex-basis: auto !important; /* prevents spacing between the discs */\n}\n.custom{\n  max-width: 615px;\n}\n.custom{\n  max-width: 615px;\n}\n\nfade-in {\n  animation: fadeIn 2s;\n  -webkit-animation: fadeIn 2s;\n  -moz-animation: fadeIn 2s;\n  -o-animation: fadeIn 2s;\n  -ms-animation: fadeIn 2s;\n}\n\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-moz-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-webkit-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-o-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@-ms-keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n</style>\n"]}]}