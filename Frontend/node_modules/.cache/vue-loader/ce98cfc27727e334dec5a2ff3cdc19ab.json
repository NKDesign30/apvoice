{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/V2/training/premiumTraining.vue?vue&type=style&index=0&id=ac93e862&scoped=true&lang=css&","dependencies":[{"path":"/app/src/components/V2/training/premiumTraining.vue","mtime":1689925550345},{"path":"/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGlzYWJsZXsKICBwb2ludGVyLWV2ZW50czpub25lCn0KCkBtZWRpYSAobWluLXdpZHRoOiA3NjdweCkgewouaGVhcnRob3Zlcjpob3ZlcnsKIAl0cmFuc2Zvcm06IHNjYWxlKDEuMyk7Cn0KIAp9Cgo="},{"version":3,"sources":["premiumTraining.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0iBA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"premiumTraining.vue","sourceRoot":"src/components/V2/training","sourcesContent":["<template>\n  <div class=\"relative flex flex-row flex-wrap w-full \">\n    <div\n      v-if=\"showError\"\n      class=\"absolute z-10 mx-auto mb-10 w-full max-w-2xl p-4 rounded-full bg-red-300 text-white shadow-hard\"\n      style=\"left: 0; right: 0; top: 0px;\"\n    >\n      <div class=\"notification-inner mx-auto relative w-11/12\">\n        <p\n          class=\"w-5/6 mx-auto\"\n          v-html=\"errorMessage\"\n        />\n        <span\n          class=\"absolute top-0 right-0\"\n        >\n          <apo-icon\n            class=\"w-5 cursor-pointer\"\n            src=\"close\"\n            @click=\"closeError()\"\n          />\n        </span>\n      </div>\n    </div>\n    <div class=\"flex flex-col w-full tablet:w-1/4\">\n      <div class=\"h-40 flex justify-between overflow-hidden rounded-lg\">\n        <img\n          class=\"object-cover rounded-lg object-top w-2/3 tablet:w-full h-full\"\n          style=\"box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2)\"\n          :src=\"premium.thumbnail\"\n        >\n        <div class=\"tablet:hidden  block\">\n          <div\n            class=\"relative flex items-center justify-center\"\n          >\n            <div\n              class=\"absolute flex flex-col items-center justify-center text-white\"\n            >\n              <div\n                v-if=\"!premium.unlocked\"\n                class=\"flex flex-col items-center justify-center\"\n              >\n                <span class=\"text-3xl\">\n                  {{ premium.apo_points }}\n                </span>\n                <span class=\"-mt-3\"> apoPoints </span>\n              </div>\n              <div v-else>\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 24 24\"\n                  width=\"50px\"\n                  fill=\"#ffffff\"\n                ><path\n                  d=\"M0 0h24v24H0V0z\"\n                  fill=\"none\"\n                /><path d=\"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\" /></svg>\n              </div>\n            </div>\n            <img\n              src=\"/assets/img/apo_points_unlocked.svg\"\n              alt=\"\"\n            >\n          </div>\n        </div>\n      </div>\n      <button\n        v-if=\"premium.unlocked && premium.is_complete\"\n        class=\"hidden w-full py-2 mt-5 mr-auto text-center text-white rounded-full tablet:block\"\n        style=\"background-color: #d5b03a\"\n        @click=\"download(premium.trainings[0])\"\n      >\n        {{ $t(\"trainings.download\") }}\n      </button>\n      <router-link\n        v-if=\"premium.unlocked && !premium.is_complete\"\n        class=\"hidden w-full py-2 mt-5 mr-auto text-center text-white rounded-full tablet:block\"\n        style=\"background-color: #d5b03a\"\n        tag=\"apo-button\"\n        :to=\"getTrainingsLink()\"\n      >\n        {{ $t(\"trainings.start\") }}\n      </router-link>\n\n\n      <button\n        v-else\n        class=\"hidden w-full py-2 mt-5 mr-auto text-center text-white rounded-full tablet:block\"\n        :class=\"disabled ? 'disabled cursor-not-allowed' : ''\"\n        :style=\"disabled ? 'box-shadow: 0px 0px 10px #00000029; color: #ffffff; background-color: #eeeeee' : 'background-color: #d5b03a'\"\n        :disabled=\"disabled\"\n        @click=\"!disabled && !loading && !isPending && unlockPremium(premium.id)\"\n      >\n        <span v-if=\"!loading\">{{ $t(\"trainings.unlock\") }}</span>\n        <apo-spinner\n          v-else\n          size=\"small\"\n        />\n      </button>\n    </div>\n    <p\n      v-if=\"premium.category && premium.category.length\"\n      class=\"px-3 mt-5 ml-0 mr-auto text-sm text-right text-gray-700 tablet:hidden\"\n    >\n      {{ premium.category[0] }}\n    </p>\n    <div class=\"w-full tablet:w-2/4\">\n      <p class=\"pl-4 mt-2\">\n        {{ premium.title }}\n      </p>\n      <p class=\"pl-4 text-sm\">\n        {{ premium.informations.description }}\n      </p>\n    </div>\n\n    <div class=\"flex-col hidden w-1/4 tablet:flex\">\n      <p\n        v-if=\"premium.category && premium.category.length\"\n        class=\"text-sm text-right text-gray-700\"\n      >\n        {{ premium.category[0] }}\n      </p>\n      <div\n        class=\"relative flex items-center justify-center mt-2 ml-auto\"\n      >\n        <div\n          class=\"absolute flex flex-col items-center justify-center text-white\"\n        >\n          <div\n            v-if=\"!premium.unlocked\"\n            class=\"flex flex-col items-center justify-center\"\n          >\n            <span class=\"text-3xl\">\n              {{ premium.apo_points }}\n            </span>\n            <span class=\"-mt-3\"> apoPoints </span>\n          </div>\n          <div v-else>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              width=\"50px\"\n              fill=\"#ffffff\"\n            ><path\n              d=\"M0 0h24v24H0V0z\"\n              fill=\"none\"\n            /><path d=\"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\" /></svg>\n          </div>\n        </div>\n        <img\n          src=\"/assets/img/apo_points_unlocked.svg\"\n          alt=\"\"\n        >\n      </div>\n    </div>\n\n    \n    <div class=\"flex w-full justify-center button block tablet:hidden\">\n      <button\n        v-if=\"premium.unlocked && premium.is_complete\"\n        class=\"block tablet:hidden py-2 px-4 mt-5 text-center text-white rounded-full\"\n        style=\"background-color: #d5b03a\"\n        @click=\"download(premium.trainings[0])\"\n      >\n        {{ $t(\"trainings.download\") }}\n      </button>\n      <router-link\n        v-if=\"premium.unlocked && !premium.is_complete\"\n        class=\"block tablet:hidden py-2 px-4 mt-5 text-center text-white rounded-full\"\n        style=\"background-color: #d5b03a\"\n        tag=\"apo-button\"\n        :to=\"getTrainingsLink()\"\n      >\n        {{ $t(\"trainings.start\") }}\n      </router-link>\n      <button\n        v-else\n        class=\"block tablet:hidden py-2 px-4 mt-5 text-center text-white rounded-full\"\n        :class=\"disabled ? 'disabled cursor-not-allowed' : ''\"\n        :style=\"disabled ? 'box-shadow: 0px 0px 10px #00000029; color: #ffffff; background-color: #eeeeee' : 'background-color: #d5b03a'\"\n        :disabled=\"disabled\"\n        @click=\"!disabled && !loading &&  !isPending && unlockPremium(premium.id)\"\n      >\n        <span v-if=\"!loading\">{{ $t(\"trainings.unlock\") }}</span>\n        <apo-spinner\n          v-else\n          size=\"small\"\n        />\n      </button>\n    </div>\n\n    <div class=\"flex flex-row justify-start w-full mt-2\">\n      <div\n        v-if=\"premium.unlocked\"\n        class=\"flex flex-row w-full\"\n      >\n        <router-link\n          v-for=\"lesson in lessons\"\n          :key=\"lesson.id\"\n          :to=\"getTrainingsLink(lesson.lesson)\"\n          class=\"flex-row items-center justify-between hidden h-10 p-3 mr-3 rounded-lg tablet:flex w-72\"\n          :style=\"\n            user.trainingResults[premium.trainings[0].training.ID] &&\n              user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                lesson.lesson.lesson_id\n              ]\n              ? 'background: #fff; box-shadow: 0px 0px 10px #ccc'\n              : 'background: linear-gradient(to right, #d5b03a, #d5b03a, #d5b03a, #f4e2ab, #f4e2ab);'\n          \"\n        >\n          <span\n            class=\"text-xs\"\n            :style=\"\n              user.trainingResults[premium.trainings[0].training.ID] &&\n                user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                  lesson.lesson.lesson_id\n                ]\n                ? 'color: #ccc;'\n                : 'color: #fff'\n            \"\n          >\n            {{ lesson.lesson.meta_infos.duration.time }}\n          </span>\n          <span\n            class=\"ml-1 text-sm\"\n            :style=\"\n              user.trainingResults[premium.trainings[0].training.ID] &&\n                user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                  lesson.lesson.lesson_id\n                ]\n                ? 'color: #ccc;'\n                : 'color: #fff'\n            \"\n          >\n            {{ lesson.lesson.meta_infos.duration.type }}\n          </span>\n          <span\n            class=\"w-1/2 h-5 mx-auto text-sm text-center\"\n            style=\"overflow: hidden;\n            text-overflow: ellipsis\n            white-space: nowrap;\"\n            :style=\"\n              user.trainingResults[premium.trainings[0].training.ID] &&\n                user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                  lesson.lesson.lesson_id\n                ]\n                ? 'color: #ccc;'\n                : 'color: #fff'\n            \"\n          >\n            {{ lesson.lesson.meta_infos.title }}\n          </span>\n          <div\n            class=\"flex items-center justify-center w-5 h-5 bg-white rounded-full \"\n          >\n            <apo-icon\n              v-if=\"\n                user.trainingResults[premium.trainings[0].training.ID] &&\n                  user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                    lesson.lesson.lesson_id\n                  ]\n              \"\n              src=\"radio_checked\"\n              class=\"w-6 h-6 training-lesson__icon--unchecked text-training-500\"\n            />\n            <apo-icon\n              v-else\n              src=\"radio\"\n              class=\"w-6 h-6 training-lesson__icon--checked text-training-500\"\n            />\n          </div>\n        </router-link>\n        <div class=\"block tablet:hidden\">\n          <carousel\n            class=\"w-full mx-auto\"\n            :pagination-enabled=\"false\"\n            :per-page=\"lessons.length > 1 ? 1.5 : 1.5\"\n          >\n            <slide\n              v-for=\"lesson in lessons\"\n              :key=\"lesson.id\"\n              class=\"px-2\"\n            >\n              <router-link\n                :to=\"getTrainingsLink(lesson.lesson)\"\n                class=\"flex flex-row items-center justify-between h-10 p-3 my-5 mr-3 rounded-lg w-44\"\n                :class=\"\n                  user.trainingResults[premium.trainings[0].training.ID] &&\n                    user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                      lesson.lesson.lesson_id\n                    ]\n                    ? 'ml-2 '\n                    : ''\n                \"\n                :style=\"\n                  user.trainingResults[premium.trainings[0].training.ID] &&\n                    user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                      lesson.lesson.lesson_id\n                    ]\n                    ? 'background: #fff; box-shadow: 0px 0px 10px #ccc'\n                    : 'background: linear-gradient(to right, #d5b03a, #d5b03a, #d5b03a, #f4e2ab, #f4e2ab);'\n                \"\n              >\n                <span\n                  class=\"text-xs\"\n                  :style=\"\n                    user.trainingResults[premium.trainings[0].training.ID] &&\n                      user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                        lesson.lesson.lesson_id\n                      ]\n                      ? 'color: #ccc;'\n                      : 'color: #fff'\n                  \"\n                >\n                  {{ lesson.lesson.meta_infos.duration.time }}\n                </span>\n                <span\n                  class=\"ml-1 mr-auto text-sm\"\n                  :style=\"\n                    user.trainingResults[premium.trainings[0].training.ID] &&\n                      user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                        lesson.lesson.lesson_id\n                      ]\n                      ? 'color: #ccc;'\n                      : 'color: #fff'\n                  \"\n                >\n                  {{ lesson.lesson.meta_infos.duration.type }}\n                </span>\n                <div\n                  class=\"flex items-center justify-center w-5 h-5 bg-white rounded-full \"\n                >\n                  <apo-icon\n                    v-if=\"\n                      user.trainingResults[premium.trainings[0].training.ID] &&\n                        user.trainingResults[premium.trainings[0].training.ID]['completed_lessons'][\n                          lesson.lesson.lesson_id\n                        ]\n                    \"\n                    src=\"radio_checked\"\n                    class=\"w-4 h-4 training-lesson__icon--unchecked text-training-500\"\n                  />\n                  <apo-icon\n                    v-else\n                    src=\"radio\"\n                    class=\"w-4 h-4 training-lesson__icon--checked text-training-500\"\n                  />\n                </div>\n              </router-link>\n            </slide>\n          </carousel>\n        </div>\n      </div>\n    </div>\n    <div class=\"flex flex-row justify-start w-full self-center desktop:p-5 p-0\">  \n        <img v-show=\"liketest\"\n          @click=\"handleClick\"\n          class=\"h-auto max-w-full cursor-pointer\thearthover\"\n          style=\"margin-top: 20px;\"\n          src=\"@/assets/img/heart_full.svg\"\n          :alt=\"$t('template.navigation.logo.alt')\">\n          \n           <img v-show=\"!liketest\"\n          @click=\"handleClick\"\n          class=\"h-auto max-w-full cursor-pointer hearthover\"\n          style=\"margin-top: 20px;\"\n          src=\"@/assets/img/heart_empty.svg\"\n          :alt=\"$t('template.navigation.logo.alt')\">\n          <span class=\" pl-3 pt-5\" style=\"text-align: center;\">{{this.countLike}}</span>\n    </div>  </div>\n</template>\n\n<script>\nimport { mapState, mapActions, mapGetters } from 'vuex';\nimport get from 'lodash/get';\nimport downloadCertificate from '@/mixins/download-certificate';\nimport TrainingMapper from '@/services/mapper/TrainingMapper';\nimport TrainingService from '@/services/api/TrainingService';\n\nexport default {\n  mixins: [downloadCertificate()],\n  props: {\n    premium: {\n      type: Object,\n      required: true,\n    },\n\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return {\n      errorMessage: '',\n      showError: false,\n      loading: false,\n      countLike:0,\n      liked:false,\n    };\n  },\n\n  computed: {\n    ...mapGetters(['trainingCategory', 'user']),\n    ...mapGetters(['language']),\n    ...mapState({\n      settings: state => state.settings.settings,\n    }),\n\n    isPending() {\n      return !this.settings.showVoucher.is_available;\n    },\n    lessons() {\n      return get(this.premium.trainings[0], 'lessons', []);\n    },\n    nextLesson() {\n      const nextLesson = this.lessons.find(\n        lesson => !(\n          Object.keys(this.user.trainingResults).includes(this.premium.trainings[0].training.ID)\n            && this.user.trainingResults[this.premium.trainings[0].training.ID].completed_lessons[\n              lesson.lesson_id\n            ]\n        ),\n      );\n      return get(nextLesson, 'lesson_id', null);\n    },\n    liketest(){\n      return(this.liked);\n    },\n  },\n  methods: {\n    ...mapActions(['unlockPremiumContent', 'unlockPremiumTrainingSeries']),\n    handleClick(event){\n      event.target.classList.toggle(\".disable\");\n     if(this.liked){\n      this.storeDisLike()\n     }else{\n      this.storeLike()\n     }\n     event.target.classList.toggle(\".disable\");\n    },\n    refresh(){\n     this.isliked();\n     this.countLikes();\n    },\n      storeLike() {\n      const params = {\n        TRAINING_SERIES_ID: this.premium.id,\n      };\n      TrainingService.storeLike(\n        params\n      ).then(response => {\n         \n        console.log(response);\n         this.isliked();\n     this.countLikes();\n        })\n        .catch(error => {\n          console.log('error storing training like result', error);\n        });\n    },\n    storeDisLike() {\n      const params = {\n        TRAINING_SERIES_ID: this.premium.id,\n      };\n      TrainingService.storeDisLike(\n        params\n      ).then(response => {\n          this.isliked();\n     this.countLikes();\n        \n        })\n        .catch(error => {\n          console.log('error storing training like result', error);\n        });\n    },\n     isliked(){\n      const params = {\n        TRAINING_SERIES_ID: this.premium.id,\n      };\n      TrainingService.checkLike(\n        params\n      ).then(response => {\n        this.liked=response;\n        })\n        .catch(error => {\n          console.log('error storing training like result', error);\n        });\n    },\n    countLikes(){\n      const params = {\n        TRAINING_SERIES_ID: this.premium.id,\n      };\n      TrainingService.countLikes(\n        params\n      ).then(response => {\n        if(response.length!=0){\n          this.countLike=response[0].count;\n        }else{\n          this.countLike=0;\n        }\n\n        })\n        .catch(error => {\n          console.log('error storing training like result', error);\n        });\n    },\n    unlockPremium(id) {\n      this.loading = true;\n      this.unlockPremiumContent(id).then(result => {\n        console.log(result);\n        if (typeof result !== 'object') {\n          this.unlockPremiumTrainingSeries(id);\n        } else {\n          this.showError = true;\n          this.errorMessage = result[0];\n        }\n        this.loading = false;\n      });\n    },\n    closeError() {\n      this.showError = false;\n      this.errorMessage = '';\n    },\n    complete() {\n      return Boolean(\n        this.user.trainingResults[this.premium.trainings[0].id]\n          && this.user.trainingResults[this.premium.trainings[0].id]\n            .is_complete === '1',\n      );\n    },\n    getTrainingsLink(lesson = null) {\n      const url = `/trainings/${this.premium.slug}/${this.premium.trainings[0].training.post_name}/${lesson ? lesson.lesson_id : this.premium.trainings[0].lessons[0].lesson.lesson_id}`;\n      return url;\n    },\n    categoriesNames(categories) {\n      if (categories.length > 0) {\n        return categories\n          .map(id => this.premiumCategory(id))\n          .map(category => (category ? category.name : ''))\n          .join(', ');\n      }\n      return null;\n    },\n  },\n  created(){\n     this.refresh();\n  }\n};\n</script>\n\n\n<style scoped>\n\n.disable{\n  pointer-events:none\n}\n\n@media (min-width: 767px) {\n.hearthover:hover{\n \ttransform: scale(1.3);\n}\n \n}\n\n</style>\n"]}]}