{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/user/ProfilePicture.vue?vue&type=style&index=0&id=468090ce&lang=scss&scoped=true&","dependencies":[{"path":"/app/src/components/user/ProfilePicture.vue","mtime":1683275992569},{"path":"/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnByb2ZpbGUtcGljdHVyZSB7CiAgQGFwcGx5IGlubGluZS1mbGV4OwogIEBhcHBseSBmbGV4LWNvbDsKICBAYXBwbHkgaXRlbXMtY2VudGVyOwoKICAmLXdyYXBwZXIgewogICAgQGFwcGx5IHJvdW5kZWQtZnVsbDsKICAgIEBhcHBseSBib3JkZXItMTA7CiAgICBAYXBwbHkgYm9yZGVyLXdoaXRlOwogICAgQGFwcGx5IHctMzI7CiAgICBAYXBwbHkgaC0zMjsKCiAgICBib3gtc2hhZG93OiAwIDRweCAwIDFweCByZ2JhKDAsIDAsIDAsMC4yKSwgaW5zZXQgMCAxcHggNjBweCByZ2JhKDAsIDAsIDAsIDAuMzUpOwogIH0KCiAgJi1pbWFnZSB7CiAgICBAYXBwbHkgcm91bmRlZC1mdWxsOwogICAgQGFwcGx5IHctZnVsbDsKICAgIEBhcHBseSBoLWZ1bGw7CiAgfQp9CgovZGVlcC8gLnZ1ZS1zaW1wbGUtc3Bpbm5lciB7CiAgYm9yZGVyLWNvbG9yOgogICAgdHJhbnNwYXJlbnQKICAgIHRoZW1lKCdjb2xvcnMud2hpdGUnKQogICAgdGhlbWUoJ2NvbG9ycy53aGl0ZScpCiAgICAjeyFpbXBvcnRhbnR9OwogIH0KCg=="},{"version":3,"sources":["ProfilePicture.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProfilePicture.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\n  <div class=\"profile-picture\">\n    <div\n      class=\"profile-picture-wrapper\"\n      :class=\"{\n        'flex justify-center items-center': isLoading,\n        [imageClass]: true,\n      }\"\n    >\n      <apo-spinner\n        v-if=\"isLoading\"\n        size=\"small\"\n      />\n      <img\n        v-else\n        :alt=\"$t('pages.profile.pictureCaption', { name: fullName })\"\n        class=\"profile-picture-image\"\n        :src=\"profilePicture\"\n        v-bind=\"$attrs\"\n      >\n    </div>\n\n    <button\n      v-if=\"isEditable\"\n      class=\"mt-2 underline text-gray-900 relative\"\n      type=\"button\"\n    >\n      <span v-text=\"$t('pages.profile.changePicture')\" />\n      <input\n        ref=\"picture\"\n        class=\"absolute left-0 top-0 opacity-0 cursor-pointer\"\n        type=\"file\"\n        @change=\"onFileChanged\"\n      >\n    </button>\n  </div>\n</template>\n\n<script>\n\nimport { readInputFile } from '@/services/utils';\n\nexport default {\n  props: {\n    user: {\n      type: Object,\n      default() {\n        return {\n          profilePicture: {},\n          firstName: '',\n          lastName: '',\n        };\n      },\n    },\n\n    imageClass: {\n      type: String,\n      default: '',\n    },\n\n    placeholderImage: {\n      type: String,\n      default: '/assets/img/user/no-profile-picture.png',\n    },\n\n    isEditable: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return {\n      profilePicture: '',\n      isLoading: true,\n    };\n  },\n\n  computed: {\n    fullName() {\n      return `${this.user.firstName} ${this.user.lastName}`;\n    },\n  },\n\n  methods: {\n    onFileChanged(event) {\n      this.renderProfilePicturePreview();\n\n      this.$emit('input', event);\n    },\n\n    async renderProfilePicturePreview() {\n      if (!this.$refs.picture.files || this.$refs.picture.files.length === 0) {\n        return;\n      }\n\n      this.profilePicture = await readInputFile(this.$refs.picture.files[0]);\n    },\n  },\n\n  created() {\n    const imageToLoad = this.user.profilePicture['250'] || this.user.profilePicture.full || this.placeholderImage;\n\n    const img = new Image();\n\n    img.onload = () => {\n      this.profilePicture = imageToLoad;\n      this.isLoading = false;\n    };\n\n    img.onerror = () => {\n      this.profilePicture = this.placeholderImage;\n      this.isLoading = false;\n    };\n\n    img.src = imageToLoad;\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.profile-picture {\n  @apply inline-flex;\n  @apply flex-col;\n  @apply items-center;\n\n  &-wrapper {\n    @apply rounded-full;\n    @apply border-10;\n    @apply border-white;\n    @apply w-32;\n    @apply h-32;\n\n    box-shadow: 0 4px 0 1px rgba(0, 0, 0,0.2), inset 0 1px 60px rgba(0, 0, 0, 0.35);\n  }\n\n  &-image {\n    @apply rounded-full;\n    @apply w-full;\n    @apply h-full;\n  }\n}\n\n/deep/ .vue-simple-spinner {\n  border-color:\n    transparent\n    theme('colors.white')\n    theme('colors.white')\n    #{!important};\n  }\n\n</style>\n"]}]}