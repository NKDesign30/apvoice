{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/views/user/EditProfile.vue?vue&type=style&index=0&id=39ac8275&lang=scss&scoped=true&","dependencies":[{"path":"/app/src/views/user/EditProfile.vue","mtime":1689925550462},{"path":"/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJlYWRvbmx5IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjOwp9CgouYnV0dG9uLXBvc2l0aW9uaW5nIHsKICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDY0MHB4KSB7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwoKICAgIGJ1dHRvbiB7CiAgICAgIG1hcmdpbjogMCAwIDIwcHggMDsKICAgIH0KCiAgICAuYnV0dG9uLS1wcmltYXJ5IHsKICAgICAgb3JkZXI6IDE7CiAgICB9CgogICAgLmJ1dHRvbi0tbmFrZWQgewogICAgICBvcmRlcjogMjsKICAgIH0KICB9Cn0KCi5zdWJtaXQtYnV0dG9uIHsKICBAYXBwbHkgc2hhZG93LWhhcmQtZGFyazsKICBAYXBwbHkgdGV4dC13aGl0ZTsKCiAgJi5pcy1idXN5IHsKICAgIEBhcHBseSBwbC02ICN7IWltcG9ydGFudH07CiAgfQp9CgouYW5jaG9yIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgdmlzaWJpbGl0eTogaGlkZGVuOwogIHRvcDogdGhlbWUoInNwYWNpbmcuMjQiKTsKfQo="},{"version":3,"sources":["EditProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2uBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"EditProfile.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <!--eslint-disable max-len -->\n  <apo-wait for=\"auth.user\">\n    <template #waiting>\n      <apo-loading-overlay class=\"my-15\" :message=\"$t('loaders.profile')\" />\n    </template>\n\n    <div class=\"mb-16 edit-profile\">\n      <div class=\"container\">\n        <div class=\"flex flex-col items-center mt-16\">\n          <apo-profile-picture image-class=\"w-32 h-32\" is-editable :user=\"user\" @input=\"onInput\" />\n\n          <div class=\"flex flex-col justify-center w-full px-8 mt-12 tablet:px-0 tablet:flex-row\">\n            <div class=\"tablet:mr-4 tablet:w-5/12\">\n              <apo-input-label v-text=\"$t('pages.editProfile.general.form.formOfAddress.label')\" />\n\n              <apo-radio-button-group\n                v-model=\"form.formOfAddress\"\n                class=\"flex justify-between mt-2 tablet:flex-col desktop:flex-row tablet:justify-start\"\n              >\n                <apo-radio-button\n                  id=\"form-of-address-mrs\"\n                  :label=\"$t('pages.editProfile.general.form.formOfAddress.mrs')\"\n                  value=\"mrs\"\n                />\n\n                <apo-radio-button\n                  id=\"form-of-address-mr\"\n                  class=\"desktop:ml-16 tablet:mt-4 desktop:mt-0\"\n                  :label=\"$t('pages.editProfile.general.form.formOfAddress.mr')\"\n                  value=\"mr\"\n                />\n              </apo-radio-button-group>\n            </div>\n\n            <div class=\"mt-8 tablet:mt-0 tablet:ml-4 tablet:w-5/12\">\n              <apo-input-label v-text=\"$t('pages.editProfile.general.form.title')\" />\n\n              <apo-select v-model=\"form.title\" class=\"mt-2\">\n                <option value=\"dr.med.dent.\">\n                  Dr. med. Dent.\n                </option>\n                <option value=\"dr.dr.\">\n                  Dr. Dr.\n                </option>\n              </apo-select>\n            </div>\n          </div>\n\n          <div class=\"w-full px-8 mt-12 tablet:px-0 tablet:flex tablet:justify-center\">\n            <div class=\"w-full tablet:mr-4 tablet:w-5/12\">\n              <apo-input-label v-text=\"$t('pages.editProfile.general.form.firstname')\" />\n\n              <apo-input v-model=\"form.firstName\" class=\"mt-2\" @keydown.enter=\"submit\" />\n\n              <apo-input-error :errors=\"errors\" field=\"first_name\" />\n            </div>\n            <div class=\"w-full mt-8 tablet:mt-0 tablet:ml-4 tablet:w-5/12\">\n              <apo-input-label v-text=\"$t('pages.editProfile.general.form.surname')\" />\n\n              <apo-input v-model=\"form.lastName\" class=\"mt-2\" @keydown.enter=\"submit\" />\n\n              <apo-input-error :errors=\"errors\" field=\"last_name\" />\n            </div>\n          </div>\n\n          <div\n            class=\"w-full px-8 mt-12 tablet:px-12 desktop:px-0 tablet:flex tablet:justify-center tablet:flex-wrap desktop:flex-no-wrap\"\n          >\n            <div class=\"w-full desktop:mr-4 desktop:w-5/12\">\n              <apo-input-label v-text=\"$t('pages.editProfile.general.form.job')\" />\n\n              <apo-select v-model=\"form.job\" class=\"mt-2\">\n                <option\n                  v-for=\"(job, index) in languageSpecificJobs\"\n                  :key=\"index\"\n                  :value=\"job\"\n                  v-text=\"$t(`data.profile.job.${job}`)\"\n                />\n              </apo-select>\n\n              <apo-input-error :errors=\"errors\" field=\"job\" />\n            </div>\n\n            <div\n              class=\"mt-8 desktop:mt-0 desktop:ml-4 tablet:pr-2 desktop:pr-0 tablet:w-6/12 desktop:w-3/12\"\n            >\n              <apo-input-label v-text=\"$t('pages.editProfile.general.form.workingSince')\" />\n\n              <apo-input\n                v-model=\"form.workingSince\"\n                class=\"mt-2\"\n                type=\"number\"\n                @keydown.enter=\"submit\"\n              />\n\n              <apo-input-error :errors=\"errors\" field=\"working_since\" />\n            </div>\n            <div\n              class=\"mt-8 desktop:mt-0 desktop:ml-2 tablet:pl-2 desktop:pl-0 tablet:w-6/12 desktop:w-2/12\"\n            >\n              <apo-input-label v-text=\"$t('pages.editProfile.general.form.age')\" />\n\n              <apo-select v-model=\"form.age\" class=\"mt-2\">\n                <option v-for=\"(age, index) in ages\" :key=\"index\" :value=\"age\" v-text=\"age\" />\n              </apo-select>\n\n              <apo-input-error :errors=\"errors\" field=\"age\" />\n            </div>\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-16\">\n            <a id=\"tasks-and-priorities\" class=\"anchor\" />\n            <h1\n              class=\"my-2 text-3xl text-center tablet:text-5xl desktop:text-6xl\"\n              v-text=\"$t('pages.editProfile.tasksAndPriorities.headline')\"\n            />\n            <div class=\"text-center\" v-text=\"$t('pages.editProfile.tasksAndPriorities.hint')\" />\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-12 tablet:mx-0 tablet:flex tablet:justify-between\">\n            <div class=\"w-full mt-12 tablet:mt-0 tablet:w-1/2 desktop:w-1/2\">\n              <div class=\"mb-10 font-bold\" v-text=\"$t('pages.editProfile.tasks.headline')\" />\n              <div v-for=\"taskValue in tasks\" :key=\"`task-${taskValue}`\" class=\"mt-4\">\n                <apo-checkbox\n                  :id=\"`task-${taskValue}`\"\n                  v-model=\"form.tasks\"\n                  :name=\"taskValue\"\n                  :label=\"$t(`data.profile.task.${taskValue}`)\"\n                  :value=\"taskValue\"\n                />\n              </div>\n            </div>\n            <div class=\"w-full tablet:w-1/2 desktop:w-1/3\">\n              <div class=\"mb-10 font-bold\" v-text=\"$t('pages.editProfile.priorities.headline')\" />\n              <div\n                v-for=\"priorityValue in priorities\"\n                :key=\"`priority-${priorityValue}`\"\n                class=\"mt-4\"\n              >\n                <apo-checkbox\n                  :id=\"`priority-${priorityValue}`\"\n                  v-model=\"form.priorities\"\n                  :name=\"priorityValue\"\n                  :label=\"$t(`data.profile.priority.${priorityValue}`)\"\n                  :value=\"priorityValue\"\n                />\n\n                <apo-input\n                  v-if=\"\n                    `priority-${priorityValue}` === 'priority-others' &&\n                      form.priorities.indexOf('others') !== -1\n                  \"\n                  id=\"priority-others-custom\"\n                  v-model=\"form.otherPriorities\"\n                  class=\"w-full mt-4 tablet:mr-8 tablet:w-auto\"\n                  type=\"text\"\n                  @keydown.enter=\"submit\"\n                />\n              </div>\n\n              <apo-input-error :errors=\"errors\" field=\"other_priorities\" />\n\n              <apo-input-error :errors=\"errors\" field=\"priorities\" />\n            </div>\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-16\">\n            <a id=\"your-pharmacy\" class=\"anchor\" />\n            <h1\n              class=\"my-2 text-3xl text-center tablet:text-5xl desktop:text-6xl\"\n              v-text=\"$tc('pages.editProfile.pharmacies.yourPharmacy', form.pharmacies.length)\"\n            />\n            <div>\n              <div class=\"px-4 mb-8\">\n                <apo-input-label\n                  v-if=\"language != 'de' && language != 'at'\"\n                  for=\"pharmacy-pun\"\n                  class=\"mb-4\"\n                  v-text=\"$t('modules.pharmacySummary.form.punCode')\"\n                />\n                <apo-input\n                  v-if=\"language != 'de' && language != 'at'\"\n                  id=\"pharmacy-pun\"\n                  v-model=\"myPun\"\n                  :placeholder=\"$t('modules.pharmacySummary.form.punCode')\"\n                  @input=\"update\"\n                />\n                <div v-if=\"errorPun.length\" style=\"color:red\">\n                  {{ errorPun }}\n                </div>\n                <div v-if=\"sucessPun.length\" style=\"color:green\">\n                  {{ sucessPun }}\n                </div>\n\n                <apo-input-label\n                  v-if=\"language != 'de' && language != 'at'\"\n                  for=\"pharmacy-name\"\n                  class=\"mb-4\"\n                  v-text=\"$t('modules.pharmacySummary.form.pharmacyName')\"\n                />\n                <apo-input\n                  v-if=\"language != 'de' && language != 'at'\"\n                  id=\"pharmacy-name\"\n                  v-model=\"PharmacyName\"\n                  :placeholder=\"$t('modules.pharmacySummary.form.pharmacyName')\"\n                  class=\"mt-2 readonly\"\n                />\n\n                <apo-pharmacies-fuzzy-search\n                  @selected=\"onSelectPharmacy\"\n                  v-if=\"language == 'de' || language == 'at'\"\n                >\n                  <div class=\"flex flex-col mt-2 tablet:flex-row\">\n                    <span class=\"text-gray-900 tablet:mr-2\"\n                      >{{ $t(\"general.lookingForPharmacy\") }}\n                    </span>\n                    <router-link :to=\"{ name: 'contact' }\" class=\"text-gray-800 underline\">\n                      {{ $t(\"general.getInTouch\") }}\n                    </router-link>\n                  </div>\n                  <div class=\"w-full mt-4\" v-html=\"$t('general.fuzzySearch.hint')\" />\n                </apo-pharmacies-fuzzy-search>\n              </div>\n              <apo-add-pharmacy-form\n                v-if=\"language == 'de' || language == 'at'\"\n                :form=\"pharmacyForm\"\n                read-only\n              />\n            </div>\n            <div v-if=\"language == 'de' || language == 'at'\">\n              <apo-pharmacy-summary v-model=\"form.pharmacies\" />\n            </div>\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-16\">\n            <a id=\"your-account\" class=\"anchor\" />\n            <h1\n              class=\"my-2 text-3xl text-center tablet:text-5xl desktop:text-6xl\"\n              v-text=\"$t('pages.editProfile.account.headline')\"\n            />\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-12\">\n            <div class=\"tablet:mr-4 tablet:w-1/2\">\n              <apo-input-label v-text=\"$t('general.emailAddress')\" />\n\n              <apo-input\n                v-model=\"form.account.email\"\n                class=\"mt-2 readonly\"\n                readonly\n                @keydown.enter=\"submit\"\n              />\n\n              <apo-input-error :errors=\"errors\" field=\"account_email\" />\n            </div>\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-8 tablet:mt-12 tablet:flex tablet:justify-center\">\n            <div class=\"tablet:mr-4 tablet:w-1/2\">\n              <apo-input-label v-text=\"$t('pages.editProfile.account.newEmailAddress')\" />\n\n              <apo-input v-model=\"form.account.newEmail\" class=\"mt-2\" @keydown.enter=\"submit\" />\n            </div>\n            <div class=\"mt-8 tablet:mt-0 tablet:ml-4 tablet:w-1/2\">\n              <apo-input-label v-text=\"$t('pages.editProfile.account.confirmNewEmailAddress')\" />\n\n              <apo-input\n                v-model=\"form.account.newEmailConfirm\"\n                class=\"mt-2\"\n                @keydown.enter=\"submit\"\n              />\n            </div>\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-3\">\n            <p\n              v-if=\"\n                form.account.newEmail !== '' &&\n                  form.account.newEmailConfirm !== '' &&\n                  form.account.newEmail === form.account.newEmailConfirm\n              \"\n              v-html=\"$t('pages.editProfile.account.newEmailAddressNotification')\"\n            />\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-2\">\n            <apo-input-error :errors=\"errors\" field=\"account_new_email\" />\n          </div>\n\n          <div class=\"w-10/12 mx-auto mt-8 tablet:mt-12 tablet:flex tablet:justify-center\">\n            <div class=\"tablet:mr-4 tablet:w-1/2\">\n              <apo-input-label v-text=\"$t('general.password')\" />\n\n              <apo-input\n                v-model=\"form.account.password\"\n                type=\"password\"\n                class=\"mt-2\"\n                @keydown.enter=\"submit\"\n              />\n            </div>\n            <div class=\"mt-8 tablet:mt-0 tablet:ml-4 tablet:w-1/2\">\n              <apo-input-label v-text=\"$t('pages.editProfile.account.confirmPassword')\" />\n\n              <apo-input\n                v-model=\"form.account.passwordconfirm\"\n                type=\"password\"\n                class=\"mt-2\"\n                @keydown.enter=\"submit\"\n              />\n            </div>\n          </div>\n\n          <div class=\"mt-2\">\n            <apo-input-error :errors=\"errors\" field=\"account_password\" />\n          </div>\n\n          <div class=\"flex mt-12 button-positioning\">\n            <apo-button\n              class=\"mr-6 text-gray-900 button button--naked button--small shadow-hard\"\n              @click.native=\"$router.push({ name: 'profile' })\"\n              v-text=\"$t('general.cancel')\"\n            />\n\n            <apo-button\n              class=\"ml-4 submit-button button button--primary button--small\"\n              :class=\"{ 'is-busy cursor-wait': isBusy }\"\n              :disabled=\"isBusy\"\n              @click.native=\"submit\"\n            >\n              <apo-spinner v-if=\"isBusy\" class=\"mr-4\" size=\"small\" />\n\n              <span v-text=\"$t('general.save')\" />\n            </apo-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </apo-wait>\n</template>\n\n<script>\nimport head from \"lodash/head\";\nimport { mapState, mapGetters, mapActions } from \"vuex\";\nimport store from \"@/store\";\nimport AddPharmacyForm from \"@/components/form-renderer/AddPharmacyForm.vue\";\nimport RadioButton from \"@/components/form/RadioButton.vue\";\nimport RadioButtonGroup from \"@/components/form/RadioButtonGroup.vue\";\nimport Checkbox from \"@/components/form/Checkbox.vue\";\nimport Select from \"@/components/form/Select.vue\";\nimport Input from \"@/components/form/Input.vue\";\nimport InputError from \"@/components/form/InputError.vue\";\nimport InputLabel from \"@/components/form-renderer/InputLabel.vue\";\nimport PharmacySummary from \"@/components/pharmacies/PharmacySummary.vue\";\nimport LoadingOverlay from \"@/components/ui/LoadingOverlay.vue\";\nimport UserService from \"@/services/api/UserService\";\nimport RestErrors from \"@/services/form/RestErrors\";\nimport {\n  AUTH_FETCH_CURRENT_USER,\n  FORMS_FETCH_FORM,\n  PHARMACIES_FETCH_PUN,\n  PHARMACIES_UPDATE_PUN_ACTION\n} from \"@/store/types/action-types\";\nimport { canonicalTag } from \"@/services/utils\";\nimport PharmaciesFuzzySearch from \"@/components/form-renderer/PharmaciesFuzzySearch.vue\";\n\nexport default {\n  components: {\n    \"apo-input-error\": InputError,\n    \"apo-input-label\": InputLabel,\n    \"apo-radio-button\": RadioButton,\n    \"apo-radio-button-group\": RadioButtonGroup,\n    \"apo-checkbox\": Checkbox,\n    \"apo-pharmacy-summary\": PharmacySummary,\n    \"apo-select\": Select,\n    \"apo-input\": Input,\n    \"apo-loading-overlay\": LoadingOverlay,\n    \"apo-add-pharmacy-form\": AddPharmacyForm,\n    \"apo-pharmacies-fuzzy-search\": PharmaciesFuzzySearch\n  },\n\n  head() {\n    return {\n      title: {\n        inner: this.$t(\"pages.editProfile.meta.title\")\n      },\n      link: [canonicalTag(this.$route)]\n    };\n  },\n\n  data() {\n    return {\n      errorPun: \"\",\n      sucessPun: \"\",\n      myPun: \"\",\n      PharmacyName: this.PharmacyNamec,\n      form: {\n        formOfAddress: \"\",\n        title: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        job: \"\",\n        age: \"\",\n        workingSince: \"\",\n        priorities: [],\n        otherPriorities: \"\",\n        tasks: [],\n        account: {\n          email: \"\",\n          newEmail: \"\",\n          newEmailConfirm: \"\",\n          password: \"\",\n          passwordconfirm: \"\"\n        },\n        pharmacies: \"\",\n        expertOnlyPharmacies: []\n      },\n      priorities: [\n        \"none\",\n        \"purchasing\",\n        \"nutrition\",\n        \"homeopathy\",\n        \"pain\",\n        \"seniors\",\n        \"mother_and_child\",\n        \"vitamins\",\n        \"others\"\n      ],\n      tasks: [\"consulting\", \"purchasing\", \"productmanagement\", \"others\"],\n      jobs: [\n        \"pharmacist\",\n        \"pharmacist_assistant\",\n        \"pharmacy_assistant_or_technician\",\n        \"pharmaceutical_engineer\",\n        \"pharmaceutical_commercial_employee\",\n        \"student_pharmaceutical_technician\",\n        \"other\"\n      ],\n      ages: [\"< 24\", \"25 - 34\", \"35 - 44\", \"45 - 54\", \"55 - 64\", \"65 +\"],\n      isBusy: false,\n      errors: new RestErrors(),\n      profilePicture: null\n    };\n  },\n\n  computed: {\n    ...mapState({\n      user: state => state.auth.user,\n      settings: state => state.settings.settings\n    }),\n    PunCode() {\n      return this.$store.getters.getPun;\n    },\n    PharmacyNamec() {\n      return this.$store.getters.getName;\n    },\n    ...mapGetters([\"language\"]),\n\n    ...mapGetters([\"getForm\"]),\n\n    ...mapState({\n      form_newmail(state) {\n        return state.forms.forms.find(form => form.id === this.formId);\n      }\n    }),\n    pharmacyForm() {\n      return [\n        {\n          type: \"textInput\",\n          id: \"pharmacy-name\",\n          ref: \"pharmacyName\",\n          model: \"\"\n        },\n        {\n          type: \"selectInput\",\n          id: \"pharmacy-country\",\n          ref: \"pharmacyCountry\",\n          model: \"germany\",\n          options: [\n            {\n              value: \"germany\",\n              text: this.$t(\"modules.pharmacySummary.form.germany\")\n            },\n            {\n              value: \"denmark\",\n              text: this.$t(\"modules.pharmacySummary.form.denmark\")\n            },\n            {\n              value: \"poland\",\n              text: this.$t(\"modules.pharmacySummary.form.poland\")\n            },\n            {\n              value: \"czechRepublic\",\n              text: this.$t(\"modules.pharmacySummary.form.czechRepublic\")\n            },\n            {\n              value: \"austria\",\n              text: this.$t(\"modules.pharmacySummary.form.austria\")\n            },\n            {\n              value: \"switzerland\",\n              text: this.$t(\"modules.pharmacySummary.form.switzerland\")\n            },\n            {\n              value: \"france\",\n              text: this.$t(\"modules.pharmacySummary.form.france\")\n            },\n            {\n              value: \"luxembourg\",\n              text: this.$t(\"modules.pharmacySummary.form.luxembourg\")\n            },\n            {\n              value: \"belgium\",\n              text: this.$t(\"modules.pharmacySummary.form.belgium\")\n            },\n            {\n              value: \"netherlands\",\n              text: this.$t(\"modules.pharmacySummary.form.netherlands\")\n            }\n          ]\n        },\n        {\n          type: \"textInput\",\n          id: \"pharmacy-street\",\n          ref: \"pharmacyStreet\",\n          model: \"\"\n        },\n        {\n          type: \"textInput\",\n          id: \"pharmacy-street-no\",\n          ref: \"pharmacyStreetNo\",\n          model: \"\"\n        },\n        {\n          type: \"textInput\",\n          id: \"pharmacy-zip-code\",\n          ref: \"pharmacyZipCode\",\n          model: \"\"\n        },\n        {\n          type: \"textInput\",\n          id: \"pharmacy-city\",\n          ref: \"pharmacyCity\",\n          model: \"\"\n        }\n      ];\n    },\n\n    formId() {\n      const formConfig = this.getForm(\"apo_change_email_form\");\n\n      // console.log(formConfig);\n\n      return formConfig && formConfig.id ? formConfig.id : null;\n    },\n\n    languageSpecificJobs() {\n      if (this.settings.jobRoles) {\n        return this.settings.jobRoles;\n      }\n      return this.jobs;\n    }\n  },\n\n  watch: {\n    user: {\n      immediate: true,\n      handler(user) {\n        this.form.formOfAddress = user.formOfAddress || \"\";\n        this.form.title = user.title || \"\";\n        this.form.firstName = user.firstName || \"\";\n        this.form.lastName = user.lastName || \"\";\n        this.form.age = user.age || \"\";\n        this.form.job = user.job || \"\";\n        this.form.workingSince = user.workingSince || \"\";\n        this.form.tasks = user.tasks || [];\n        this.form.account.email = user.email || \"\";\n\n        user.expertOnlyPharmacies[0].forEach(field => {\n          this.pharmacyForm.forEach((element, index) => {\n            console.log();\n            if (field.title === element.ref) {\n              this.pharmacyForm[index].model = field.value;\n            }\n          });\n        });\n\n        this.form.pharmacies = (user.associatedPharmacies || [])\n          .map(pharmacy => pharmacy.pharmacy_unique_number)\n          .join(\",\");\n\n        this.form.priorities = (user.priorities || []).filter(\n          priority =>\n            [\"consulting\", \"purchasing\", \"productmanagement\", \"others\"].indexOf(priority) !== -1\n        );\n\n        const otherPriority = (user.priorities || []).filter(\n          priority =>\n            [\"consulting\", \"purchasing\", \"productmanagement\", \"others\"].indexOf(priority) === -1\n        );\n\n        this.form.otherPriorities = head(otherPriority) || \"\";\n      }\n    }\n  },\n\n  methods: {\n    ...mapActions([PHARMACIES_FETCH_PUN, PHARMACIES_UPDATE_PUN_ACTION]),\n    fetchNewMailForm() {\n      this.$store.dispatch(FORMS_FETCH_FORM, this.formId);\n    },\n\n    update() {\n      // this.$store.dispatch(PHARMACIES_UPDATE_PUN_ACTION, this.myPun);\n      this[PHARMACIES_UPDATE_PUN_ACTION](this.myPun).then(data => {\n        console.log(\"finished\");\n        console.log(data);\n        if (data != \"empty_data\") {\n          this.errorPun = \"\";\n          this.sucessPun = this.$t(\"modules.pharmacySummary.punSucess\");\n          this.PharmacyName = data.name;\n        } else {\n          this.errorPun = this.$t(\"modules.pharmacySummary.punError\");\n          this.sucessPun = \"\";\n        }\n      });\n    },\n\n    submit() {\n      const data = new FormData();\n\n      if (this.profilePicture !== null) {\n        data.append(\"profile_picture\", this.profilePicture);\n      }\n\n      data.append(\"account_email\", this.form.account.email);\n      data.append(\"account_new_email\", this.form.account.newEmail);\n      data.append(\"account_new_email_confirmation\", this.form.account.newEmailConfirm);\n      data.append(\"account_password\", this.form.account.password);\n      data.append(\"account_password_confirmation\", this.form.account.passwordconfirm);\n      data.append(\"age\", this.form.age);\n      data.append(\"first_name\", this.form.firstName);\n      data.append(\"form_of_address\", this.form.formOfAddress);\n      data.append(\"last_name\", this.form.lastName);\n      data.append(\"job\", this.form.job);\n      data.append(\"title\", this.form.title);\n      data.append(\"working_since\", this.form.workingSince);\n\n      this.form.expertOnlyPharmacies = [\n        this.pharmacyForm.map(field => ({\n          title: field.ref,\n          value: field.model\n        }))\n      ];\n      data.append(\"expert_only_pharmacies\", JSON.stringify(this.form.expertOnlyPharmacies));\n\n      if (this.form.priorities.indexOf(\"others\") !== -1) {\n        data.append(\"other_priorities\", this.form.otherPriorities);\n      } else {\n        data.append(\"other_priorities\", \"\");\n      }\n\n      this.form.priorities.forEach(priority => {\n        data.append(\"priorities[]\", priority);\n      });\n\n      this.form.tasks.forEach(task => {\n        data.append(\"tasks[]\", task);\n      });\n\n      this.form.pharmacies.split(\",\").forEach(pharmacy => {\n        data.append(\"associated_pharmacies[]\", pharmacy);\n      });\n\n      this.isBusy = true;\n\n      // Is Mail Change\n      // this.fetchNewMailForm();\n      // if (this.form.newEmail === this.form.newEmailConfirm){\n      // }\n\n      // Update User Profile\n      UserService.updateUserProfile(this.user, data)\n        .then(() => {\n          this.$store.dispatch(AUTH_FETCH_CURRENT_USER);\n        })\n        .catch(({ response }) => {\n          this.errors.clear();\n\n          if (response.status === 400 && response.data.code === \"rest_invalid_param\") {\n            this.errors.assign(response.data.data.params);\n          }\n        })\n        .finally(() => {\n          this.isBusy = false;\n        });\n\n      UserService.updatePunCode(this.user, data.associated_pharmacies[0])\n        .then(() => {\n          this.$store.dispatch(AUTH_FETCH_CURRENT_USER);\n        })\n        .catch(({ response }) => {\n          this.errors.clear();\n\n          if (response.status === 400 && response.data.code === \"rest_invalid_param\") {\n            this.errors.assign(response.data.data.params);\n          }\n        })\n        .finally(() => {\n          this.isBusy = false;\n        });\n    },\n\n    language() {\n      return this.language;\n    },\n\n    onInput(event) {\n      // eslint-disable-next-line\n      this.profilePicture = event.target.files[0];\n    },\n\n    onSelectPharmacy(pharmacy) {\n      this.pharmacyForm[0].model = pharmacy.name;\n      this.pharmacyForm[2].model = pharmacy.street;\n      this.pharmacyForm[3].model = pharmacy.number;\n      this.pharmacyForm[4].model = pharmacy.zip;\n      this.pharmacyForm[5].model = pharmacy.city;\n    }\n  },\n\n  created() {},\n  mounted() {\n    if (this.$route.hash) {\n      this.$nextTick(() => {\n        window.location.href = this.$route.hash;\n      });\n    }\n    this[PHARMACIES_FETCH_PUN]().then(data => {\n      this.myPun = data.pharmacy_unique_number;\n      this.PharmacyName = data.name;\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.readonly {\n  background-color: #ccc;\n}\n\n.button-positioning {\n  @media only screen and (max-width: 640px) {\n    flex-direction: column;\n\n    button {\n      margin: 0 0 20px 0;\n    }\n\n    .button--primary {\n      order: 1;\n    }\n\n    .button--naked {\n      order: 2;\n    }\n  }\n}\n\n.submit-button {\n  @apply shadow-hard-dark;\n  @apply text-white;\n\n  &.is-busy {\n    @apply pl-6 #{!important};\n  }\n}\n\n.anchor {\n  position: relative;\n  visibility: hidden;\n  top: theme(\"spacing.24\");\n}\n</style>\n"]}]}