{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/views/TrainingSuccessPage.vue?vue&type=style&index=0&id=70842dae&lang=scss&scoped=true&","dependencies":[{"path":"/app/src/views/TrainingSuccessPage.vue","mtime":1690462324910},{"path":"/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50aGVtZS10cmFpbmluZyB7CiAgLmJ1dHRvbi1jbGFzcyB7CiAgICBAYXBwbHkgYmctdHJhaW5pbmctNTAwOwogIH0KfQoudGhlbWUtc2NpZW50aWZpYyB7CiAgLmJ1dHRvbi1jbGFzcyB7CiAgICBAYXBwbHkgYmctc2NpZW50aWZpYy01MDA7CiAgfQp9Cg=="},{"version":3,"sources":["TrainingSuccessPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TrainingSuccessPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <!--eslint-disable max-len -->\n  <div class=\"training-success-page\">\n    <apo-user-dashboard>\n      <template #logo>\n        <img\n          v-if=\"logo\"\n          class=\"training-success-page__logo logo\"\n          :src=\"logo\"\n          :alt=\"logoAlt\"\n        >\n      </template>\n      <template #head>\n        <h2 class=\"container -mt-24 text-3xl font-bold tablet:text-6xl\">\n          {{ success.title }}\n        </h2>\n      </template>\n      <template #profile>\n        <apo-training-overview-user-dashboard-training-activity />\n      </template>\n      <template #body>\n        <h3 class=\"mb-4 text-3xl\">\n          {{ success.success_message }}\n        </h3>\n        <div class=\"text-xl description\">\n          <p>\n            {{ success.copy_success_message }}\n          </p>\n        </div>\n        <div class=\"mt-8 training-success-page__cta-button\">\n          <router-link\n            v-if=\"!complete\"\n            :to=\"{\n              name: origin,\n              params: {\n                series_slug: currentTrainingSeries.slug,\n                training_slug: training.slug,\n                lesson_id: nextLesson.lesson_id\n              }\n            }\"\n            tag=\"apo-button\"\n            class=\"text-white button--tiny shadow-hard-dark training-success-continue button-class\"\n            v-text=\"\n              $t('trainings.buttons.continueWithLesson', { lesson: nextLesson.meta_infos.title })\n            \"\n          />\n          <apo-button\n            v-else\n            class=\"text-white  button--tiny shadow-hard-dark training-success-certificate button-class\"\n            @click=\"download(training)\"\n            v-text=\"$t('trainings.yourCertificate')\"\n          />\n        </div>\n      </template>\n    </apo-user-dashboard>\n    <div class=\"container py-12 mx-auto text-center training-sucess-page__copy\">\n      <p>{{ success.copy }}</p>\n      <div\n        v-if=\"complete\"\n        class=\"mt-6 training-sucess-page__summary-btn\"\n      >\n        <router-link\n          :to=\"{\n            name: 'training-summary',\n            params: { slug: slug, id: trainingSeriesId, theme: theme, origin: origin }\n          }\"\n          tag=\"apo-button\"\n          class=\"text-white button--tiny shadow-hard-dark training-success-summary button-class\"\n          v-text=\"$t('general.summary')\"\n        />\n      </div>\n    </div>\n    <div class=\"px-4 py-6 mb-4 training-teaser tablet:px-0\">\n      <div class=\"container training-teaser__item\">\n        <apo-training-lesson-list\n          :lessons=\"training.lessons\"\n          :seriesslug=\"currentTrainingSeries.slug\"\n          :trainingslug=\"training.slug\"\n          without-body\n        />\n      </div>\n    </div>\n    <div class=\"container pb-12 mx-auto text-center training-sucess-page__hint\">\n      <p\n        v-if=\"success.footer_copy\"\n        class=\"mb-4\"\n      >\n        {{ success.footer_copy }}\n      </p>\n      <template v-if=\"complete\">\n        <p\n          class=\"mb-4\"\n          v-text=\"$t('trainings.successPage.hint.nextTraining')\"\n        />\n        <router-link\n          :to=\"{ name: origin }\"\n          tag=\"apo-button\"\n          class=\"text-white  button--tiny shadow-hard-dark training-success-nextTraining button-class\"\n          v-text=\"$t('trainings.buttons.nextTraining')\"\n        />\n        <div\n          v-if=\"language != 'de' && language != 'at'\"\n          id=\"related\"\n        >\n          <h3\n            v-if=\"!isAllRelatedcomplete\"\n            class=\"mt-10 mb-10 text-gray-700\"\n          >\n            Related Trainings\n          </h3>\n          <h3\n            v-if=\"isAllRelatedcomplete\"\n            class=\"mt-10 mb-10 text-gray-700\"\n            v-text=\"$t('trainings.successPage.hint.latestIncompleteT')\"\n          >\n  \n          </h3>\n          <div\n            v-for=\"(training, index) in this.currentTrainingSeries.related\"\n            v-if=\"!isAllRelatedcomplete\"\n            :key=\"index\"\n          >\n            <related-training\n              :current-training=\"training\"\n              :theme=\"theme\"\n            />\n          </div>\n          <div\n            v-if=\"isAllRelatedcomplete\"\n            class=\"flex flex-col w-full pb-5 mb-5 border-b-2 text-left\"\n          >\n            <single-training\n              :training=\"LatestIncompleteTrainings[0]\"\n              :theme=\"theme\"\n              :relation=\"true\"\n            />\n          </div>\n        </div>\n      </template>\n      <template v-else>\n        <p v-text=\"$t('trainings.successPage.hint.noTime')\" />\n        <p>\n          <span\n            class=\"mr-1\"\n            v-text=\"$t('trainings.successPage.hint.readHere')\"\n          />\n          <router-link\n            class=\"inline-block underline training-success-summary\"\n            :to=\"{ name: 'training-summary', params: { slug: slug, id: trainingSeriesId } }\"\n            v-text=\"$t('general.summary')\"\n          />\n        </p>\n        <router-link\n          :to=\"{ name: origin }\"\n          class=\"inline-block mt-4 underline training-success-abort\"\n          v-text=\"$t('general.abort')\"\n        />\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nimport get from 'lodash/get';\nimport { TRAININGS_UPDATE_CURRENT_TRAINING } from '@/store/types/action-types';\nimport TrainingTeaserLessonList from '@/components/training/teaser/TrainingTeaserLessonList.vue';\nimport UserDashboard from '@/components/ui/UserDashboard.vue';\nimport downloadCertificate from '@/mixins/download-certificate';\nimport SurveyService from '@/services/api/SurveyService';\nimport SurveyAvailableListItem from '@/components/survey/overview/SurveyAvailableListItem.vue';\nimport TrainingOverviewUserDashboardTrainingActivity from '@/components/training/overview/TrainingOverviewUserDashboardTrainingActivity.vue';\nimport TrainingOverviewSurveyTeaser from '@/components/training/overview/TrainingOverviewSurveyTeaser.vue';\nimport { canonicalTag } from '@/services/utils';\nimport relatedTrainings from '@/components/V2/training/RelatedTrainings.vue';\nimport training from '@/components/V2/training/training.vue';\n\nexport default {\n  components: {\n    'apo-training-lesson-list': TrainingTeaserLessonList,\n    'apo-user-dashboard': UserDashboard,\n    'apo-survey-available-list-item': SurveyAvailableListItem,\n    'apo-training-overview-user-dashboard-training-activity': TrainingOverviewUserDashboardTrainingActivity,\n    'apo-training-overview-survey-teaser': TrainingOverviewSurveyTeaser,\n    'related-training': relatedTrainings,\n    'single-training': training,\n  },\n\n  mixins: [downloadCertificate()],\n\n  props: {\n    origin: {\n      type: String,\n      required: true,\n      validator(value) {\n        return ['scientific', 'trainings'].includes(value);\n      },\n    },\n  },\n\n  data() {\n    return {\n      survey: null,\n      second_survey: null,\n    };\n  },\n\n  head() {\n    return {\n      title: {\n        inner: this.$t('pages.trainings.success.meta.title'),\n      },\n      link: [canonicalTag(this.$route)],\n    };\n  },\n\n  computed: {\n    ...mapGetters([\n      'training',\n      'lesson',\n      'currentTrainingSeries',\n      'user',\n      'theme',\n      'trainingSeries',\n      'language',\n    ]),\n\n    // do not name this property isComplete, it comes to clashes with the downloadCertificate mixin\n    complete() {\n      return Boolean(\n        this.user.trainingResults[this.training.id]\n          && this.user.trainingResults[this.training.id].is_complete === '1',\n      );\n    },\n    LatestIncompleteTrainings() {\n      return this.trainingSeries\n        .filter(\n          item => item.trainings.length > 0\n            && parseInt(item.trainings[0].isPremium) === 0\n            && !this.istrainingcomplete(item),\n        )\n        .sort((a, b) => this.sortTrainings(a, b));\n    },\n    isAllRelatedcomplete() {\n      if (this.currentTrainingSeries.related.length == 0) {\n        return 1;\n      }\n      let check = 0;\n      /* this.currentTrainingSeries.related.forEach(item => {\n        this.istrainingcomplete(item) ? (check = 1) : \"\";\n      }); */\n      for (let i = 0; i < this.currentTrainingSeries.related.length; i++) {\n        this.istrainingcomplete(this.currentTrainingSeries.related[i]) ? (check = 1) : '';\n      }\n      if (check == 0) {\n        return 1;\n      }\n      return 0;\n    },\n    success() {\n      if (this.complete) {\n        return this.currentTrainingSeries.finishPage;\n      }\n      return this.lesson.success_page;\n    },\n    logo() {\n      return get(this.success, 'logo.sizes.large', false);\n    },\n    logoAlt() {\n      return get(this.success, 'logo.alt', '');\n    },\n    slug() {\n      return this.$route.params.slug;\n    },\n    trainingSeriesId() {\n      return this.training.trainingSeriesId;\n    },\n    nextLesson() {\n      return this.training.lessons.find(\n        lesson => !(\n          this.user.trainingResults[lesson.training_id]\n            && this.user.trainingResults[lesson.training_id].completed_lessons[lesson.lesson_id]\n        ),\n      );\n    },\n    // this property is necessary for the downloadCertificate mixin\n    currentTrainingId() {\n      return this.training.id;\n    },\n    hasActivatableSurvey() {\n      return false && !!parseInt(this.training.globals.survey_relation.has_activatable_survey, 10);\n    },\n    getSurveyId() {\n      return this.training.globals.survey_relation.survey;\n    },\n    getSecondSurveyId() {\n      return this.training.globals.survey_relation.second_survey;\n    },\n  },\n  watch: {\n    $route: {\n      immediate: true,\n      handler(route) {\n        if (route.params.id) {\n          this[TRAININGS_UPDATE_CURRENT_TRAINING](route.params);\n        }\n      },\n    },\n  },\n\n  methods: {\n    ...mapActions([TRAININGS_UPDATE_CURRENT_TRAINING]),\n    istrainingcomplete(item) {\n      return Boolean(\n        this.user.trainingResults[item.id] && this.user.trainingResults[item.id].is_complete === '1',\n      );\n    },\n    sortTrainings(a, b) {\n      {\n        const trainingResultA = this.user.trainingResults[a.trainings[0].id];\n        const trainingResultB = this.user.trainingResults[b.trainings[0].id];\n\n        if (parseInt(a.informations.boost) < parseInt(b.informations.boost)) {\n          console.log('ok');\n          return 1;\n        }\n\n        // first - put first those for which there no training result\n        if (trainingResultA !== undefined && trainingResultB === undefined) {\n          return 1;\n        }\n        if (trainingResultB !== undefined && trainingResultA === undefined) {\n          return -1;\n        }\n        if (trainingResultA !== undefined && trainingResultB !== undefined) {\n          // both trainings started => check for completion: first incomplete\n          if (trainingResultB.is_complete === '0' && trainingResultA.is_complete === '1') {\n            return 1;\n          }\n          if (trainingResultB.is_complete === '1' && trainingResultA.is_complete === '0') {\n            return -1;\n          }\n          if (trainingResultB.is_complete === '1' && trainingResultA.is_complete === '1') {\n            // both complete - order does not matter (completion date not available)\n            return 1;\n          }\n          if (trainingResultB.is_complete === '0' && trainingResultA.is_complete === '0') {\n            // neither complete => lessons completed?\n            const lessonsCompletedA = trainingResultA.completed_lessons.length;\n            const lessonsCompletedB = trainingResultA.completed_lessons.length;\n            if (lessonsCompletedA > lessonsCompletedB) {\n              return 1;\n            }\n            if (lessonsCompletedA >= lessonsCompletedB) {\n              // same number of lessons done - order does not matter\n              return -1;\n            }\n          }\n        } else if (trainingResultA === undefined && trainingResultB === undefined) {\n          // neither training started - order does not matter\n          return -1;\n        }\n      }\n    },\n  },\n\n  created() {\n    if (this.hasActivatableSurvey) {\n      SurveyService.fetch(this.getSurveyId).then(survey => {\n        this.survey = survey;\n      });\n      if (this.getSecondSurveyId) {\n        SurveyService.fetch(this.getSecondSurveyId).then(survey => {\n          this.second_survey = survey;\n        });\n      }\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.theme-training {\n  .button-class {\n    @apply bg-training-500;\n  }\n}\n.theme-scientific {\n  .button-class {\n    @apply bg-scientific-500;\n  }\n}\n</style>\n"]}]}