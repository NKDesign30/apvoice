{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/login/LoginForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/login/LoginForm.vue","mtime":1689925550360},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgZ2V0IGZyb20gJ2xvZGFzaC9nZXQnOwppbXBvcnQgVGV4dElucHV0IGZyb20gJ0AvY29tcG9uZW50cy9mb3JtLXJlbmRlcmVyL1RleHRJbnB1dC52dWUnOwppbXBvcnQgeyBBVVRIX0xPR0lOIH0gZnJvbSAnQC9zdG9yZS90eXBlcy9hY3Rpb24tdHlwZXMnOwppbXBvcnQgeyBBVVRIX1VQREFURV9TSE9XX1VQREFURV9QSEFSTUFDWV9NT0RBTCB9IGZyb20gJ0Avc3RvcmUvdHlwZXMvbXV0YXRpb24tdHlwZXMnOwppbXBvcnQgRnJvbnRwYWdlIGZyb20gJ0AvY29tcG9uZW50cy9mcm9udHBhZ2UvRnJvbnRwYWdlLnZ1ZSc7CmltcG9ydCBQYWdlU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2FwaS9QYWdlU2VydmljZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgJ2Fwby10ZXh0LWlucHV0JzogVGV4dElucHV0LAogICAgJ2Fwby1mcm9udHBhZ2UnOiBGcm9udHBhZ2UsCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICB9LAogICAgICBsb2dpblN0YXR1czogJycsCiAgICAgIGlzQnVzeTogZmFsc2UsCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGxvZ2luKCkgewogICAgICB0aGlzLmlzQnVzeSA9IHRydWU7CiAgICAgIHRoaXMubG9naW5TdGF0dXMgPSB0aGlzLiR0KCdwYWdlcy5sb2dpbi5tZXNzYWdlcy5wZW5kaW5nJyk7CgogICAgICB3aW5kb3cuYXhpb3MucG9zdCgnL3dwLWpzb24vand0LWF1dGgvdjEvdG9rZW4nLCB0aGlzLmZvcm0pCiAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGF0YSkuaW5jbHVkZXMoJ2hhc191cGRhdGVkX3BoYXJtYWN5X2FkZHJlc3MnKSkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoCiAgICAgICAgICAgICAgQVVUSF9VUERBVEVfU0hPV19VUERBVEVfUEhBUk1BQ1lfTU9EQUwsCiAgICAgICAgICAgICAgIWRhdGEuaGFzX3VwZGF0ZWRfcGhhcm1hY3lfYWRkcmVzcywKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubG9naW5TdGF0dXMgPSB0aGlzLiR0KCdwYWdlcy5sb2dpbi5tZXNzYWdlcy5zdWNjZXNzJyk7CgogICAgICAgICAgdGhpcy4kc3RvcmUKICAgICAgICAgICAgLmRpc3BhdGNoKEFVVEhfTE9HSU4sIHsKICAgICAgICAgICAgICB0b2tlbjogZGF0YS50b2tlbiwKICAgICAgICAgICAgICB1c2VyOiB7CiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLnVzZXJfZGlzcGxheV9uYW1lLAogICAgICAgICAgICAgICAgZW1haWw6IGRhdGEudXNlcl9lbWFpbCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgUGFnZVNlcnZpY2UuZ2V0UGFnZXMoKQogICAgICAgICAgICAgICAgLnRoZW4oZGF0YVBhZ2VzID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRQYWdlQ29udGVudCcsIGRhdGFQYWdlcyk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHRtcERhdGEgPSBkYXRhUGFnZXMuZmlsdGVyKHBhZ2UgPT4gcGFnZS5hY2Yuc2xpZGVzKTsKICAgICAgICAgICAgICAgICAgdG1wRGF0YS5mb3JFYWNoKHBhZ2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkU3RhZ2UnLCB7IG5hbWU6IHBhZ2Uuc2x1Zywgc3RhZ2U6IHsgbWluaW11bV9oZWlnaHQ6IHBhZ2UuYWNmLm1pbmltdW1faGVpZ2h0LCBzbGlkZXM6IHBhZ2UuYWNmLnNsaWRlcyB9IH0pOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5yZWRpcmVjdF9wYXRoKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICAgICAgICAgICAgcGF0aDogdGhpcy4kcm91dGUucXVlcnkucmVkaXJlY3RfcGF0aCwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnL3dlbGNvbWUnKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGNvbnN0IGVycm9yQ29kZSA9IGdldChlcnJvciwgJ3Jlc3BvbnNlLmRhdGEuY29kZScsICcnKS5yZXBsYWNlKC9cW2p3dF9hdXRoXF1ccysvZywgJycpOwoKICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGdldChlcnJvciwgJ3Jlc3BvbnNlLmRhdGEubWVzc2FnZScsICcnKTsKICAgICAgICAgIGNvbnN0IGVycm9yU3RhdHVzID0gZ2V0KGVycm9yLCAncmVzcG9uc2Uuc3RhdHVzJywgMCk7CgogICAgICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmRleE9mKCdZb3UgYXJlIHRlbXBvcmFyaWx5IGxvY2tlZCBvdXQnKSAhPT0gLTEgJiYgZXJyb3JTdGF0dXMgPT09IDUwMykgewogICAgICAgICAgICB0aGlzLmxvZ2luU3RhdHVzID0gdGhpcy4kdCgnZXJyb3JzLnRvb19tYW55X3JldHJpZXMnKTsKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFRoZSAnaW5jb3JyZWN0X3Bhc3N3b3JkJyBlcnJvciBtdXN0IGJlIHRyYW5zbGF0ZWQgb24gdGhlIGZyb250ZW5kLAogICAgICAgICAgICAgKiBiZWNhdXNlIHdvcmRmZW5jZSBwcm92aWRlcyBhbiB0cmFuc2xhdGlvbiBpc3N1ZSB0aGF0IGlzIG5vdCByZXNvbHZlZC4KICAgICAgICAgICAgICogTWF5YmUgdGhpcyBjYW4gYmUgZml4ZWQgaW4gdGhlIGZ1dHVyZS4KICAgICAgICAgICAgICogQGxpbmsgaHR0cHM6Ly93b3JkcHJlc3Mub3JnL3N1cHBvcnQvdG9waWMvY2FudC10cmFuc2xhdGUtZXJyb3ItdGhlLXVzZXJuYW1lLW9yLXBhc3N3b3JkLXlvdS1lbnRlcmVkLWlzLWluY29ycmVjdC8KICAgICAgICAgICAgKi8KICAgICAgICAgIH0gZWxzZSBpZiAoCiAgICAgICAgICAgIGVycm9yQ29kZSA9PT0gJ3Rvb19tYW55X3JldHJpZXMnCiAgICAgICAgICAgIHx8IGVycm9yQ29kZSA9PT0gJ2luY29ycmVjdF9wYXNzd29yZCcKICAgICAgICAgICkgewogICAgICAgICAgICAvLyBjb25zdCBtYXRjaCA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZS5tYXRjaCgvKFxkKykuKj8oXHcrKS8pOwogICAgICAgICAgICB0aGlzLmxvZ2luU3RhdHVzID0gdGhpcy4kdChgZXJyb3JzLiR7ZXJyb3JDb2RlfWApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5sb2dpblN0YXR1cyA9IGdldChlcnJvciwgJ3Jlc3BvbnNlLmRhdGEubWVzc2FnZScsICcnKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNCdXN5ID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIG9uUmVnaXN0ZXJDbGljaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9yZWdpc3RyYXRpb24nKTsKICAgIH0sCiAgfSwKfTsKCg=="},{"version":3,"sources":["LoginForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"LoginForm.vue","sourceRoot":"src/components/login","sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-wrapper\">\n      <div class=\"container py-24 mx-auto\">\n        <div class=\"flex flex-col items-center login\">\n          <h1\n            class=\"text-xs login__headline text-[25px]\"\n            v-html=\"$t('pages.login.intro')\"\n          />\n          <form\n            class=\"relative w-full max-w-2xl mt-12 tablet:mt-24\"\n            @submit.prevent=\"login\"\n          >\n            <apo-text-input\n              v-model=\"form.username\"\n              class=\"login-text-input-wrapper\"\n              input-class=\"login-text-input\"\n              :placeholder=\"$t('pages.login.form.username.placeholder')\"\n              :title=\"$t('pages.login.form.username.title')\"\n              type=\"text\"\n              @input=\"loginStatus = ''\"\n            >\n              <!-- <template #before>\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 70.8 79.5\"\n                  fill=\"hsla(0, 0%, 100%, 0.75)\"\n                  class=\"absolute w-4 h-4 ml-8\"\n                >\n                   eslint-disable-next-line max-len\n                  <path d=\"M35.4 36.4c-10 0-18.2-8.1-18.2-18.2C17.2 8.2 25.4 0 35.4 0s18.2 8.1 18.2 18.2c0 10-8.2 18.2-18.2 18.2zm35.4 43.1H0v-5c0-18.7 15.3-34 34-34h2.8c18.7 0 34 15.3 34 34v5z\" />\n                </svg>\n              </template> -->\n            </apo-text-input>\n\n            <apo-text-input\n              v-model=\"form.password\"\n              class=\"mt-6 login-text-input-wrapper\"\n              input-class=\"login-text-input\"\n              :placeholder=\"$t('pages.login.form.password.placeholder')\"\n              :title=\"$t('pages.login.form.password.title')\"\n              type=\"password\"\n              @input=\"loginStatus = ''\"\n            >\n              <!-- <template #before>\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 26 32\"\n                  fill=\"hsla(0, 0%, 100%, 0.75)\"\n                  class=\"absolute w-4 h-4 ml-8\"\n                >\n                   eslint-disable-next-line max-len\n                  <path d=\"M25 13h-2v-3c0-5.51-4.49-10-10-10S3 4.49 3 10v3H1c-.55 0-1 .45-1 1v17c0 .55.45 1 1 1h24c.55 0 1-.45 1-1V14c0-.55-.45-1-1-1zM5 10c0-4.41 3.59-8 8-8s8 3.59 8 8v3H5v-3zm9 13.72V25c0 .55-.45 1-1 1s-1-.45-1-1v-1.28c-.6-.35-1-.98-1-1.72 0-1.1.9-2 2-2s2 .9 2 2c0 .74-.4 1.38-1 1.72z\" />\n                </svg>\n              </template> -->\n            </apo-text-input>\n\n            <div\n              v-if=\"loginStatus\"\n              class=\"w-full mt-2 text-sm text-center text-white\"\n              v-html=\"$t(loginStatus)\"\n            />\n\n            <div\n              class=\"flex flex-wrap mt-8 -mx-2 tablet:flex-row tablet:flex-no-wrap\"\n            >\n              <div class=\"w-full px-2 tablet:w-1/2\">\n                <apo-button\n                  class=\"w-full text-white button button--primary \"\n                  :class=\"{ 'cursor-wait': isBusy }\"\n                  :disabled=\"isBusy\"\n                  type=\"button\"\n                  @click.native=\"onRegisterClick\"\n                  v-text=\"$t('pages.login.form.buttons.register')\"\n                />\n              </div>\n              <div class=\"order-first w-full px-2 mb-6 tablet:w-1/2 tablet:mb-0 tablet:order-last\">\n                <apo-button\n                  class=\"w-full text-blue-600 button--naked \"\n                  :class=\"{ 'cursor-wait': isBusy }\"\n                  :disabled=\"isBusy\"\n                  v-text=\"$t('pages.login.form.buttons.signin')\"\n                />\n              </div>\n            </div>\n\n            <div class=\"mt-16 text-center\">\n              <!-- eslint-disable max-len -->\n              <router-link\n                class=\"text-white border-b border-white hover:border-gray-transparent transition-normal transition-ease transition-border-color\"\n                :to=\"{ name: 'forgotten' }\"\n                v-text=\"$t('pages.login.form.buttons.forgotten')\"\n              />\n            <!-- eslint-enable max-len -->\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    <apo-frontpage />\n  </div>\n</template>\n\n<script>\n\nimport get from 'lodash/get';\nimport TextInput from '@/components/form-renderer/TextInput.vue';\nimport { AUTH_LOGIN } from '@/store/types/action-types';\nimport { AUTH_UPDATE_SHOW_UPDATE_PHARMACY_MODAL } from '@/store/types/mutation-types';\nimport Frontpage from '@/components/frontpage/Frontpage.vue';\nimport PageService from '@/services/api/PageService';\n\nexport default {\n  components: {\n    'apo-text-input': TextInput,\n    'apo-frontpage': Frontpage,\n  },\n\n  data() {\n    return {\n      form: {\n        username: '',\n        password: '',\n      },\n      loginStatus: '',\n      isBusy: false,\n    };\n  },\n\n  methods: {\n    login() {\n      this.isBusy = true;\n      this.loginStatus = this.$t('pages.login.messages.pending');\n\n      window.axios.post('/wp-json/jwt-auth/v1/token', this.form)\n        .then(({ data }) => {\n          if (Object.keys(data).includes('has_updated_pharmacy_address')) {\n            this.$store.commit(\n              AUTH_UPDATE_SHOW_UPDATE_PHARMACY_MODAL,\n              !data.has_updated_pharmacy_address,\n            );\n          }\n          this.loginStatus = this.$t('pages.login.messages.success');\n\n          this.$store\n            .dispatch(AUTH_LOGIN, {\n              token: data.token,\n              user: {\n                name: data.user_display_name,\n                email: data.user_email,\n              },\n            })\n            .then(() => {\n              PageService.getPages()\n                .then(dataPages => {\n                  this.$store.commit('addPageContent', dataPages);\n                  const tmpData = dataPages.filter(page => page.acf.slides);\n                  tmpData.forEach(page => {\n                    this.$store.commit('addStage', { name: page.slug, stage: { minimum_height: page.acf.minimum_height, slides: page.acf.slides } });\n                  });\n\n                  if (this.$route.query.redirect_path) {\n                    this.$router.replace({\n                      path: this.$route.query.redirect_path,\n                    });\n                  } else {\n                    this.$router.replace('/welcome');\n                  }\n                });\n            });\n        })\n        .catch(error => {\n          const errorCode = get(error, 'response.data.code', '').replace(/\\[jwt_auth\\]\\s+/g, '');\n\n          const errorMessage = get(error, 'response.data.message', '');\n          const errorStatus = get(error, 'response.status', 0);\n\n          if (errorMessage.indexOf('You are temporarily locked out') !== -1 && errorStatus === 503) {\n            this.loginStatus = this.$t('errors.too_many_retries');\n            /**\n             * The 'incorrect_password' error must be translated on the frontend,\n             * because wordfence provides an translation issue that is not resolved.\n             * Maybe this can be fixed in the future.\n             * @link https://wordpress.org/support/topic/cant-translate-error-the-username-or-password-you-entered-is-incorrect/\n            */\n          } else if (\n            errorCode === 'too_many_retries'\n            || errorCode === 'incorrect_password'\n          ) {\n            // const match = error.response.data.message.match(/(\\d+).*?(\\w+)/);\n            this.loginStatus = this.$t(`errors.${errorCode}`);\n          } else {\n            this.loginStatus = get(error, 'response.data.message', '');\n          }\n        })\n        .finally(() => {\n          this.isBusy = false;\n        });\n    },\n\n    onRegisterClick() {\n      this.$router.push('/registration');\n    },\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.login {\n  &-wrapper {\n    background: linear-gradient(120deg, theme('colors.blue.600'), theme('colors.blue.400'));\n\n    .button {\n      @apply py-6;\n      @apply px-4;\n    }\n  }\n\n  /deep/ &-text-input {\n    @apply pl-16;\n    @apply pr-8;\n    @apply py-6;\n    @apply text-white;\n\n    &:hover,\n    &:focus {\n      background-color: hsla(0, 0%, 100%, 0.08);\n      border-color: theme('colors.white');\n    }\n\n    &-wrapper {\n      @apply border-4;\n      @apply border-white;\n    }\n  }\n\n  &__headline {\n    @apply text-center;\n    @apply text-white;\n    @apply font-display;\n    @apply text-3xl;\n    line-height: 2.5rem;\n    font-weight: 300;\n\n    @screen tablet {\n      font-size: 3.125rem;\n      line-height: 3.75rem,\n    }\n\n    @screen desktop {\n      font-size: 3.75rem;\n      line-height: 4.375rem;\n    }\n  }\n\n\n}\n\n\n</style>\n"]}]}