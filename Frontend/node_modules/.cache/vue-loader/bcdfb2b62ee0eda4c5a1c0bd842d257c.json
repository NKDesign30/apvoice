{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/form-renderer/RegularForm.vue?vue&type=style&index=0&id=4b394bc6&lang=scss&scoped=true&","dependencies":[{"path":"/app/src/components/form-renderer/RegularForm.vue","mtime":1683275992560},{"path":"/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yZWd1bGFyLWZvcm0gewogICYtc3VibWl0LWJ1dHRvbiB7CiAgICBAYXBwbHkgc2hhZG93LWhhcmQtZGFyazsKICAgIEBhcHBseSB0ZXh0LXdoaXRlOwoKICAgICYuaXMtYnVzeSB7CiAgICAgIEBhcHBseSBwbC02ICN7IWltcG9ydGFudH07CiAgICB9CiAgfQp9Cgo="},{"version":3,"sources":["RegularForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"RegularForm.vue","sourceRoot":"src/components/form-renderer","sourcesContent":["<template>\n  <div class=\"regular-form\">\n    <div class=\"mt-20 -mx-12 flex flex-wrap\">\n      <div\n        v-for=\"field in fields\"\n        :key=\"field.id\"\n        class=\"px-12\"\n        :class=\"{\n          [getFieldClasses(field)]: true,\n          'hidden': field.type === 'hidden',\n        }\"\n      >\n        <template v-if=\"field.isVisible\">\n          <div class=\"mb-8 relative\">\n            <apo-input-label\n              v-if=\"field.labelPlacement !== 'hidden' && field.label\"\n              :for=\"getFieldId(field)\"\n              class=\"mb-4\"\n              v-html=\"field.label\"\n            />\n\n            <div\n              v-for=\"input in field.inputs\"\n              :key=\"input.id\"\n            >\n              <apo-input-label\n                v-if=\"field.subLabelPlacement !== 'hidden' && (input.label || input.customLabel)\"\n                :for=\"getFieldId(input)\"\n                class=\"mb-4\"\n                v-html=\"input.customLabel || input.label\"\n              />\n\n              <component\n                :is=\"getFormInputName(field)\"\n                :id=\"getFieldId(input)\"\n                class=\"mb-4\"\n                v-bind=\"input\"\n                :field=\"field\"\n                :value=\"input.value\"\n                @input=\"onFieldInput($event, field, input)\"\n                @keydown.enter=\"onEnterKey\"\n              />\n            </div>\n\n            <small\n              v-if=\"validation.has(field.id)\"\n              class=\"-mt-3 absolute pin-l pin-b text-red-500 text-xs font-bold\"\n              v-text=\"validation.get(field.id)\"\n            />\n          </div>\n        </template>\n      </div>\n\n      <div class=\"my-20 w-full flex justify-center\">\n        <apo-button\n          class=\"regular-form-submit-button button button--primary button--small\"\n          :class=\"{ 'is-busy cursor-wait': isBusy }\"\n          :disabled=\"isBusy\"\n          @click.native=\"submit\"\n        >\n          <apo-spinner\n            v-if=\"isBusy\"\n            class=\"mr-4\"\n            size=\"small\"\n          />\n\n          <span v-text=\"submitButtonText\" />\n        </apo-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport Checkbox from '@/components/form-renderer/Checkbox.vue';\nimport HiddenInput from '@/components/form-renderer/HiddenInput.vue';\nimport HtmlBlock from '@/components/form-renderer/HtmlBlock.vue';\nimport InputLabel from '@/components/form-renderer/InputLabel.vue';\nimport MultiSelectInput from '@/components/form-renderer/MultiSelectInput.vue';\nimport PharmacySummary from '@/components/form-renderer/PharmacySummary.vue';\nimport RadioButtons from '@/components/form-renderer/RadioButtons.vue';\nimport SelectInput from '@/components/form-renderer/SelectInput.vue';\nimport Textarea from '@/components/form-renderer/Textarea.vue';\nimport TextInput from '@/components/form-renderer/TextInput.vue';\nimport FormService from '@/services/api/FormService';\nimport FormValidation from '@/services/form/FormValidation';\n\nexport default {\n  components: {\n    'apo-checkbox': Checkbox,\n    'apo-hidden-input': HiddenInput,\n    'apo-html-block': HtmlBlock,\n    'apo-input-label': InputLabel,\n    'apo-multi-select-input': MultiSelectInput,\n    'apo-pharmacy-summary': PharmacySummary,\n    'apo-radio-buttons': RadioButtons,\n    'apo-select-input': SelectInput,\n    'apo-textarea': Textarea,\n    'apo-text-input': TextInput,\n  },\n\n  props: {\n    fields: {\n      type: Array,\n      required: true,\n    },\n\n    submissionUrl: {\n      type: String,\n      required: true,\n    },\n\n    submitButtonText: {\n      type: String,\n      default: 'Submit',\n    },\n  },\n\n  data() {\n    return {\n      validation: new FormValidation(),\n      isBusy: false,\n    };\n  },\n\n  methods: {\n    getFieldId({ id }) {\n      return `form-field-${id.replace(/\\./g, '-')}`;\n    },\n\n    getFormInputName(field) {\n      return FormService.getFormComponent(field);\n    },\n\n    getFieldClasses(field) {\n      let classes = 'w-full';\n\n      // \"Interpret\" the fields custom classes\n      // see: https://www.gravityforms.com/css-ready-classes/\n      if (field.cssClass.match(/gf_.+_half/)) {\n        classes = 'w-1/2';\n      } else if (field.cssClass.match(/gf_.+_third/)) {\n        classes = 'w-1/3';\n      }\n\n      return classes;\n    },\n\n    onFieldInput(event, field, input) {\n      // eslint-disable-next-line no-param-reassign\n      input.value = event;\n      this.validation.reset(input.id);\n    },\n\n    onEnterKey(event) {\n      const submittableFields = ['input'];\n      const fieldType = event.target.tagName.toLowerCase();\n\n      if (submittableFields.indexOf(fieldType) !== -1) {\n        this.submit();\n      }\n    },\n\n    submit() {\n      const pagePayload = {};\n\n      this.isBusy = true;\n\n      this.fields.forEach(field => {\n        field.inputs.forEach(input => {\n          if ((field.isDisplayOnly && field.type !== 'password') || (field.type === 'checkbox' && input.value === '')) {\n            return;\n          }\n\n          pagePayload[`input_${input.id.replace(/\\./g, '_')}`] = input.value;\n        });\n      });\n\n      FormService.submit(this.submissionUrl, pagePayload)\n        .then(({\n          isValid,\n          confirmationType,\n          confirmationMessage,\n          confirmationRedirect,\n        }) => {\n          if (isValid) {\n            this.$emit('submitted', { confirmationType, confirmationMessage, confirmationRedirect });\n          }\n        })\n        .catch(error => {\n          if (error.validationMessages) {\n            this.validation.fill(error);\n          } else {\n            console.log('unexpected error', error);\n          }\n        })\n        .finally(() => {\n          this.isBusy = false;\n        });\n    },\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.regular-form {\n  &-submit-button {\n    @apply shadow-hard-dark;\n    @apply text-white;\n\n    &.is-busy {\n      @apply pl-6 #{!important};\n    }\n  }\n}\n\n</style>\n"]}]}