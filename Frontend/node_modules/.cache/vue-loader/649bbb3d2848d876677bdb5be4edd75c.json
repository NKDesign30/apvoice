{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/content/Question.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/content/Question.vue","mtime":1683275992553},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBnZXQgZnJvbSAnbG9kYXNoL2dldCc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IFRyYWluaW5nU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2FwaS9UcmFpbmluZ1NlcnZpY2UnOwppbXBvcnQgUXVlc3Rpb25DaG9pY2UgZnJvbSAnQC9jb21wb25lbnRzL2NvbnRlbnQvcXVlc3Rpb24vUXVlc3Rpb25DaG9pY2UudnVlJzsKaW1wb3J0IFF1ZXN0aW9uUmF0aW5nIGZyb20gJ0AvY29tcG9uZW50cy9jb250ZW50L3F1ZXN0aW9uL1F1ZXN0aW9uUmF0aW5nLnZ1ZSc7CmltcG9ydCBRdWVzdGlvbk11bHRpcGxlQW5zd2VycyBmcm9tICdAL2NvbXBvbmVudHMvY29udGVudC9xdWVzdGlvbi9RdWVzdGlvbk11bHRpcGxlQW5zd2Vycy52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewoKICBpbmplY3Q6IFsndHJhaW5pbmdzU3RhdGUnXSwKCiAgY29tcG9uZW50czogewogICAgJ2Fwby1xdWVzdGlvbi1jaG9pY2UnOiBRdWVzdGlvbkNob2ljZSwKICAgICdhcG8tcXVlc3Rpb24tcmF0aW5nJzogUXVlc3Rpb25SYXRpbmcsCiAgICAnYXBvLXF1ZXN0aW9uLW11bHRpcGxlLWFuc3dlcnMnOiBRdWVzdGlvbk11bHRpcGxlQW5zd2VycywKICB9LAoKICBwcm9wczogewogICAgcXVlc3Rpb246IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBwYXJlbnRJZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTWlzc2luZzogZmFsc2UsCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsndXNlcklkJywgJ3RyYWluaW5nJywgJ2xlc3NvbiddKSwKCiAgICBjb21wdXRlZFF1ZXN0aW9uKCkgewogICAgICByZXR1cm4gZ2V0KHRoaXMucXVlc3Rpb24sICdxdWVzdGlvbicsICcnKTsKICAgIH0sCiAgICBzdWJoZWFkbGluZSgpIHsKICAgICAgcmV0dXJuIGdldCh0aGlzLnF1ZXN0aW9uLCAnc3ViaGVhZGxpbmUnLCAnJyk7CiAgICB9LAogICAgY29tcG9uZW50S2V5KCkgewogICAgICByZXR1cm4gZ2V0KHRoaXMucXVlc3Rpb24sICdhbnN3ZXJfb3B0aW9uc1swXS5hY2ZfZmNfbGF5b3V0JywgbnVsbCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bX1xzXS9nLCAnLScpOwogICAgfSwKICAgIGNvbXBvbmVudE5hbWUoKSB7CiAgICAgIHJldHVybiBgYXBvLXF1ZXN0aW9uLSR7dGhpcy5jb21wb25lbnRLZXl9YDsKICAgIH0sCiAgICBjb21wb25lbnRFeGlzdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudE5hbWUgaW4gdGhpcy4kb3B0aW9ucy5jb21wb25lbnRzOwogICAgfSwKICAgIG9wdGlvbnMoKSB7CiAgICAgIGlmICh0aGlzLmNvbXBvbmVudEtleSA9PT0gJ2Nob2ljZScpIHsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgZ2V0KHRoaXMucXVlc3Rpb24sICdhbnN3ZXJfb3B0aW9uc1swXS5vcHRpb25fMScsIHt9KSwKICAgICAgICAgIGdldCh0aGlzLnF1ZXN0aW9uLCAnYW5zd2VyX29wdGlvbnNbMF0ub3B0aW9uXzInLCB7fSksCiAgICAgICAgXTsKICAgICAgfQogICAgICByZXR1cm4gZ2V0KHRoaXMucXVlc3Rpb24sICdhbnN3ZXJfb3B0aW9uc1swXS5vcHRpb25zJywgW10pOwogICAgfSwKICAgIHJlc3BvbnNlTWVzc2FnZXMoKSB7CiAgICAgIGlmICh0aGlzLmNvbXBvbmVudEtleSAhPT0gJ2Nob2ljZScpIHsKICAgICAgICByZXR1cm4gZ2V0KHRoaXMucXVlc3Rpb24sICdhbnN3ZXJfb3B0aW9uc1swXS5yZXNwb25zZV9tZXNzYWdlcycsIFtdKTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgfSwKCiAgd2F0Y2g6IHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzCiAgICAndHJhaW5pbmdzU3RhdGUuY3VycmVudE1pc3NpbmdFbGVtZW50JzogZnVuY3Rpb24gKGVsZW1lbnRJZCkgewogICAgICBpZiAoZWxlbWVudElkID09PSB0aGlzLnF1ZXN0aW9uLmlkICYmIHRoaXMuaXNSZXF1aXJlZFF1ZXN0aW9uTW9kdWxlKCkpIHsKICAgICAgICB0aGlzLmlzTWlzc2luZyA9IHRydWU7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRlbC5zY3JvbGxJbnRvVmlldyh7CiAgICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJywKICAgICAgICAgIH0pOwogICAgICAgIH0sIDgwMCk7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgb25TdWJtaXRBbnN3ZXIoYW5zd2VyKSB7CiAgICAgIHRoaXMuaXNNaXNzaW5nID0gZmFsc2U7CgogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRyYWluaW5nKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5sZXNzb24pOwoKICAgICAgY29uc3QgcGF5bG9hZCA9IHsKICAgICAgICB1c2VyX2lkOiB0aGlzLnVzZXJJZCwKICAgICAgICB0cmFpbmluZ19pZDogdGhpcy50cmFpbmluZy5pZCwKICAgICAgICBxdWVzdGlvbl9pZDogdGhpcy5xdWVzdGlvbi5pZCwKICAgICAgICBsZXNzb25faWQ6IHRoaXMubGVzc29uLmxlc3Nvbl9pZCwKICAgICAgICBxdWVzdGlvbl90eXBlOiB0aGlzLmNvbXBvbmVudEtleSwKICAgICAgICByZXN1bHQ6IFt7CiAgICAgICAgICBxdWVzdGlvbjogdGhpcy5xdWVzdGlvbi5xdWVzdGlvbiwKICAgICAgICAgIHVzZXJfYW5zd2VyOiBhbnN3ZXIsCiAgICAgICAgICBxdWVzdGlvbl90eXBlOiB0aGlzLmNvbXBvbmVudEtleSwKICAgICAgICB9XSwKICAgICAgfTsKCiAgICAgIC8vIHJldHVybnMgYSBwcm9taXNlCiAgICAgIFRyYWluaW5nU2VydmljZS5zdG9yZVF1ZXN0aW9uUmVzdWx0KHBheWxvYWQpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgaWYgKHRoaXMuaXNSZXF1aXJlZFF1ZXN0aW9uTW9kdWxlKCkpIHsKICAgICAgICAgICAgY29uc3QgZWxlbWVudEluZGV4ID0gdGhpcy50cmFpbmluZ3NTdGF0ZS5yZXF1aXJlZEVsZW1lbnRzCiAgICAgICAgICAgICAgLmZpbmRJbmRleChlbGVtZW50ID0+IGVsZW1lbnQucXVlc3Rpb25faWQgPT09IHRoaXMucXVlc3Rpb24uaWQpOwogICAgICAgICAgICB0aGlzLnRyYWluaW5nc1N0YXRlLnJlcXVpcmVkRWxlbWVudHNbZWxlbWVudEluZGV4XS5oYXNTdWJtaXR0ZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNNaXNzaW5nID0gdHJ1ZTsKICAgICAgICB9KTsKICAgIH0sCgogICAgaXNSZXF1aXJlZFF1ZXN0aW9uTW9kdWxlKCkgewogICAgICAvLyBhZGQgcmVxdWlyZWQgcXVlc3Rpb25zIG1vZHVsZSBrZXlzIHRvIGFycmF5CiAgICAgIC8vIGFjdHVhbCBvbmx5IHJhdGluZyBxdWVzdGlvbiBtb2R1bGUgaXMgYWx3YXlzIHJlcXVpcmVkCiAgICAgIHJldHVybiBbJ3JhdGluZyddLmluZGV4T2YodGhpcy5jb21wb25lbnRLZXkpICE9PSAtMTsKICAgIH0sCgogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5pc1JlcXVpcmVkUXVlc3Rpb25Nb2R1bGUoKSkgewogICAgICB0aGlzLnRyYWluaW5nc1N0YXRlLnJlcXVpcmVkRWxlbWVudHMucHVzaCh7CiAgICAgICAgcGFnZUluZGljYXRvcklkOiB0aGlzLnBhcmVudElkLAogICAgICAgIHF1ZXN0aW9uX2lkOiB0aGlzLnF1ZXN0aW9uLmlkLAogICAgICAgIGhhc1N1Ym1pdHRlZDogZmFsc2UsCiAgICAgIH0pOwogICAgfQogIH0sCn07Cgo="},{"version":3,"sources":["Question.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Question.vue","sourceRoot":"src/components/content","sourcesContent":["<template>\n  <div class=\"question container\">\n    <div class=\"question__head mb-17 tablet:mb-13 text-center\">\n      <h2 v-html=\"$options.filters.formatContent(computedQuestion)\" />\n      <small\n        v-if=\"componentKey === 'multiple-answers'\"\n        v-text=\"$t('modules.question.multipleAnswersHint')\"\n      />\n      <h4\n        class=\"mt-10 tablet:mt-8\"\n        v-html=\"$options.filters.formatContent(subheadline)\"\n      />\n    </div>\n    <div\n      v-if=\"componentExists\"\n      class=\"question__module\"\n    >\n      <component\n        :is=\"componentName\"\n        :options=\"options\"\n        :response-messages=\"responseMessages\"\n        @input=\"onSubmitAnswer\"\n      />\n    </div>\n    <small\n      v-if=\"isMissing\"\n      class=\"mt-4 block text-center text-red-500 text-xs font-bold\"\n      v-text=\"$t('trainings.messages.questionIsRequired')\"\n    />\n  </div>\n</template>\n\n<script>\nimport get from 'lodash/get';\nimport { mapGetters } from 'vuex';\nimport TrainingService from '@/services/api/TrainingService';\nimport QuestionChoice from '@/components/content/question/QuestionChoice.vue';\nimport QuestionRating from '@/components/content/question/QuestionRating.vue';\nimport QuestionMultipleAnswers from '@/components/content/question/QuestionMultipleAnswers.vue';\n\nexport default {\n\n  inject: ['trainingsState'],\n\n  components: {\n    'apo-question-choice': QuestionChoice,\n    'apo-question-rating': QuestionRating,\n    'apo-question-multiple-answers': QuestionMultipleAnswers,\n  },\n\n  props: {\n    question: {\n      type: Object,\n      required: true,\n    },\n    parentId: {\n      type: Number,\n      required: false,\n      default: null,\n    },\n  },\n\n  data() {\n    return {\n      isMissing: false,\n    };\n  },\n\n  computed: {\n    ...mapGetters(['userId', 'training', 'lesson']),\n\n    computedQuestion() {\n      return get(this.question, 'question', '');\n    },\n    subheadline() {\n      return get(this.question, 'subheadline', '');\n    },\n    componentKey() {\n      return get(this.question, 'answer_options[0].acf_fc_layout', null).toLowerCase().replace(/[_\\s]/g, '-');\n    },\n    componentName() {\n      return `apo-question-${this.componentKey}`;\n    },\n    componentExists() {\n      return this.componentName in this.$options.components;\n    },\n    options() {\n      if (this.componentKey === 'choice') {\n        return [\n          get(this.question, 'answer_options[0].option_1', {}),\n          get(this.question, 'answer_options[0].option_2', {}),\n        ];\n      }\n      return get(this.question, 'answer_options[0].options', []);\n    },\n    responseMessages() {\n      if (this.componentKey !== 'choice') {\n        return get(this.question, 'answer_options[0].response_messages', []);\n      }\n      return null;\n    },\n  },\n\n  watch: {\n    // eslint-disable-next-line func-names\n    'trainingsState.currentMissingElement': function (elementId) {\n      if (elementId === this.question.id && this.isRequiredQuestionModule()) {\n        this.isMissing = true;\n        setTimeout(() => {\n          this.$el.scrollIntoView({\n            behavior: 'smooth',\n          });\n        }, 800);\n      }\n    },\n  },\n\n  methods: {\n    onSubmitAnswer(answer) {\n      this.isMissing = false;\n\n      // console.log(this.training);\n      // console.log(this.lesson);\n\n      const payload = {\n        user_id: this.userId,\n        training_id: this.training.id,\n        question_id: this.question.id,\n        lesson_id: this.lesson.lesson_id,\n        question_type: this.componentKey,\n        result: [{\n          question: this.question.question,\n          user_answer: answer,\n          question_type: this.componentKey,\n        }],\n      };\n\n      // returns a promise\n      TrainingService.storeQuestionResult(payload)\n        .then(() => {\n          if (this.isRequiredQuestionModule()) {\n            const elementIndex = this.trainingsState.requiredElements\n              .findIndex(element => element.question_id === this.question.id);\n            this.trainingsState.requiredElements[elementIndex].hasSubmitted = true;\n          }\n        })\n        .catch(() => {\n          this.isMissing = true;\n        });\n    },\n\n    isRequiredQuestionModule() {\n      // add required questions module keys to array\n      // actual only rating question module is always required\n      return ['rating'].indexOf(this.componentKey) !== -1;\n    },\n\n  },\n\n  created() {\n    if (this.isRequiredQuestionModule()) {\n      this.trainingsState.requiredElements.push({\n        pageIndicatorId: this.parentId,\n        question_id: this.question.id,\n        hasSubmitted: false,\n      });\n    }\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n/* Component Styles */\n\n</style>\n"]}]}