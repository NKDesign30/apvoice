{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/content/selection/Selection.vue?vue&type=style&index=0&id=4573d29a&lang=scss&scoped=true&","dependencies":[{"path":"/app/src/components/content/selection/Selection.vue","mtime":1683275992555},{"path":"/app/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/app/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/app/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmZhZGUgewogICYtZW50ZXItYWN0aXZlLAogICYtbGVhdmUtYWN0aXZlIHsKICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBlYXNlOwogIH0KCiAgJi1lbnRlciwKICAmLWxlYXZlLXRvIHsKICAgIG9wYWNpdHk6IDA7CiAgfQp9Cgo="},{"version":3,"sources":["Selection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Selection.vue","sourceRoot":"src/components/content/selection","sourcesContent":["<template>\n  <div class=\"selection\">\n    <template v-if=\"currentQuestionIndex <= questions.length - 1\">\n      <transition\n        name=\"fade\"\n        mode=\"out-in\"\n      >\n        <component\n          :is=\"resolveQuestionComponentName(currentQuestion)\"\n          v-if=\"Object.keys(result).length > 0\"\n          :key=\"`question-${currentQuestionIndex}`\"\n          v-model=\"result[currentQuestionIndex]\"\n          :answer-a=\"currentQuestion.answer_a\"\n          :answer-b=\"currentQuestion.answer_b\"\n          class=\"container\"\n          :is-disabled=\"isCurrentQuestionAnswered\"\n          :question=\"currentQuestion.question\"\n          @answered=\"onAnswered\"\n        />\n      </transition>\n\n      <apo-selection-progress\n        v-if=\"hasMultipleQuestions\"\n        class=\"mt-10 desktop:mt-13\"\n        :current=\"currentQuestionIndex + 1\"\n        :is-current-question-answered=\"isCurrentQuestionAnswered\"\n        :total=\"questions.length\"\n        @back=\"onBack\"\n        @next=\"onNext\"\n      />\n    </template>\n    <apo-selection-result\n      v-else\n      :result=\"result\"\n      :content=\"resultPageContent\"\n      @restart=\"onRestart\"\n    />\n  </div>\n</template>\n\n<script>\n\nimport transform from 'lodash/transform';\nimport SelectionCopyQuestion from '@/components/content/selection/SelectionCopyQuestion.vue';\nimport SelectionImageQuestion from '@/components/content/selection/SelectionImageQuestion.vue';\nimport SelectionProgress from '@/components/content/selection/SelectionProgress.vue';\nimport SelectionResult from '@/components/content/selection/SelectionResult.vue';\n\nexport default {\n  components: {\n    'apo-selection-copy-question': SelectionCopyQuestion,\n    'apo-selection-image-question': SelectionImageQuestion,\n    'apo-selection-progress': SelectionProgress,\n    'apo-selection-result': SelectionResult,\n  },\n\n  props: {\n    selection_items: {\n      type: Array,\n      default: () => [],\n    },\n\n    result_page: {\n      type: [Array, Boolean],\n      default: () => [],\n    },\n  },\n\n  data() {\n    return {\n      currentQuestionIndex: 0,\n      result: {},\n    };\n  },\n\n  computed: {\n    questions() {\n      return this.selection_items;\n    },\n\n    resultPageContent() {\n      return this.result_page || [];\n    },\n\n    currentQuestion() {\n      return this.questions[this.currentQuestionIndex];\n    },\n\n    isCurrentQuestionAnswered() {\n      return this.result[this.currentQuestionIndex]\n        && this.result[this.currentQuestionIndex].answer\n        && Object.keys(this.result[this.currentQuestionIndex].answer).length > 0;\n    },\n\n    hasMultipleQuestions() {\n      return this.questions.length > 1;\n    },\n  },\n\n  watch: {\n    selection_items: {\n      immediate: true,\n      handler() {\n        this.$nextTick(() => this.createResult());\n      },\n    },\n  },\n\n  methods: {\n    resolveQuestionComponentName(question) {\n      return `apo-selection-${question.acf_fc_layout.replace(/_+/g, '-')}`;\n    },\n\n    createResult() {\n      this.result = transform(this.questions, (result, question, index) => {\n        // eslint-disable-next-line no-param-reassign\n        result[index] = {\n          question: question.question,\n          answer: {},\n        };\n      }, {});\n    },\n\n    onBack() {\n      if (this.currentQuestionIndex > 0) {\n        this.currentQuestionIndex -= 1;\n      }\n    },\n\n    onNext() {\n      if (this.nextTimer) {\n        clearTimeout(this.nextTimer);\n        this.nextTimer = null;\n      }\n\n      if (!this.result[this.currentQuestionIndex].answer) {\n        return;\n      }\n\n      this.currentQuestionIndex += 1;\n    },\n\n    onAnswered() {\n      this.nextTimer = setTimeout(() => {\n        this.onNext();\n      }, 3000);\n    },\n\n    onRestart() {\n      this.createResult();\n      this.currentQuestionIndex = 0;\n    },\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.fade {\n  &-enter-active,\n  &-leave-active {\n    transition: opacity 0.3s ease;\n  }\n\n  &-enter,\n  &-leave-to {\n    opacity: 0;\n  }\n}\n\n</style>\n"]}]}