{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/form-renderer/RegularForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/form-renderer/RegularForm.vue","mtime":1683275992560},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgQ2hlY2tib3ggZnJvbSAnQC9jb21wb25lbnRzL2Zvcm0tcmVuZGVyZXIvQ2hlY2tib3gudnVlJzsKaW1wb3J0IEhpZGRlbklucHV0IGZyb20gJ0AvY29tcG9uZW50cy9mb3JtLXJlbmRlcmVyL0hpZGRlbklucHV0LnZ1ZSc7CmltcG9ydCBIdG1sQmxvY2sgZnJvbSAnQC9jb21wb25lbnRzL2Zvcm0tcmVuZGVyZXIvSHRtbEJsb2NrLnZ1ZSc7CmltcG9ydCBJbnB1dExhYmVsIGZyb20gJ0AvY29tcG9uZW50cy9mb3JtLXJlbmRlcmVyL0lucHV0TGFiZWwudnVlJzsKaW1wb3J0IE11bHRpU2VsZWN0SW5wdXQgZnJvbSAnQC9jb21wb25lbnRzL2Zvcm0tcmVuZGVyZXIvTXVsdGlTZWxlY3RJbnB1dC52dWUnOwppbXBvcnQgUGhhcm1hY3lTdW1tYXJ5IGZyb20gJ0AvY29tcG9uZW50cy9mb3JtLXJlbmRlcmVyL1BoYXJtYWN5U3VtbWFyeS52dWUnOwppbXBvcnQgUmFkaW9CdXR0b25zIGZyb20gJ0AvY29tcG9uZW50cy9mb3JtLXJlbmRlcmVyL1JhZGlvQnV0dG9ucy52dWUnOwppbXBvcnQgU2VsZWN0SW5wdXQgZnJvbSAnQC9jb21wb25lbnRzL2Zvcm0tcmVuZGVyZXIvU2VsZWN0SW5wdXQudnVlJzsKaW1wb3J0IFRleHRhcmVhIGZyb20gJ0AvY29tcG9uZW50cy9mb3JtLXJlbmRlcmVyL1RleHRhcmVhLnZ1ZSc7CmltcG9ydCBUZXh0SW5wdXQgZnJvbSAnQC9jb21wb25lbnRzL2Zvcm0tcmVuZGVyZXIvVGV4dElucHV0LnZ1ZSc7CmltcG9ydCBGb3JtU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2FwaS9Gb3JtU2VydmljZSc7CmltcG9ydCBGb3JtVmFsaWRhdGlvbiBmcm9tICdAL3NlcnZpY2VzL2Zvcm0vRm9ybVZhbGlkYXRpb24nOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgICdhcG8tY2hlY2tib3gnOiBDaGVja2JveCwKICAgICdhcG8taGlkZGVuLWlucHV0JzogSGlkZGVuSW5wdXQsCiAgICAnYXBvLWh0bWwtYmxvY2snOiBIdG1sQmxvY2ssCiAgICAnYXBvLWlucHV0LWxhYmVsJzogSW5wdXRMYWJlbCwKICAgICdhcG8tbXVsdGktc2VsZWN0LWlucHV0JzogTXVsdGlTZWxlY3RJbnB1dCwKICAgICdhcG8tcGhhcm1hY3ktc3VtbWFyeSc6IFBoYXJtYWN5U3VtbWFyeSwKICAgICdhcG8tcmFkaW8tYnV0dG9ucyc6IFJhZGlvQnV0dG9ucywKICAgICdhcG8tc2VsZWN0LWlucHV0JzogU2VsZWN0SW5wdXQsCiAgICAnYXBvLXRleHRhcmVhJzogVGV4dGFyZWEsCiAgICAnYXBvLXRleHQtaW5wdXQnOiBUZXh0SW5wdXQsCiAgfSwKCiAgcHJvcHM6IHsKICAgIGZpZWxkczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAoKICAgIHN1Ym1pc3Npb25Vcmw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCgogICAgc3VibWl0QnV0dG9uVGV4dDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdTdWJtaXQnLAogICAgfSwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsaWRhdGlvbjogbmV3IEZvcm1WYWxpZGF0aW9uKCksCiAgICAgIGlzQnVzeTogZmFsc2UsCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGdldEZpZWxkSWQoeyBpZCB9KSB7CiAgICAgIHJldHVybiBgZm9ybS1maWVsZC0ke2lkLnJlcGxhY2UoL1wuL2csICctJyl9YDsKICAgIH0sCgogICAgZ2V0Rm9ybUlucHV0TmFtZShmaWVsZCkgewogICAgICByZXR1cm4gRm9ybVNlcnZpY2UuZ2V0Rm9ybUNvbXBvbmVudChmaWVsZCk7CiAgICB9LAoKICAgIGdldEZpZWxkQ2xhc3NlcyhmaWVsZCkgewogICAgICBsZXQgY2xhc3NlcyA9ICd3LWZ1bGwnOwoKICAgICAgLy8gIkludGVycHJldCIgdGhlIGZpZWxkcyBjdXN0b20gY2xhc3NlcwogICAgICAvLyBzZWU6IGh0dHBzOi8vd3d3LmdyYXZpdHlmb3Jtcy5jb20vY3NzLXJlYWR5LWNsYXNzZXMvCiAgICAgIGlmIChmaWVsZC5jc3NDbGFzcy5tYXRjaCgvZ2ZfLitfaGFsZi8pKSB7CiAgICAgICAgY2xhc3NlcyA9ICd3LTEvMic7CiAgICAgIH0gZWxzZSBpZiAoZmllbGQuY3NzQ2xhc3MubWF0Y2goL2dmXy4rX3RoaXJkLykpIHsKICAgICAgICBjbGFzc2VzID0gJ3ctMS8zJzsKICAgICAgfQoKICAgICAgcmV0dXJuIGNsYXNzZXM7CiAgICB9LAoKICAgIG9uRmllbGRJbnB1dChldmVudCwgZmllbGQsIGlucHV0KSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICBpbnB1dC52YWx1ZSA9IGV2ZW50OwogICAgICB0aGlzLnZhbGlkYXRpb24ucmVzZXQoaW5wdXQuaWQpOwogICAgfSwKCiAgICBvbkVudGVyS2V5KGV2ZW50KSB7CiAgICAgIGNvbnN0IHN1Ym1pdHRhYmxlRmllbGRzID0gWydpbnB1dCddOwogICAgICBjb25zdCBmaWVsZFR5cGUgPSBldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpOwoKICAgICAgaWYgKHN1Ym1pdHRhYmxlRmllbGRzLmluZGV4T2YoZmllbGRUeXBlKSAhPT0gLTEpIHsKICAgICAgICB0aGlzLnN1Ym1pdCgpOwogICAgICB9CiAgICB9LAoKICAgIHN1Ym1pdCgpIHsKICAgICAgY29uc3QgcGFnZVBheWxvYWQgPSB7fTsKCiAgICAgIHRoaXMuaXNCdXN5ID0gdHJ1ZTsKCiAgICAgIHRoaXMuZmllbGRzLmZvckVhY2goZmllbGQgPT4gewogICAgICAgIGZpZWxkLmlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICAgIGlmICgoZmllbGQuaXNEaXNwbGF5T25seSAmJiBmaWVsZC50eXBlICE9PSAncGFzc3dvcmQnKSB8fCAoZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94JyAmJiBpbnB1dC52YWx1ZSA9PT0gJycpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBwYWdlUGF5bG9hZFtgaW5wdXRfJHtpbnB1dC5pZC5yZXBsYWNlKC9cLi9nLCAnXycpfWBdID0gaW5wdXQudmFsdWU7CiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgRm9ybVNlcnZpY2Uuc3VibWl0KHRoaXMuc3VibWlzc2lvblVybCwgcGFnZVBheWxvYWQpCiAgICAgICAgLnRoZW4oKHsKICAgICAgICAgIGlzVmFsaWQsCiAgICAgICAgICBjb25maXJtYXRpb25UeXBlLAogICAgICAgICAgY29uZmlybWF0aW9uTWVzc2FnZSwKICAgICAgICAgIGNvbmZpcm1hdGlvblJlZGlyZWN0LAogICAgICAgIH0pID0+IHsKICAgICAgICAgIGlmIChpc1ZhbGlkKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdHRlZCcsIHsgY29uZmlybWF0aW9uVHlwZSwgY29uZmlybWF0aW9uTWVzc2FnZSwgY29uZmlybWF0aW9uUmVkaXJlY3QgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgaWYgKGVycm9yLnZhbGlkYXRpb25NZXNzYWdlcykgewogICAgICAgICAgICB0aGlzLnZhbGlkYXRpb24uZmlsbChlcnJvcik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygndW5leHBlY3RlZCBlcnJvcicsIGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNCdXN5ID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCn07Cgo="},{"version":3,"sources":["RegularForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RegularForm.vue","sourceRoot":"src/components/form-renderer","sourcesContent":["<template>\n  <div class=\"regular-form\">\n    <div class=\"mt-20 -mx-12 flex flex-wrap\">\n      <div\n        v-for=\"field in fields\"\n        :key=\"field.id\"\n        class=\"px-12\"\n        :class=\"{\n          [getFieldClasses(field)]: true,\n          'hidden': field.type === 'hidden',\n        }\"\n      >\n        <template v-if=\"field.isVisible\">\n          <div class=\"mb-8 relative\">\n            <apo-input-label\n              v-if=\"field.labelPlacement !== 'hidden' && field.label\"\n              :for=\"getFieldId(field)\"\n              class=\"mb-4\"\n              v-html=\"field.label\"\n            />\n\n            <div\n              v-for=\"input in field.inputs\"\n              :key=\"input.id\"\n            >\n              <apo-input-label\n                v-if=\"field.subLabelPlacement !== 'hidden' && (input.label || input.customLabel)\"\n                :for=\"getFieldId(input)\"\n                class=\"mb-4\"\n                v-html=\"input.customLabel || input.label\"\n              />\n\n              <component\n                :is=\"getFormInputName(field)\"\n                :id=\"getFieldId(input)\"\n                class=\"mb-4\"\n                v-bind=\"input\"\n                :field=\"field\"\n                :value=\"input.value\"\n                @input=\"onFieldInput($event, field, input)\"\n                @keydown.enter=\"onEnterKey\"\n              />\n            </div>\n\n            <small\n              v-if=\"validation.has(field.id)\"\n              class=\"-mt-3 absolute pin-l pin-b text-red-500 text-xs font-bold\"\n              v-text=\"validation.get(field.id)\"\n            />\n          </div>\n        </template>\n      </div>\n\n      <div class=\"my-20 w-full flex justify-center\">\n        <apo-button\n          class=\"regular-form-submit-button button button--primary button--small\"\n          :class=\"{ 'is-busy cursor-wait': isBusy }\"\n          :disabled=\"isBusy\"\n          @click.native=\"submit\"\n        >\n          <apo-spinner\n            v-if=\"isBusy\"\n            class=\"mr-4\"\n            size=\"small\"\n          />\n\n          <span v-text=\"submitButtonText\" />\n        </apo-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport Checkbox from '@/components/form-renderer/Checkbox.vue';\nimport HiddenInput from '@/components/form-renderer/HiddenInput.vue';\nimport HtmlBlock from '@/components/form-renderer/HtmlBlock.vue';\nimport InputLabel from '@/components/form-renderer/InputLabel.vue';\nimport MultiSelectInput from '@/components/form-renderer/MultiSelectInput.vue';\nimport PharmacySummary from '@/components/form-renderer/PharmacySummary.vue';\nimport RadioButtons from '@/components/form-renderer/RadioButtons.vue';\nimport SelectInput from '@/components/form-renderer/SelectInput.vue';\nimport Textarea from '@/components/form-renderer/Textarea.vue';\nimport TextInput from '@/components/form-renderer/TextInput.vue';\nimport FormService from '@/services/api/FormService';\nimport FormValidation from '@/services/form/FormValidation';\n\nexport default {\n  components: {\n    'apo-checkbox': Checkbox,\n    'apo-hidden-input': HiddenInput,\n    'apo-html-block': HtmlBlock,\n    'apo-input-label': InputLabel,\n    'apo-multi-select-input': MultiSelectInput,\n    'apo-pharmacy-summary': PharmacySummary,\n    'apo-radio-buttons': RadioButtons,\n    'apo-select-input': SelectInput,\n    'apo-textarea': Textarea,\n    'apo-text-input': TextInput,\n  },\n\n  props: {\n    fields: {\n      type: Array,\n      required: true,\n    },\n\n    submissionUrl: {\n      type: String,\n      required: true,\n    },\n\n    submitButtonText: {\n      type: String,\n      default: 'Submit',\n    },\n  },\n\n  data() {\n    return {\n      validation: new FormValidation(),\n      isBusy: false,\n    };\n  },\n\n  methods: {\n    getFieldId({ id }) {\n      return `form-field-${id.replace(/\\./g, '-')}`;\n    },\n\n    getFormInputName(field) {\n      return FormService.getFormComponent(field);\n    },\n\n    getFieldClasses(field) {\n      let classes = 'w-full';\n\n      // \"Interpret\" the fields custom classes\n      // see: https://www.gravityforms.com/css-ready-classes/\n      if (field.cssClass.match(/gf_.+_half/)) {\n        classes = 'w-1/2';\n      } else if (field.cssClass.match(/gf_.+_third/)) {\n        classes = 'w-1/3';\n      }\n\n      return classes;\n    },\n\n    onFieldInput(event, field, input) {\n      // eslint-disable-next-line no-param-reassign\n      input.value = event;\n      this.validation.reset(input.id);\n    },\n\n    onEnterKey(event) {\n      const submittableFields = ['input'];\n      const fieldType = event.target.tagName.toLowerCase();\n\n      if (submittableFields.indexOf(fieldType) !== -1) {\n        this.submit();\n      }\n    },\n\n    submit() {\n      const pagePayload = {};\n\n      this.isBusy = true;\n\n      this.fields.forEach(field => {\n        field.inputs.forEach(input => {\n          if ((field.isDisplayOnly && field.type !== 'password') || (field.type === 'checkbox' && input.value === '')) {\n            return;\n          }\n\n          pagePayload[`input_${input.id.replace(/\\./g, '_')}`] = input.value;\n        });\n      });\n\n      FormService.submit(this.submissionUrl, pagePayload)\n        .then(({\n          isValid,\n          confirmationType,\n          confirmationMessage,\n          confirmationRedirect,\n        }) => {\n          if (isValid) {\n            this.$emit('submitted', { confirmationType, confirmationMessage, confirmationRedirect });\n          }\n        })\n        .catch(error => {\n          if (error.validationMessages) {\n            this.validation.fill(error);\n          } else {\n            console.log('unexpected error', error);\n          }\n        })\n        .finally(() => {\n          this.isBusy = false;\n        });\n    },\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.regular-form {\n  &-submit-button {\n    @apply shadow-hard-dark;\n    @apply text-white;\n\n    &.is-busy {\n      @apply pl-6 #{!important};\n    }\n  }\n}\n\n</style>\n"]}]}