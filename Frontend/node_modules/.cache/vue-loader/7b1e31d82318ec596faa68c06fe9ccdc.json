{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/content/text-media-paragraph/media-slot/TextMediaParagraphMediaSlotPresentation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/content/text-media-paragraph/media-slot/TextMediaParagraphMediaSlotPresentation.vue","mtime":1683275992558},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgZ2V0IGZyb20gJ2xvZGFzaC9nZXQnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCBUZXh0TWVkaWFQYXJhZ3JhcGhNZWRpYVNsb3RGaWxlIGZyb20gJy4vVGV4dE1lZGlhUGFyYWdyYXBoTWVkaWFTbG90RmlsZS52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgICdhcG8tdGV4dC1tZWRpYS1wYXJhZ3JhcGgtbWVkaWEtc2xvdC1maWxlJzogVGV4dE1lZGlhUGFyYWdyYXBoTWVkaWFTbG90RmlsZSwKICB9LAoKICBwcm9wczogewogICAgbWVkaWE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fSwKICAgIH0sCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHdpZHRoOiAwLAogICAgICBoZWlnaHQ6IDAsCiAgICAgIGFzcGVjdFJhdGlvOiA0IC8gMywKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydsYW5ndWFnZSddKSwKCiAgICBwcmVzZW50YXRpb24oKSB7CiAgICAgIHJldHVybiBnZXQodGhpcy5tZWRpYSwgJ3ByZXNlbnRhdGlvbicsIHt9KTsKICAgIH0sCgogICAgYXR0YWNobWVudCgpIHsKICAgICAgcmV0dXJuIGdldCh0aGlzLm1lZGlhLCAnYXR0YWNobWVudCcsIHt9KTsKICAgIH0sCgogICAgaGFzQXR0YWNobWVudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXR0YWNobWVudCAmJiBPYmplY3Qua2V5cyh0aGlzLmF0dGFjaG1lbnQpLmxlbmd0aCA+IDA7CiAgICB9LAoKICAgIG1lZGlhSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnByZXNlbnRhdGlvbi5pZDsKICAgIH0sCgogICAgYmFzZVVybCgpIHsKICAgICAgcmV0dXJuIHdpbmRvdy5heGlvcy5kZWZhdWx0cy5iYXNlVVJMOwogICAgfSwKCiAgICBtZWRpYVNyYygpIHsKICAgICAgcmV0dXJuIGAvVmlld2VySlMvIyR7dGhpcy5iYXNlVXJsfS93cC1qc29uL2Fwb3ZvaWNlL3YxL3N0YXRpYy8ke3RoaXMubWVkaWFJZH1gOwogICAgfSwKCiAgICBoYXNEaW1lbnNpb25zKCkgewogICAgICByZXR1cm4gdGhpcy53aWR0aCA+IDAgJiYgdGhpcy5oZWlnaHQgPiAwOwogICAgfSwKCiAgICBkb2N1bWVudE5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLnByZXNlbnRhdGlvbi50aXRsZTsKICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICB2aXNpYmlsaXR5Q2hhbmdlZChpc1Zpc2libGUsIGVudHJ5KSB7CiAgICAgIGlmIChpc1Zpc2libGUpIHsKICAgICAgICB0aGlzLmhhbmRsZURpbWVuc2lvbnMoKTsKICAgICAgfQogICAgfSwKICAgIHNldERpbWVuc2lvbnMoKSB7CiAgICAgIHRoaXMud2lkdGggPSBNYXRoLmZsb29yKHRoaXMuJHJlZnMuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKTsKICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLmZsb29yKHRoaXMud2lkdGggLyB0aGlzLmFzcGVjdFJhdGlvKTsKICAgIH0sCiAgICBoYW5kbGVEaW1lbnNpb25zKCkgewogICAgICBjb25zdCByZXNpemVIYW5kbGVyID0gKCkgPT4gdGhpcy5zZXREaW1lbnNpb25zKCk7CgogICAgICByZXNpemVIYW5kbGVyKCk7CgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplSGFuZGxlciwgeyBwYXNzaXZlOiB0cnVlIH0pOwoKICAgICAgdGhpcy4kb25jZSgnaG9vazpkZXN0cm95ZWQnLCAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplSGFuZGxlcikpOwogICAgfSwKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5oYW5kbGVEaW1lbnNpb25zKCk7CiAgfSwKfTsKCg=="},{"version":3,"sources":["TextMediaParagraphMediaSlotPresentation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"TextMediaParagraphMediaSlotPresentation.vue","sourceRoot":"src/components/content/text-media-paragraph/media-slot","sourcesContent":["<template>\n  <div\n    ref=\"container\"\n    v-observe-visibility=\"{\n      callback: visibilityChanged,\n      once: true,\n      intersection: {\n        rootMargin: '100%'\n      }\n    }\"\n  >\n    <div class=\"shadow-lg\">\n      <iframe\n        v-if=\"hasDimensions\"\n        allowfullscreen\n        :data-language=\"language\"\n        :data-name=\"documentName\"\n        :height=\"height\"\n        :src=\"mediaSrc\"\n        :width=\"width\"\n      />\n    </div>\n\n    <div\n      v-if=\"hasAttachment\"\n      class=\"mt-8\"\n    >\n      <apo-text-media-paragraph-media-slot-file :media=\"attachment\" />\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport get from 'lodash/get';\nimport { mapGetters } from 'vuex';\nimport TextMediaParagraphMediaSlotFile from './TextMediaParagraphMediaSlotFile.vue';\n\nexport default {\n  components: {\n    'apo-text-media-paragraph-media-slot-file': TextMediaParagraphMediaSlotFile,\n  },\n\n  props: {\n    media: {\n      type: Object,\n      default: () => {},\n    },\n  },\n\n  data() {\n    return {\n      width: 0,\n      height: 0,\n      aspectRatio: 4 / 3,\n    };\n  },\n\n  computed: {\n    ...mapGetters(['language']),\n\n    presentation() {\n      return get(this.media, 'presentation', {});\n    },\n\n    attachment() {\n      return get(this.media, 'attachment', {});\n    },\n\n    hasAttachment() {\n      return this.attachment && Object.keys(this.attachment).length > 0;\n    },\n\n    mediaId() {\n      return this.presentation.id;\n    },\n\n    baseUrl() {\n      return window.axios.defaults.baseURL;\n    },\n\n    mediaSrc() {\n      return `/ViewerJS/#${this.baseUrl}/wp-json/apovoice/v1/static/${this.mediaId}`;\n    },\n\n    hasDimensions() {\n      return this.width > 0 && this.height > 0;\n    },\n\n    documentName() {\n      return this.presentation.title;\n    },\n  },\n\n  methods: {\n    // eslint-disable-next-line no-unused-vars\n    visibilityChanged(isVisible, entry) {\n      if (isVisible) {\n        this.handleDimensions();\n      }\n    },\n    setDimensions() {\n      this.width = Math.floor(this.$refs.container.getBoundingClientRect().width);\n      this.height = Math.floor(this.width / this.aspectRatio);\n    },\n    handleDimensions() {\n      const resizeHandler = () => this.setDimensions();\n\n      resizeHandler();\n\n      window.addEventListener('resize', resizeHandler, { passive: true });\n\n      this.$once('hook:destroyed', () => window.removeEventListener('resize', resizeHandler));\n    },\n  },\n\n  mounted() {\n    this.handleDimensions();\n  },\n};\n\n</script>\n"]}]}