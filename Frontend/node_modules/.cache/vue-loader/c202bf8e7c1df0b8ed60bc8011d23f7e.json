{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/pharmacies/PharmacyConfirmationModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/pharmacies/PharmacyConfirmationModal.vue","mtime":1683275992562},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBNb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvdWkvTW9kYWwudnVlJzsKaW1wb3J0IFBoYXJtYWNpZXNGdXp6eVNlYXJjaCBmcm9tICdAL2NvbXBvbmVudHMvZm9ybS1yZW5kZXJlci9QaGFybWFjaWVzRnV6enlTZWFyY2gudnVlJzsKaW1wb3J0IENvbmZpcm1QaGFybWFjeVNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy9hcGkvQ29uZmlybVBoYXJtYWN5U2VydmljZSc7CmltcG9ydCBMYW5ndWFnZVNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlcy9zZXR0aW5ncy9MYW5ndWFnZVNlcnZpY2UnOwppbXBvcnQgeyBBVVRIX1VQREFURV9TSE9XX1VQREFURV9QSEFSTUFDWV9NT0RBTCB9IGZyb20gJ0Avc3RvcmUvdHlwZXMvbXV0YXRpb24tdHlwZXMnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQaGFybWFjeUNvbmZpcm1hdGlvbk1vZGFsJywKCiAgY29tcG9uZW50czogewogICAgJ2Fwby1tb2RhbCc6IE1vZGFsLAogICAgJ2Fwby1waGFybWFjaWVzLWZ1enp5LXNlYXJjaCc6IFBoYXJtYWNpZXNGdXp6eVNlYXJjaCwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNCdXN5OiBmYWxzZSwKICAgICAgaXNDb25maXJtaW5nOiBmYWxzZSwKICAgICAgc2hvd0Vycm9yTWVzc2FnZTogZmFsc2UsCiAgICAgIHBoYXJtYWN5OiBudWxsLAogICAgICBzZWxlY3RlZFBoYXJtYWN5OiBudWxsLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoewogICAgICBmaXJzdE5hbWU6IHN0YXRlID0+IHN0YXRlLmF1dGgudXNlci5maXJzdE5hbWUsCiAgICB9KSwKICB9LAoKICBtZXRob2RzOiB7CiAgICBvblNlbGVjdChwaGFybWFjeSkgewogICAgICB0aGlzLnNlbGVjdGVkUGhhcm1hY3kgPSB7CiAgICAgICAgcGhhcm1hY3lOYW1lOiBwaGFybWFjeS5uYW1lLAogICAgICAgIHBoYXJtYWN5U3RyZWV0OiBwaGFybWFjeS5zdHJlZXQsCiAgICAgICAgcGhhcm1hY3lTdHJlZXRObzogcGhhcm1hY3kubnVtYmVyLAogICAgICAgIHBoYXJtYWN5WmlwQ29kZTogcGhhcm1hY3kuemlwLAogICAgICAgIHBoYXJtYWN5Q2l0eTogcGhhcm1hY3kuY2l0eSwKICAgICAgfTsKICAgIH0sCiAgICByZW1vdmVTZWxlY3RlZFBoYXJtYWN5KCkgewogICAgICB0aGlzLnNlbGVjdGVkUGhhcm1hY3kgPSBudWxsOwogICAgfSwKICAgIG9uQ29uZmlybSgpIHsKICAgICAgdGhpcy5zaG93RXJyb3JNZXNzYWdlID0gZmFsc2U7CiAgICAgIHRoaXMuaXNDb25maXJtaW5nID0gdHJ1ZTsKICAgICAgQ29uZmlybVBoYXJtYWN5U2VydmljZS5zdG9yZSh7CiAgICAgICAgbmFtZTogdGhpcy5zZWxlY3RlZFBoYXJtYWN5LnBoYXJtYWN5TmFtZSwKICAgICAgICBzdHJlZXQ6IHRoaXMuc2VsZWN0ZWRQaGFybWFjeS5waGFybWFjeVN0cmVldCwKICAgICAgICBudW1iZXI6IHRoaXMuc2VsZWN0ZWRQaGFybWFjeS5waGFybWFjeVN0cmVldE5vLAogICAgICAgIHppcDogdGhpcy5zZWxlY3RlZFBoYXJtYWN5LnBoYXJtYWN5WmlwQ29kZSwKICAgICAgICBjaXR5OiB0aGlzLnNlbGVjdGVkUGhhcm1hY3kucGhhcm1hY3lDaXR5LAogICAgICAgIGNvdW50cnk6IExhbmd1YWdlU2VydmljZS5yZXNvbHZlQ291bnRyeSgpLAogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNDb25maXJtaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoQVVUSF9VUERBVEVfU0hPV19VUERBVEVfUEhBUk1BQ1lfTU9EQUwsIGZhbHNlKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgIHRoaXMuc2hvd0Vycm9yTWVzc2FnZSA9IHRydWU7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7IHRoaXMuaXNDb25maXJtaW5nID0gZmFsc2U7IH0pOwogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5pc0J1c3kgPSB0cnVlOwogICAgQ29uZmlybVBoYXJtYWN5U2VydmljZS5mZXRjaCgpCiAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgIHRoaXMucGhhcm1hY3kgPSB7IC4uLmRhdGEucGhhcm1hY3kgfTsKICAgICAgfSkKICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpCiAgICAgIC5maW5hbGx5KCgpID0+IHsgdGhpcy5pc0J1c3kgPSBmYWxzZTsgfSk7CiAgfSwKfTsKCg=="},{"version":3,"sources":["PharmacyConfirmationModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PharmacyConfirmationModal.vue","sourceRoot":"src/components/pharmacies","sourcesContent":["<template>\n  <apo-modal>\n    <template\n      v-if=\"!isBusy\"\n      #header\n    >\n      <h3>Hallo {{ firstName }}!</h3>\n      <h5>Wir möchten dich bitten die Adresse deiner Apotheke nochmals zu bestätigen.</h5>\n    </template>\n    <apo-spinner\n      v-if=\"isBusy\"\n      size=\"large\"\n    />\n    <div v-else>\n      <div class=\"mb-10 text-gray-800\">\n        <h4>\n          Deine aktuelle Apotheke\n        </h4>\n        <ul>\n          <li>{{ pharmacy.pharmacyName || '' }}</li>\n          <li>{{ pharmacy.pharmacyStreet || '' }} {{ pharmacy.pharmacyStreetNo || '' }}</li>\n          <li>{{ pharmacy.pharmacyZipCode || '' }} {{ pharmacy.pharmacyCity || '' }}</li>\n        </ul>\n      </div>\n\n      <div>\n        <div\n          v-if=\"selectedPharmacy\"\n          class=\"px-4 py-4 mt-4 -ml-6 -mr-6 bg-blue-100 tablet:text-center\"\n        >\n          <div class=\"mr-2 text-right\">\n            <button\n              class=\"p-2\"\n              type=\"button\"\n              :title=\"$t('general.remove')\"\n              :disabled=\"isConfirming\"\n              @click=\"removeSelectedPharmacy\"\n            >\n              <apo-icon\n                class=\"w-4 tablet:w-6\"\n                src=\"close\"\n              />\n            </button>\n          </div>\n          <div class=\"flex flex-wrap\">\n            <div\n              v-for=\"(value, key) in selectedPharmacy\"\n              :key=\"key\"\n              class=\"flex flex-col w-full my-4 tablet:px-4 tablet:w-1/3\"\n            >\n              <span\n                class=\"inline-block font-bold text-gray-900\"\n                v-text=\"$t(`modules.pharmacySummary.form.${key}`)\"\n              />\n              <span\n                class=\"inline-block mt-2 text-gray-800\"\n                v-html=\"$options.filters.formatContent(value)\"\n              />\n            </div>\n          </div>\n        </div>\n        <apo-pharmacies-fuzzy-search\n          v-else\n          @selected=\"onSelect\"\n        >\n          <div class=\"flex flex-col mt-2 tablet:flex-row\">\n            <span class=\"text-gray-900 tablet:mr-2\">{{ $t('general.lookingForPharmacy') }} </span>\n            <router-link\n              :to=\"{name: 'contact'}\"\n              class=\"text-gray-800 underline\"\n            >\n              {{ $t('general.getInTouch') }}\n            </router-link>\n          </div>\n          <div\n            class=\"w-full mt-4\"\n            v-html=\"$t('general.fuzzySearch.hint')\"\n          />\n        </apo-pharmacies-fuzzy-search>\n      </div>\n\n      <div class=\"flex flex-col mt-16 text-right\">\n        <apo-button\n          class=\"button button--primary button--small\"\n          :disabled=\"selectedPharmacy === null || isConfirming\"\n          @click.native=\"onConfirm\"\n        >\n          <apo-spinner\n            v-if=\"isConfirming\"\n            class=\"mr-4\"\n            size=\"small\"\n          />\n\n          <span v-text=\"'Bestätigen'\" />\n        </apo-button>\n        <small\n          v-if=\"showErrorMessage\"\n          class=\"mt-2 text-xs font-bold text-red-500\"\n          v-text=\"'Oops, da ist etwas schief gelaufen. Bitte versuche es erneut oder kontatkiere unseren Support.'\"\n        />\n      </div>\n    </div>\n  </apo-modal>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport Modal from '@/components/ui/Modal.vue';\nimport PharmaciesFuzzySearch from '@/components/form-renderer/PharmaciesFuzzySearch.vue';\nimport ConfirmPharmacyService from '@/services/api/ConfirmPharmacyService';\nimport LanguageService from '@/services/settings/LanguageService';\nimport { AUTH_UPDATE_SHOW_UPDATE_PHARMACY_MODAL } from '@/store/types/mutation-types';\n\nexport default {\n  name: 'PharmacyConfirmationModal',\n\n  components: {\n    'apo-modal': Modal,\n    'apo-pharmacies-fuzzy-search': PharmaciesFuzzySearch,\n  },\n\n  data() {\n    return {\n      isBusy: false,\n      isConfirming: false,\n      showErrorMessage: false,\n      pharmacy: null,\n      selectedPharmacy: null,\n    };\n  },\n\n  computed: {\n    ...mapState({\n      firstName: state => state.auth.user.firstName,\n    }),\n  },\n\n  methods: {\n    onSelect(pharmacy) {\n      this.selectedPharmacy = {\n        pharmacyName: pharmacy.name,\n        pharmacyStreet: pharmacy.street,\n        pharmacyStreetNo: pharmacy.number,\n        pharmacyZipCode: pharmacy.zip,\n        pharmacyCity: pharmacy.city,\n      };\n    },\n    removeSelectedPharmacy() {\n      this.selectedPharmacy = null;\n    },\n    onConfirm() {\n      this.showErrorMessage = false;\n      this.isConfirming = true;\n      ConfirmPharmacyService.store({\n        name: this.selectedPharmacy.pharmacyName,\n        street: this.selectedPharmacy.pharmacyStreet,\n        number: this.selectedPharmacy.pharmacyStreetNo,\n        zip: this.selectedPharmacy.pharmacyZipCode,\n        city: this.selectedPharmacy.pharmacyCity,\n        country: LanguageService.resolveCountry(),\n      })\n        .then(() => {\n          this.isConfirming = false;\n          this.$store.commit(AUTH_UPDATE_SHOW_UPDATE_PHARMACY_MODAL, false);\n        })\n        .catch(error => {\n          console.error(error);\n          this.showErrorMessage = true;\n        })\n        .finally(() => { this.isConfirming = false; });\n    },\n  },\n\n  created() {\n    this.isBusy = true;\n    ConfirmPharmacyService.fetch()\n      .then(data => {\n        this.pharmacy = { ...data.pharmacy };\n      })\n      .catch(console.error)\n      .finally(() => { this.isBusy = false; });\n  },\n};\n\n</script>\n"]}]}