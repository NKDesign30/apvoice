{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/content/SituationalCases.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/content/SituationalCases.vue","mtime":1683275992553},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgZ2V0IGZyb20gJ2xvZGFzaC9nZXQnOwppbXBvcnQgU2l0dWF0aW9uYWxDYXNlc0hlYWQgZnJvbSAnQC9jb21wb25lbnRzL2NvbnRlbnQvc2l0dWF0aW9uYWwtY2FzZXMvU2l0dWF0aW9uYWxDYXNlc0hlYWQudnVlJzsKaW1wb3J0IFNpdHVhdGlvbmFsQ2FzZXNDb252ZXJzYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL2NvbnRlbnQvc2l0dWF0aW9uYWwtY2FzZXMvU2l0dWF0aW9uYWxDYXNlc0NvbnZlcnNhdGlvbi52dWUnOwppbXBvcnQgU2l0dWF0aW9uYWxDYXNlc1F1aXogZnJvbSAnQC9jb21wb25lbnRzL2NvbnRlbnQvc2l0dWF0aW9uYWwtY2FzZXMvU2l0dWF0aW9uYWxDYXNlc1F1aXoudnVlJzsKaW1wb3J0IENtc0NvbnRlbnRSZW5kZXJlciBmcm9tICdAL2NvbXBvbmVudHMvY21zL0Ntc0NvbnRlbnRSZW5kZXJlci52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewoKICBjb21wb25lbnRzOiB7CiAgICAnYXBvLXNpdHVhdGlvbmFsLWNhc2VzLWhlYWQnOiBTaXR1YXRpb25hbENhc2VzSGVhZCwKICAgICdhcG8tc2l0dWF0aW9uYWwtY2FzZXMtY29udmVyc2F0aW9uJzogU2l0dWF0aW9uYWxDYXNlc0NvbnZlcnNhdGlvbiwKICAgICdhcG8tc2l0dWF0aW9uYWwtY2FzZXMtcXVpeic6IFNpdHVhdGlvbmFsQ2FzZXNRdWl6LAogICAgJ2Fwby1jbXMtY29udGVudC1yZW5kZXJlcic6IENtc0NvbnRlbnRSZW5kZXJlciwKICB9LAoKICBwcm9wczogewogICAgc2l0dWF0aW9uYWxfY2FzZXM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9LAogICAgfSwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FzZTogMSwKICAgICAgc2hvd0NvbnRlbnQ6IGZhbHNlLAogICAgICBjdXJyZW50Q29udGVudDogW10sCiAgICAgIGN1cnJlbnRBbnN3ZXJJZDogbnVsbCwKICAgICAgcXVpelZhbGlkYXRpb246IHRydWUsCiAgICAgIGlzQW5zd2VyVHJ1ZTogZmFsc2UsCiAgICAgIHN0YXJ0VGltZW91dHM6IGZhbHNlLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgaGVhZGxpbmUoKSB7CiAgICAgIHJldHVybiB0aGlzLnNpdHVhdGlvbmFsX2Nhc2VzLmdsb2JhbHMuaGVhZGxpbmU7CiAgICB9LAoKICAgIHN1YmhlYWRsaW5lKCkgewogICAgICByZXR1cm4gdGhpcy5zaXR1YXRpb25hbF9jYXNlcy5nbG9iYWxzLnN1YmhlYWRsaW5lOwogICAgfSwKCiAgICBiYWNrZ3JvdW5kSW1hZ2UoKSB7CiAgICAgIHJldHVybiBnZXQodGhpcy5zaXR1YXRpb25hbF9jYXNlcywgJ2dsb2JhbHMuYmFja2dyb3VuZF9pbWFnZScsIHt9KTsKICAgIH0sCgogICAgYXZhdGFycygpIHsKICAgICAgcmV0dXJuIHRoaXMuc2l0dWF0aW9uYWxfY2FzZXMuZ2xvYmFscy5hdmF0YXJzOwogICAgfSwKCiAgICBmaW5pc2hQYWdlKCkgewogICAgICByZXR1cm4gdGhpcy5zaXR1YXRpb25hbF9jYXNlcy5maW5pc2hfcGFnZS5maW5pc2hfcGFnZTsKICAgIH0sCgogICAgY2FzZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLnNpdHVhdGlvbmFsX2Nhc2VzLnNpdHVhdGlvbmFsX2Nhc2VzX2l0ZW1zCiAgICAgICAgLmZsYXRNYXAoaXRlbSA9PiBpdGVtLnNpdHVhdGlvbmFsX2Nhc2VfaXRlbSkKICAgICAgICAubWFwKGl0ZW0gPT4gewogICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi8KICAgICAgICAgIGl0ZW0uYW5zd2VyT3B0aW9ucyA9IFtdOwogICAgICAgICAgaWYgKGl0ZW0uYW5zd2VyX29wdGlvbl9ncm91cF8xLmFuc3dlcikgewogICAgICAgICAgICBpdGVtLmFuc3dlck9wdGlvbnMucHVzaChpdGVtLmFuc3dlcl9vcHRpb25fZ3JvdXBfMSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXRlbS5hbnN3ZXJfb3B0aW9uX2dyb3VwXzIuYW5zd2VyKSB7CiAgICAgICAgICAgIGl0ZW0uYW5zd2VyT3B0aW9ucy5wdXNoKGl0ZW0uYW5zd2VyX29wdGlvbl9ncm91cF8yKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGRlbGV0ZSBpdGVtLmFuc3dlcl9vcHRpb25fZ3JvdXBfMTsKICAgICAgICAgIC8vIGRlbGV0ZSBpdGVtLmFuc3dlcl9vcHRpb25fZ3JvdXBfMjsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqLwogICAgICAgIH0pOwogICAgfSwKCiAgICBjdXJyZW50Q2FzZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2FzZXNbdGhpcy5jYXNlIC0gMV07CiAgICB9LAoKICAgIGZpcnN0U3BlYWtlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudENhc2UuZmlyc3Rfc3BlYWtlcjsKICAgIH0sCgogICAgc3BlZWNoQnViYmxlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudENhc2Uuc3BlZWNoX2J1YmJsZXM7CiAgICB9LAoKICAgIGlzRmlyc3RDYXNlKCkgewogICAgICByZXR1cm4gdGhpcy5jYXNlID09PSAxOwogICAgfSwKCiAgICBpc0xhc3RDYXNlKCkgewogICAgICByZXR1cm4gdGhpcy5jYXNlID09PSB0aGlzLmNhc2VzLmxlbmd0aDsKICAgIH0sCgogICAgaXNGaW5pc2hQYWdlKCkgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50Q29udGVudCA9PT0gdGhpcy5maW5pc2hQYWdlOwogICAgfSwKCiAgICBidXR0b25MYWJlbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNGaW5pc2hQYWdlID8gdGhpcy4kdCgnZ2VuZXJhbC5yZXN0YXJ0JykgOiB0aGlzLiR0KCdnZW5lcmFsLmNvbnRpbnVlJyk7CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uUHJvY2Vzc0Fuc3dlcihhbnN3ZXJJZCkgewogICAgICBpZiAoIWFuc3dlcklkKSB7CiAgICAgICAgdGhpcy5xdWl6VmFsaWRhdGlvbiA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLnF1aXpWYWxpZGF0aW9uID0gdHJ1ZTsKICAgICAgY29uc3QgY3VycmVudEFuc3dlciA9IHRoaXMuY3VycmVudENhc2UuYW5zd2VyT3B0aW9ucwogICAgICAgIC5maW5kKG9wdGlvbiA9PiBvcHRpb24uYW5zd2VyX2lkID09PSBhbnN3ZXJJZCk7CiAgICAgIHRoaXMuY3VycmVudENvbnRlbnQgPSBjdXJyZW50QW5zd2VyLmNvbnRlbnQgfHwgW107CiAgICAgIHRoaXMuaXNBbnN3ZXJUcnVlID0gY3VycmVudEFuc3dlci5pc190cnVlOwogICAgICB0aGlzLnNob3dDb250ZW50ID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHNjcm9sbFRvKHRoaXMuJGVsLCAyMDApOwogICAgICB9KTsKICAgIH0sCiAgICBvblVwZGF0ZUNhc2UoKSB7CiAgICAgIHRoaXMuaXNBbnN3ZXJUcnVlID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLmlzRmluaXNoUGFnZSkgewogICAgICAgIHRoaXMucmVzdGFydCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5pc0xhc3RDYXNlKSB7CiAgICAgICAgdGhpcy5jdXJyZW50Q29udGVudCA9IHRoaXMuZmluaXNoUGFnZSB8fCBbXTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5zaG93Q29udGVudCA9IGZhbHNlOwogICAgICB0aGlzLmNhc2UgKz0gMTsKICAgICAgdGhpcy5yZXN0YXJ0VGltZW91dHMoKTsKICAgIH0sCiAgICByZXN0YXJ0KCkgewogICAgICB0aGlzLmNhc2UgPSAxOwogICAgICB0aGlzLnNob3dDb250ZW50ID0gZmFsc2U7CiAgICAgIHRoaXMuY3VycmVudENvbnRlbnQgPSBbXTsKICAgICAgdGhpcy5yZXN0YXJ0VGltZW91dHMoKTsKICAgIH0sCiAgICByZXN0YXJ0VGltZW91dHMoKSB7CiAgICAgIHRoaXMuc3RhcnRUaW1lb3V0cyA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5zdGFydFRpbWVvdXRzID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICB2aXNpYmlsaXR5Q2hhbmdlZChpc1Zpc2libGUsIGVudHJ5KSB7CiAgICAgIGlmIChpc1Zpc2libGUpIHsKICAgICAgICB0aGlzLnN0YXJ0VGltZW91dHMgPSB0cnVlOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["SituationalCases.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SituationalCases.vue","sourceRoot":"src/components/content","sourcesContent":["<template>\n  <div\n    v-observe-visibility=\"{\n      callback: visibilityChanged,\n      once: true,\n    }\"\n    class=\"container situational-cases\"\n  >\n    <apo-situational-cases-head\n      :headline=\"headline\"\n      :subheadline=\"subheadline\"\n    />\n\n    <div v-if=\"showContent\">\n      <div\n        v-if=\"isAnswerTrue\"\n        class=\"text-center situational-cases__success-icon-wrapper my-7\"\n      >\n        <apo-icon\n          src=\"radio_checked\"\n          class=\"w-20 h-20\"\n        />\n      </div>\n      <apo-cms-content-renderer\n        :components=\"currentContent\"\n        class=\"pt-20\"\n      />\n      <div class=\"text-center situational-cases__button-wrapper mt-7\">\n        <apo-button\n          class=\"button button--primary invert button--tiny shadow-hard\"\n          @click=\"onUpdateCase\"\n          v-text=\"buttonLabel\"\n        />\n      </div>\n    </div>\n    <template v-else>\n      <apo-situational-cases-conversation\n        :background-image=\"backgroundImage\"\n        :avatars=\"avatars\"\n        :first-speaker=\"firstSpeaker\"\n        :speech-bubbles=\"speechBubbles\"\n        :start-timeout=\"startTimeouts\"\n      />\n      <apo-situational-cases-quiz\n        v-if=\"currentCase.question && currentCase.answerOptions.length > 0\"\n        :situational-case-item=\"currentCase\"\n        :validation=\"quizValidation\"\n        @process-answer=\"onProcessAnswer\"\n      />\n    </template>\n  </div>\n</template>\n\n<script>\n\nimport get from 'lodash/get';\nimport SituationalCasesHead from '@/components/content/situational-cases/SituationalCasesHead.vue';\nimport SituationalCasesConversation from '@/components/content/situational-cases/SituationalCasesConversation.vue';\nimport SituationalCasesQuiz from '@/components/content/situational-cases/SituationalCasesQuiz.vue';\nimport CmsContentRenderer from '@/components/cms/CmsContentRenderer.vue';\n\nexport default {\n\n  components: {\n    'apo-situational-cases-head': SituationalCasesHead,\n    'apo-situational-cases-conversation': SituationalCasesConversation,\n    'apo-situational-cases-quiz': SituationalCasesQuiz,\n    'apo-cms-content-renderer': CmsContentRenderer,\n  },\n\n  props: {\n    situational_cases: {\n      type: Object,\n      required: false,\n      default: () => {},\n    },\n  },\n\n  data() {\n    return {\n      case: 1,\n      showContent: false,\n      currentContent: [],\n      currentAnswerId: null,\n      quizValidation: true,\n      isAnswerTrue: false,\n      startTimeouts: false,\n    };\n  },\n\n  computed: {\n    headline() {\n      return this.situational_cases.globals.headline;\n    },\n\n    subheadline() {\n      return this.situational_cases.globals.subheadline;\n    },\n\n    backgroundImage() {\n      return get(this.situational_cases, 'globals.background_image', {});\n    },\n\n    avatars() {\n      return this.situational_cases.globals.avatars;\n    },\n\n    finishPage() {\n      return this.situational_cases.finish_page.finish_page;\n    },\n\n    cases() {\n      return this.situational_cases.situational_cases_items\n        .flatMap(item => item.situational_case_item)\n        .map(item => {\n          /* eslint-disable no-param-reassign */\n          item.answerOptions = [];\n          if (item.answer_option_group_1.answer) {\n            item.answerOptions.push(item.answer_option_group_1);\n          }\n          if (item.answer_option_group_2.answer) {\n            item.answerOptions.push(item.answer_option_group_2);\n          }\n          // delete item.answer_option_group_1;\n          // delete item.answer_option_group_2;\n          return item;\n          /* eslint-enable no-param-reassign */\n        });\n    },\n\n    currentCase() {\n      return this.cases[this.case - 1];\n    },\n\n    firstSpeaker() {\n      return this.currentCase.first_speaker;\n    },\n\n    speechBubbles() {\n      return this.currentCase.speech_bubbles;\n    },\n\n    isFirstCase() {\n      return this.case === 1;\n    },\n\n    isLastCase() {\n      return this.case === this.cases.length;\n    },\n\n    isFinishPage() {\n      return this.currentContent === this.finishPage;\n    },\n\n    buttonLabel() {\n      return this.isFinishPage ? this.$t('general.restart') : this.$t('general.continue');\n    },\n  },\n\n  methods: {\n    onProcessAnswer(answerId) {\n      if (!answerId) {\n        this.quizValidation = false;\n        return;\n      }\n      this.quizValidation = true;\n      const currentAnswer = this.currentCase.answerOptions\n        .find(option => option.answer_id === answerId);\n      this.currentContent = currentAnswer.content || [];\n      this.isAnswerTrue = currentAnswer.is_true;\n      this.showContent = true;\n      this.$nextTick(() => {\n        this.$scrollTo(this.$el, 200);\n      });\n    },\n    onUpdateCase() {\n      this.isAnswerTrue = false;\n      if (this.isFinishPage) {\n        this.restart();\n        return;\n      }\n      if (this.isLastCase) {\n        this.currentContent = this.finishPage || [];\n        return;\n      }\n      this.showContent = false;\n      this.case += 1;\n      this.restartTimeouts();\n    },\n    restart() {\n      this.case = 1;\n      this.showContent = false;\n      this.currentContent = [];\n      this.restartTimeouts();\n    },\n    restartTimeouts() {\n      this.startTimeouts = false;\n      this.$nextTick(() => {\n        this.startTimeouts = true;\n      });\n    },\n    // eslint-disable-next-line no-unused-vars\n    visibilityChanged(isVisible, entry) {\n      if (isVisible) {\n        this.startTimeouts = true;\n      }\n    },\n  },\n};\n</script>\n"]}]}