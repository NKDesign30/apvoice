{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/user/ProfilePicture.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/user/ProfilePicture.vue","mtime":1683275992569},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyByZWFkSW5wdXRGaWxlIH0gZnJvbSAnQC9zZXJ2aWNlcy91dGlscyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHVzZXI6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBwcm9maWxlUGljdHVyZToge30sCiAgICAgICAgICBmaXJzdE5hbWU6ICcnLAogICAgICAgICAgbGFzdE5hbWU6ICcnLAogICAgICAgIH07CiAgICAgIH0sCiAgICB9LAoKICAgIGltYWdlQ2xhc3M6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJywKICAgIH0sCgogICAgcGxhY2Vob2xkZXJJbWFnZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcvYXNzZXRzL2ltZy91c2VyL25vLXByb2ZpbGUtcGljdHVyZS5wbmcnLAogICAgfSwKCiAgICBpc0VkaXRhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvZmlsZVBpY3R1cmU6ICcnLAogICAgICBpc0xvYWRpbmc6IHRydWUsCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBmdWxsTmFtZSgpIHsKICAgICAgcmV0dXJuIGAke3RoaXMudXNlci5maXJzdE5hbWV9ICR7dGhpcy51c2VyLmxhc3ROYW1lfWA7CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uRmlsZUNoYW5nZWQoZXZlbnQpIHsKICAgICAgdGhpcy5yZW5kZXJQcm9maWxlUGljdHVyZVByZXZpZXcoKTsKCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZXZlbnQpOwogICAgfSwKCiAgICBhc3luYyByZW5kZXJQcm9maWxlUGljdHVyZVByZXZpZXcoKSB7CiAgICAgIGlmICghdGhpcy4kcmVmcy5waWN0dXJlLmZpbGVzIHx8IHRoaXMuJHJlZnMucGljdHVyZS5maWxlcy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMucHJvZmlsZVBpY3R1cmUgPSBhd2FpdCByZWFkSW5wdXRGaWxlKHRoaXMuJHJlZnMucGljdHVyZS5maWxlc1swXSk7CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCBpbWFnZVRvTG9hZCA9IHRoaXMudXNlci5wcm9maWxlUGljdHVyZVsnMjUwJ10gfHwgdGhpcy51c2VyLnByb2ZpbGVQaWN0dXJlLmZ1bGwgfHwgdGhpcy5wbGFjZWhvbGRlckltYWdlOwoKICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwoKICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7CiAgICAgIHRoaXMucHJvZmlsZVBpY3R1cmUgPSBpbWFnZVRvTG9hZDsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgIH07CgogICAgaW1nLm9uZXJyb3IgPSAoKSA9PiB7CiAgICAgIHRoaXMucHJvZmlsZVBpY3R1cmUgPSB0aGlzLnBsYWNlaG9sZGVySW1hZ2U7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9OwoKICAgIGltZy5zcmMgPSBpbWFnZVRvTG9hZDsKICB9LAp9OwoK"},{"version":3,"sources":["ProfilePicture.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ProfilePicture.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\n  <div class=\"profile-picture\">\n    <div\n      class=\"profile-picture-wrapper\"\n      :class=\"{\n        'flex justify-center items-center': isLoading,\n        [imageClass]: true,\n      }\"\n    >\n      <apo-spinner\n        v-if=\"isLoading\"\n        size=\"small\"\n      />\n      <img\n        v-else\n        :alt=\"$t('pages.profile.pictureCaption', { name: fullName })\"\n        class=\"profile-picture-image\"\n        :src=\"profilePicture\"\n        v-bind=\"$attrs\"\n      >\n    </div>\n\n    <button\n      v-if=\"isEditable\"\n      class=\"mt-2 underline text-gray-900 relative\"\n      type=\"button\"\n    >\n      <span v-text=\"$t('pages.profile.changePicture')\" />\n      <input\n        ref=\"picture\"\n        class=\"absolute left-0 top-0 opacity-0 cursor-pointer\"\n        type=\"file\"\n        @change=\"onFileChanged\"\n      >\n    </button>\n  </div>\n</template>\n\n<script>\n\nimport { readInputFile } from '@/services/utils';\n\nexport default {\n  props: {\n    user: {\n      type: Object,\n      default() {\n        return {\n          profilePicture: {},\n          firstName: '',\n          lastName: '',\n        };\n      },\n    },\n\n    imageClass: {\n      type: String,\n      default: '',\n    },\n\n    placeholderImage: {\n      type: String,\n      default: '/assets/img/user/no-profile-picture.png',\n    },\n\n    isEditable: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return {\n      profilePicture: '',\n      isLoading: true,\n    };\n  },\n\n  computed: {\n    fullName() {\n      return `${this.user.firstName} ${this.user.lastName}`;\n    },\n  },\n\n  methods: {\n    onFileChanged(event) {\n      this.renderProfilePicturePreview();\n\n      this.$emit('input', event);\n    },\n\n    async renderProfilePicturePreview() {\n      if (!this.$refs.picture.files || this.$refs.picture.files.length === 0) {\n        return;\n      }\n\n      this.profilePicture = await readInputFile(this.$refs.picture.files[0]);\n    },\n  },\n\n  created() {\n    const imageToLoad = this.user.profilePicture['250'] || this.user.profilePicture.full || this.placeholderImage;\n\n    const img = new Image();\n\n    img.onload = () => {\n      this.profilePicture = imageToLoad;\n      this.isLoading = false;\n    };\n\n    img.onerror = () => {\n      this.profilePicture = this.placeholderImage;\n      this.isLoading = false;\n    };\n\n    img.src = imageToLoad;\n  },\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n\n.profile-picture {\n  @apply inline-flex;\n  @apply flex-col;\n  @apply items-center;\n\n  &-wrapper {\n    @apply rounded-full;\n    @apply border-10;\n    @apply border-white;\n    @apply w-32;\n    @apply h-32;\n\n    box-shadow: 0 4px 0 1px rgba(0, 0, 0,0.2), inset 0 1px 60px rgba(0, 0, 0, 0.35);\n  }\n\n  &-image {\n    @apply rounded-full;\n    @apply w-full;\n    @apply h-full;\n  }\n}\n\n/deep/ .vue-simple-spinner {\n  border-color:\n    transparent\n    theme('colors.white')\n    theme('colors.white')\n    #{!important};\n  }\n\n</style>\n"]}]}